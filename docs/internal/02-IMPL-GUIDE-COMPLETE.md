# VJS-UI æ¶æ„å®æ–½æŒ‡å—ï¼ˆæ€»å¯¼èˆªï¼‰

> **æ–‡æ¡£æ€§è´¨**: æ€»ä½“å®æ–½æµç¨‹ç´¢å¼•  
> **ç›®æ ‡**: æä¾›æ¸…æ™°çš„ã€æœ‰åºçš„æ¶æ„å®ç°è·¯å¾„  
> **æ›´æ–°æ—¥æœŸ**: 2025-01-08  
> **çŠ¶æ€**: ğŸ¯ æ‰§è¡ŒæŒ‡å—

---

## ğŸ“– å¦‚ä½•ä½¿ç”¨æœ¬æŒ‡å—

æœ¬æ–‡æ¡£æ˜¯VJS-UIé¡¹ç›®çš„**æ€»å¯¼èˆª**ï¼ŒæŒ‰ç…§æ¶æ„å®ç°çš„çœŸå®é¡ºåºæ•´ç†äº†æ‰€æœ‰æ–‡æ¡£ã€‚

**é˜…è¯»åŸåˆ™**ï¼š
1. **ä¸¥æ ¼æŒ‰åºå·é˜…è¯»** - æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å‰ç½®ä¾èµ–
2. **ç†è§£åå†åŠ¨æ‰‹** - çœ‹æ‡‚æ–‡æ¡£å†å†™ä»£ç 
3. **è¾¹åšè¾¹éªŒè¯** - å®Œæˆä¸€ä¸ªæ­¥éª¤ï¼Œè¿è¡Œæµ‹è¯•éªŒè¯
4. **è®°å½•é—®é¢˜** - é‡åˆ°é—®é¢˜åŠæ—¶æ›´æ–°æ–‡æ¡£

---

## ğŸ¯ æ¶æ„å®æ–½æµç¨‹æ€»è§ˆ

```
é˜¶æ®µ0ï¼šäº†è§£é¡¹ç›®ï¼ˆ1-2å¤©ï¼‰
    â†“
é˜¶æ®µ1ï¼šå…³é”®æ–‡æ¡£å¿…è¯»ï¼ˆ1-2å¤©ï¼‰ğŸ”´
    â†“
é˜¶æ®µ2ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆ2-3å¤©ï¼‰
    â†“
é˜¶æ®µ3ï¼šMVPå¿«é€ŸéªŒè¯ï¼ˆ4å‘¨ï¼‰ğŸ¯
    â†“
é˜¶æ®µ4ï¼šCoreå¼•æ“å®Œå–„ï¼ˆ6-8å‘¨ï¼‰
    â†“
é˜¶æ®µ5ï¼šVueé€‚é…å±‚ï¼ˆ6å‘¨ï¼‰
    â†“
é˜¶æ®µ6ï¼šå¼€å‘è€…å·¥å…·ï¼ˆ3-4å‘¨ï¼‰
    â†“
é˜¶æ®µ7ï¼šè·¨æ¡†æ¶æ‰©å±•ï¼ˆ4å‘¨ï¼‰
    â†“
é˜¶æ®µ8ï¼šä¼ä¸šçº§ç‰¹æ€§ï¼ˆæŒç»­ï¼‰
```

---

## ğŸ“š é˜¶æ®µ0ï¼šé¡¹ç›®ç†è§£é˜¶æ®µï¼ˆ1-2å¤©ï¼‰

### ğŸ“„ 0-1. é¡¹ç›®æ¦‚è§ˆ

**æ–‡æ¡£**: `../README.md`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰  
**ç”¨æ—¶**: 30åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**é˜…è¯»é‡ç‚¹**ï¼š
- é¡¹ç›®å®šä½ï¼šè·¨æ¡†æ¶UIç»„ä»¶åº“
- æ ¸å¿ƒç‰¹æ€§ï¼šDSLé©±åŠ¨ã€Design Tokenã€å“åº”å¼
- æŠ€æœ¯æ ˆï¼špnpm + Turborepo + TypeScript
- å¼€å‘å‘¨æœŸï¼š23-26å‘¨ï¼ˆçº¦6ä¸ªæœˆï¼‰

---

### ğŸ“„ 0-2. æ–‡æ¡£ä¸­å¿ƒå¯¼èˆª

**æ–‡æ¡£**: [docs/README.md](./README.md)  
**ç”¨æ—¶**: 20åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**ä½œç”¨**ï¼š
- äº†è§£æ‰€æœ‰æ–‡æ¡£çš„åˆ†ç±»
- æ‰¾åˆ°é€‚åˆä½ è§’è‰²çš„é˜…è¯»è·¯å¾„
- æŸ¥çœ‹é¡¹ç›®å½“å‰çŠ¶æ€

---

## ğŸš¨ é˜¶æ®µ1ï¼šå…³é”®æ–‡æ¡£å¿…è¯»é˜¶æ®µï¼ˆ1-2å¤©ï¼‰

> **âš ï¸ è­¦å‘Š**: ä¸è¯»è¿™äº›æ–‡æ¡£ç›´æ¥å¼€å‘ï¼Œä¼šå¯¼è‡´è¿”å·¥ï¼

### ğŸ“„ 1-1. é£é™©è¯„ä¼°ä¸æ”¹è¿›æ–¹æ¡ˆ ğŸ”´

**æ–‡æ¡£**: [RISK-ASSESSMENT.md](./RISK-ASSESSMENT.md)  
**ç”¨æ—¶**: 1å°æ—¶  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜ï¼ˆå¿…è¯»ï¼ï¼‰

**æ ¸å¿ƒå†…å®¹**ï¼š
1. **åå¤§å…³é”®é—®é¢˜**
   - æ—¶é—´ä¼°ç®—ä¸è¶³ï¼ˆ8å‘¨â†’23-26å‘¨ï¼‰
   - æ¶æ„å¤æ‚åº¦è¿‡é«˜ï¼ˆéœ€è¦èŒè´£åˆ†ç¦»ï¼‰
   - å®‰å…¨æ€§å®ç°ä¸è¶³ï¼ˆéœ€è¦äº”å±‚é˜²æŠ¤ï¼‰
   - æ€§èƒ½ç›®æ ‡ä¸ç°å®ï¼ˆ50KBâ†’80KBï¼‰

2. **æ”¹è¿›æ–¹æ¡ˆ**
   - æ¶æ„é‡æ„ï¼šCoreæ‹†åˆ†ä¸º4ä¸ªå­ç³»ç»Ÿ
   - å®‰å…¨åŠ å›ºï¼šäº”å±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶
   - æ€§èƒ½è°ƒæ•´ï¼šæ›´ç°å®çš„æ€§èƒ½ç›®æ ‡
   - MVPä¼˜å…ˆï¼š4å‘¨å¿«é€ŸéªŒè¯æ–¹æ¡ˆ

**å¿…é¡»ç†è§£çš„æ¦‚å¿µ**ï¼š
- ä¸ºä»€ä¹ˆæ—¶é—´è¦ä»8å‘¨è°ƒæ•´åˆ°26å‘¨
- äº”å±‚å®‰å…¨é˜²æŠ¤æ˜¯ä»€ä¹ˆ
- MVPå’Œå®Œæ•´ç‰ˆçš„åŒºåˆ«

---

### ğŸ“„ 1-2. æ¶æ„è®¾è®¡æ€»è§ˆ

**æ–‡æ¡£**: [ARCHITECTURE.md](./ARCHITECTURE.md)  
**ç”¨æ—¶**: 1å°æ—¶  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æ ¸å¿ƒå†…å®¹**ï¼š
1. **ä¸‰å±‚æ¶æ„æ¨¡å‹**
   - Layer 1: Design Tokens
   - Layer 2: Core Engine
   - Layer 3: Framework Adapters

2. **Coreå¼•æ“ç»„ä»¶**
   - Parserã€Evaluatorã€Reactiveã€Binderã€Renderer

**å¿…é¡»ç†è§£çš„æ¦‚å¿µ**ï¼š
- ä»€ä¹ˆæ˜¯ä¸‰å±‚æ¶æ„
- DSLå¦‚ä½•è½¬æ¢ä¸ºçœŸå®ç»„ä»¶
- å“åº”å¼ç³»ç»Ÿå¦‚ä½•å·¥ä½œ

---

### ğŸ“„ 1-3. æµ‹è¯•ç­–ç•¥

**æ–‡æ¡£**: [TESTING-STRATEGY.md](./TESTING-STRATEGY.md)  
**ç”¨æ—¶**: 45åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æ ¸å¿ƒå†…å®¹**ï¼š
- æµ‹è¯•é‡‘å­—å¡”ï¼š70%å•å…ƒ + 20%é›†æˆ + 10%E2E
- è¦†ç›–ç‡è¦æ±‚ï¼šCoreâ‰¥90%, Vueâ‰¥85%, æ•´ä½“â‰¥85%
- å®‰å…¨æµ‹è¯•ï¼š100%è¦†ç›–

---

### ğŸ“„ 1-4. æ€»ä½“å®æ–½è®¡åˆ’

**æ–‡æ¡£**: [00-MASTER-PLAN.md](./00-MASTER-PLAN.md)  
**ç”¨æ—¶**: 45åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**æ ¸å¿ƒå†…å®¹**ï¼š
- æ—¶é—´è§„åˆ’å¯¹æ¯”ï¼ˆåŸ8-10å‘¨ â†’ è°ƒæ•´23-26å‘¨ï¼‰
- é‡Œç¨‹ç¢‘å®šä¹‰ï¼ˆMVP/Alpha/Beta/Releaseï¼‰
- å„é˜¶æ®µç›®æ ‡å’Œä»»åŠ¡

---

### ğŸ“„ 1-5. æŠ€æœ¯è§„èŒƒ

**æ–‡æ¡£**: [TECHNICAL-SPECS.md](./TECHNICAL-SPECS.md)  
**ç”¨æ—¶**: 30åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä¸­

**æ ¸å¿ƒå†…å®¹**ï¼š
- ä»£ç è§„èŒƒï¼ˆTypeScript/ESLint/Prettierï¼‰
- å‘½åè§„èŒƒ
- æ€§èƒ½è§„èŒƒ
- å®‰å…¨è§„èŒƒ

---

### ğŸ“„ 1-6. ç»„ä»¶è·¯çº¿å›¾

**æ–‡æ¡£**: [COMPONENT-ROADMAP.md](./COMPONENT-ROADMAP.md)  
**ç”¨æ—¶**: 30åˆ†é’Ÿ  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ï¼ˆå¯ç¨åï¼‰

**æ ¸å¿ƒå†…å®¹**ï¼š
- ä¸‰å±‚ç»„ä»¶ä½“ç³»ï¼ˆFoundation/Composition/Proï¼‰
- 60+ç»„ä»¶å®Œæ•´çŸ©é˜µ
- å¼€å‘é˜¶æ®µè§„åˆ’

---

## ğŸ”§ é˜¶æ®µ2ï¼šé¡¹ç›®åˆå§‹åŒ–é˜¶æ®µï¼ˆ2-3å¤©ï¼‰

### ğŸ“„ 2-1. å®æ–½æ¸…å•æ€»è§ˆ

**æ–‡æ¡£**: [IMPLEMENTATION-CHECKLIST.md](./IMPLEMENTATION-CHECKLIST.md)  
**ç”¨æ—¶**: æŒç»­ä½¿ç”¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**ä½œç”¨**: é¡¹ç›®å®æ–½çš„Task Listï¼Œæ¯å®Œæˆä¸€é¡¹æ‰“å‹¾

---

### 2.1 Day 1ï¼šMonorepoæ¶æ„æ­å»º

#### åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•
```bash
# 1. åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹
mkdir vjs-ui && cd vjs-ui

# 2. åˆå§‹åŒ–Git
git init
git branch -M main

# 3. åˆ›å»º.gitignore
cat > .gitignore << 'EOF'
# Dependencies
node_modules/
.pnpm-store/

# Build outputs
dist/
*.tsbuildinfo

# Logs
logs/
*.log
npm-debug.log*

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Env
.env
.env.local
.env.*.local

# Test coverage
coverage/
.nyc_output/

# Temp
.temp/
.cache/
EOF
```

#### é…ç½®pnpm workspace
```bash
# 1. å®‰è£…pnpmï¼ˆå¦‚æœªå®‰è£…ï¼‰
npm install -g pnpm

# 2. åˆå§‹åŒ–package.json
pnpm init

# 3. åˆ›å»ºpnpm-workspace.yaml
cat > pnpm-workspace.yaml << 'EOF'
packages:
  - 'packages/*'
  - 'examples/*'
EOF

# 4. æ›´æ–°package.json
cat > package.json << 'EOF'
{
  "name": "vjs-ui",
  "version": "0.0.0",
  "private": true,
  "description": "A cross-framework UI library powered by Design Tokens and DSL",
  "type": "module",
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "test": "turbo run test",
    "test:coverage": "turbo run test:coverage",
    "lint": "turbo run lint",
    "format": "prettier --write \"**/*.{ts,tsx,vue,js,json,md}\"",
    "clean": "turbo run clean && rm -rf node_modules",
    "changeset": "changeset",
    "version-packages": "changeset version",
    "release": "pnpm build && changeset publish"
  },
  "devDependencies": {
    "@changesets/cli": "^2.27.1",
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "eslint": "^8.56.0",
    "eslint-config-prettier": "^9.1.0",
    "prettier": "^3.2.4",
    "turbo": "^1.11.0",
    "typescript": "^5.3.3",
    "vitest": "^1.2.0"
  },
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  },
  "packageManager": "pnpm@8.15.0"
}
EOF
```

#### é…ç½®Turborepo
```bash
# åˆ›å»ºturbo.json
cat > turbo.json << 'EOF'
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*local"],
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**", ".next/**", "!.next/cache/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "test": {
      "dependsOn": ["build"],
      "outputs": ["coverage/**"]
    },
    "test:coverage": {
      "dependsOn": ["build"],
      "outputs": ["coverage/**"]
    },
    "lint": {
      "outputs": []
    },
    "clean": {
      "cache": false
    }
  }
}
EOF
```

#### åˆ›å»ºpackagesç›®å½•ç»“æ„
```bash
# åˆ›å»ºæ ¸å¿ƒåŒ…
mkdir -p packages/core/src/{types,token,reactive,dsl,evaluator,binder}
mkdir -p packages/core/test/{unit,integration,benchmarks}

# åˆ›å»ºVueé€‚é…åŒ…
mkdir -p packages/vue/src/{adapter,components,composables}
mkdir -p packages/vue/test/{unit,e2e}

# åˆ›å»ºReacté€‚é…åŒ…ï¼ˆåæœŸï¼‰
mkdir -p packages/react/src/{adapter,components,hooks}
mkdir -p packages/react/test

# åˆ›å»ºå·¥å…·åŒ…
mkdir -p packages/utils/src
mkdir -p packages/cli/src

# åˆ›å»ºç¤ºä¾‹é¡¹ç›®
mkdir -p examples/mvp-demo/src
mkdir -p examples/playground/src

# åˆ›å»ºæ–‡æ¡£ç›®å½•
mkdir -p docs
```

---

### 2.2 Day 2ï¼šTypeScripté…ç½®

#### æ ¹ç›®å½•tsconfig.jsonï¼ˆåŸºç¡€é…ç½®ï¼‰
```bash
cat > tsconfig.json << 'EOF'
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "allowJs": true,
    "checkJs": false,
    
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true,
    
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    
    "outDir": "./dist",
    "baseUrl": ".",
    "paths": {
      "@vjs-ui/core": ["./packages/core/src"],
      "@vjs-ui/vue": ["./packages/vue/src"],
      "@vjs-ui/utils": ["./packages/utils/src"]
    }
  },
  "include": ["packages/*/src/**/*"],
  "exclude": ["node_modules", "dist", "**/node_modules", "**/dist"]
}
EOF
```

#### packages/core/tsconfig.json
```bash
cat > packages/core/tsconfig.json << 'EOF'
{
  "extends": "../../tsconfig.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "composite": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "test"]
}
EOF
```

#### packages/vue/tsconfig.json
```bash
cat > packages/vue/tsconfig.json << 'EOF'
{
  "extends": "../../tsconfig.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "composite": true,
    "jsx": "preserve"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "test"],
  "references": [
    { "path": "../core" }
  ]
}
EOF
```

---

### 2.3 Day 2ï¼šä»£ç è§„èŒƒé…ç½®

#### ESLinté…ç½®
```bash
cat > .eslintrc.cjs << 'EOF'
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true
  },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
    'prettier'
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
    project: ['./tsconfig.json', './packages/*/tsconfig.json']
  },
  plugins: ['@typescript-eslint'],
  rules: {
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-unused-vars': [
      'error',
      { argsIgnorePattern: '^_', varsIgnorePattern: '^_' }
    ]
  },
  ignorePatterns: ['dist', 'node_modules', '*.config.js', '*.config.ts']
}
EOF
```

#### Prettieré…ç½®
```bash
cat > .prettierrc.json << 'EOF'
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "arrowParens": "always",
  "endOfLine": "lf",
  "useTabs": false
}
EOF

cat > .prettierignore << 'EOF'
dist
node_modules
coverage
.next
.nuxt
.output
.vitepress/cache
.vitepress/dist
pnpm-lock.yaml
CHANGELOG.md
EOF
```

#### EditorConfigé…ç½®
```bash
cat > .editorconfig << 'EOF'
root = true

[*]
charset = utf-8
end_of_line = lf
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false

[*.json]
insert_final_newline = false
EOF
```

---

### 2.4 Day 3ï¼šCI/CDé…ç½®

#### GitHub Actions - æµ‹è¯•å·¥ä½œæµ
```bash
mkdir -p .github/workflows

cat > .github/workflows/ci.yml << 'EOF'
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18
      
      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8
          run_install: false
      
      - name: Get pnpm store directory
        id: pnpm-cache
        shell: bash
        run: |
          echo "STORE_PATH=$(pnpm store path)" >> $GITHUB_OUTPUT
      
      - name: Setup pnpm cache
        uses: actions/cache@v3
        with:
          path: ${{ steps.pnpm-cache.outputs.STORE_PATH }}
          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}
          restore-keys: |
            ${{ runner.os }}-pnpm-store-
      
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      
      - name: Lint
        run: pnpm lint
      
      - name: Type check
        run: pnpm type-check
      
      - name: Test
        run: pnpm test:coverage
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json
          flags: unittests
          name: codecov-umbrella

  build:
    name: Build
    runs-on: ubuntu-latest
    needs: test
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node.js & pnpm
        uses: actions/setup-node@v4
        with:
          node-version: 18
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      
      - name: Build
        run: pnpm build
      
      - name: Check bundle size
        run: pnpm check-size
EOF
```

#### GitHub Actions - å‘å¸ƒå·¥ä½œæµ
```bash
cat > .github/workflows/release.yml << 'EOF'
name: Release

on:
  push:
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  release:
    name: Release
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      
      - name: Build
        run: pnpm build
      
      - name: Create Release Pull Request or Publish
        uses: changesets/action@v1
        with:
          publish: pnpm release
          commit: 'chore: release packages'
          title: 'chore: release packages'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
EOF
```

---

### 2.5 Day 3ï¼šChangesetsé…ç½®

```bash
# åˆå§‹åŒ–Changesets
pnpm dlx @changesets/cli init

# é…ç½®.changeset/config.json
cat > .changeset/config.json << 'EOF'
{
  "$schema": "https://unpkg.com/@changesets/config@2.3.1/schema.json",
  "changelog": "@changesets/cli/changelog",
  "commit": false,
  "fixed": [],
  "linked": [],
  "access": "public",
  "baseBranch": "main",
  "updateInternalDependencies": "patch",
  "ignore": ["@vjs-ui/examples-*"]
}
EOF
```

---

### 2.6 åˆ›å»ºæ ¸å¿ƒåŒ…package.json

#### packages/core/package.json
```bash
cat > packages/core/package.json << 'EOF'
{
  "name": "@vjs-ui/core",
  "version": "0.0.0",
  "description": "VJS-UI Core Engine",
  "type": "module",
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.js"
    }
  },
  "files": ["dist"],
  "scripts": {
    "dev": "vite build --watch",
    "build": "vite build && tsc --emitDeclarationOnly",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage",
    "lint": "eslint src --ext .ts",
    "clean": "rm -rf dist"
  },
  "dependencies": {
    "jsep": "^1.3.8"
  },
  "devDependencies": {
    "@types/node": "^20.11.5",
    "@vitest/coverage-v8": "^1.2.0",
    "vite": "^5.0.11",
    "vite-plugin-dts": "^3.7.0",
    "vitest": "^1.2.0"
  },
  "keywords": [
    "vjs-ui",
    "design-tokens",
    "dsl",
    "reactive",
    "ui-framework"
  ],
  "license": "MIT"
}
EOF
```

#### packages/vue/package.json
```bash
cat > packages/vue/package.json << 'EOF'
{
  "name": "@vjs-ui/vue",
  "version": "0.0.0",
  "description": "VJS-UI Vue 3 Adapter",
  "type": "module",
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.js"
    }
  },
  "files": ["dist"],
  "scripts": {
    "dev": "vite build --watch",
    "build": "vite build && tsc --emitDeclarationOnly",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage",
    "lint": "eslint src --ext .ts,.vue",
    "clean": "rm -rf dist"
  },
  "dependencies": {
    "@vjs-ui/core": "workspace:*"
  },
  "peerDependencies": {
    "vue": "^3.3.0"
  },
  "devDependencies": {
    "@types/node": "^20.11.5",
    "@vitejs/plugin-vue": "^5.0.3",
    "@vitest/coverage-v8": "^1.2.0",
    "@vue/test-utils": "^2.4.3",
    "vite": "^5.0.11",
    "vite-plugin-dts": "^3.7.0",
    "vitest": "^1.2.0",
    "vue": "^3.4.15"
  },
  "keywords": [
    "vjs-ui",
    "vue",
    "vue3",
    "components"
  ],
  "license": "MIT"
}
EOF
```

---

### 2.7 åˆ›å»ºViteé…ç½®

#### packages/core/vite.config.ts
```bash
cat > packages/core/vite.config.ts << 'EOF'
import { defineConfig } from 'vite'
import { resolve } from 'path'

export default defineConfig({
  build: {
    lib: {
      entry: resolve(__dirname, 'src/index.ts'),
      name: 'VJSUICore',
      fileName: 'index',
      formats: ['es']
    },
    rollupOptions: {
      external: ['jsep'],
      output: {
        exports: 'named'
      }
    },
    sourcemap: true,
    minify: false
  }
})
EOF
```

---

### 2.8 åˆ›å»ºæµ‹è¯•é…ç½®

#### vitest.config.ts
```bash
cat > vitest.config.ts << 'EOF'
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./test/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'test/',
        '**/*.test.ts',
        '**/*.spec.ts',
        '**/dist/**'
      ],
      thresholds: {
        lines: 85,
        functions: 85,
        branches: 80,
        statements: 85
      }
    }
  }
})
EOF
```

---

### 2.9 Gitæäº¤è§„èŒƒ

#### commitlinté…ç½®
```bash
# å®‰è£…commitlint
pnpm add -D @commitlint/cli @commitlint/config-conventional

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > .commitlintrc.cjs << 'EOF'
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',     // æ–°åŠŸèƒ½
        'fix',      // ä¿®å¤bug
        'docs',     // æ–‡æ¡£
        'style',    // æ ¼å¼
        'refactor', // é‡æ„
        'perf',     // æ€§èƒ½ä¼˜åŒ–
        'test',     // æµ‹è¯•
        'chore',    // æ„å»º/å·¥å…·
        'revert',   // å›é€€
        'ci'        // CIé…ç½®
      ]
    ]
  }
}
EOF

# é…ç½®husky
pnpm add -D husky lint-staged
pnpm exec husky install

# åˆ›å»ºpre-commit hook
cat > .husky/pre-commit << 'EOF'
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

pnpm exec lint-staged
EOF

chmod +x .husky/pre-commit

# åˆ›å»ºcommit-msg hook
cat > .husky/commit-msg << 'EOF'
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

pnpm exec commitlint --edit $1
EOF

chmod +x .husky/commit-msg

# é…ç½®lint-staged
cat > .lintstagedrc.json << 'EOF'
{
  "*.{ts,tsx,vue}": [
    "eslint --fix",
    "prettier --write"
  ],
  "*.{js,json,md}": [
    "prettier --write"
  ]
}
EOF
```

---

### 2.10 åˆ›å»ºREADME

#### é¡¹ç›®æ ¹README.md
```bash
cat > README.md << 'EOF'
# VJS-UI

> A cross-framework UI library powered by Design Tokens and DSL

## ğŸš€ Features

- ğŸ¨ **Design Tokens** - Theme customization made easy
- ğŸ“ **DSL Driven** - Build UIs with declarative syntax
- âš¡ **High Performance** - Optimized for speed
- ğŸ”’ **Type Safe** - Full TypeScript support
- ğŸŒ **Cross Framework** - Vue 3, React, Web Components
- ğŸ” **Secure** - Multi-layer security protection

## ğŸ“¦ Packages

- `@vjs-ui/core` - Core engine
- `@vjs-ui/vue` - Vue 3 adapter
- `@vjs-ui/react` - React adapter (coming soon)
- `@vjs-ui/cli` - CLI tools (coming soon)

## ğŸ› ï¸ Development

```bash
# Install dependencies
pnpm install

# Start development
pnpm dev

# Build all packages
pnpm build

# Run tests
pnpm test

# Run tests with coverage
pnpm test:coverage
```

## ğŸ“– Documentation

See [docs/README.md](./docs/README.md)

## ğŸ—ºï¸ Roadmap

- [x] Project setup
- [ ] MVP (4 weeks)
- [ ] Core engine (6-8 weeks)
- [ ] Vue adapter (6 weeks)
- [ ] React adapter (4 weeks)

## ğŸ“„ License

MIT

---

**Status**: ğŸ¯ In Planning
**Version**: v0.0.0
EOF
```

---

### 2.11 æœ€åæ£€æŸ¥æ¸…å•

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install

# éªŒè¯é…ç½®
pnpm lint
pnpm type-check

# æäº¤åˆå§‹ä»£ç 
git add .
git commit -m "chore: initial project setup"

# æ¨é€åˆ°è¿œç¨‹ï¼ˆå¦‚æœå·²é…ç½®ï¼‰
git remote add origin <your-repo-url>
git push -u origin main
```

---

**é˜¶æ®µ2å®Œæˆæ ‡å‡†**ï¼š
- [ ] Monorepoæ¶æ„æ­å»ºå®Œæˆ
- [ ] TypeScripté…ç½®æ­£ç¡®
- [ ] ä»£ç è§„èŒƒå·¥å…·é…ç½®å®Œæˆ
- [ ] CI/CDå·¥ä½œæµé…ç½®å®Œæˆ
- [ ] Changesetsé…ç½®å®Œæˆ
- [ ] æ‰€æœ‰package.jsonåˆ›å»ºå®Œæˆ
- [ ] Gitå·¥ä½œæµé…ç½®å®Œæˆ
- [ ] pnpm installæ— é”™è¯¯
- [ ] pnpm linté€šè¿‡
- [ ] é¦–æ¬¡Gitæäº¤å®Œæˆ

---

## ğŸ¯ é˜¶æ®µ3ï¼šMVPå¿«é€ŸéªŒè¯é˜¶æ®µï¼ˆ4å‘¨ï¼‰

### ğŸ“„ 3-1. MVPå®æ–½è®¡åˆ’æ€»è§ˆ

**æ–‡æ¡£**: [MVP-PLAN.md](./MVP-PLAN.md)  
**ç”¨æ—¶**: 4å‘¨ï¼ˆä¸¥æ ¼æ‰§è¡Œï¼‰  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜

**ä¸ºä»€ä¹ˆä»MVPå¼€å§‹ï¼Ÿ**
1. å¿«é€ŸéªŒè¯æŠ€æœ¯æ–¹æ¡ˆçš„å¯è¡Œæ€§
2. é™ä½é£é™©ï¼Œé¿å…å¤§è§„æ¨¡è¿”å·¥
3. 4å‘¨å†…çœ‹åˆ°å¯è¿è¡Œçš„æˆæœ
4. å»ºç«‹å›¢é˜Ÿä¿¡å¿ƒ

**MVPæ ¸å¿ƒåŸåˆ™**ï¼š
- ç®€å•ä¼˜å…ˆ - åŠŸèƒ½æœ€å°åŒ–
- ç¨³å®šå¯ç”¨ - è´¨é‡ä¸å¦¥å
- å¯æ‰©å±• - ä¸ºæœªæ¥ç•™æ¥å£

---

### 3.1 MVPåŠŸèƒ½èŒƒå›´å®šä¹‰

#### âœ… åŒ…å«åŠŸèƒ½
```typescript
// Tokenç³»ç»Ÿï¼ˆç®€åŒ–ç‰ˆï¼‰
- é™æ€Tokenå®šä¹‰
- åŸºç¡€ç¼–è¯‘å™¨ï¼ˆJSON â†’ CSS Variablesï¼‰
- TypeScriptç±»å‹ç”Ÿæˆ

// å“åº”å¼ç³»ç»Ÿï¼ˆåŸºç¡€ç‰ˆï¼‰
- reactive() - åˆ›å»ºå“åº”å¼å¯¹è±¡
- effect() - è‡ªåŠ¨è¿½è¸ªä¾èµ–
- ref() - åŸºæœ¬ç±»å‹å“åº”å¼

// DSLè§£æå™¨ï¼ˆæ— è¡¨è¾¾å¼ï¼‰
- é™æ€propsè§£æ
- é™æ€styleè§£æ
- åŸºç¡€æ’æ§½æ”¯æŒ

// Vueæ¸²æŸ“å™¨
- ç»„ä»¶æ³¨å†Œ
- DSL â†’ Vue VNodeè½¬æ¢
- åŸºç¡€æ¸²æŸ“

// 3ä¸ªåŸºç¡€ç»„ä»¶
- VButtonï¼ˆç±»å‹ã€ç¦ç”¨ã€äº‹ä»¶ï¼‰
- VInputï¼ˆv-modelã€éªŒè¯ï¼‰
- VCardï¼ˆæ’æ§½ï¼‰

// æµ‹è¯•
- å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡>70%ï¼‰
- åŸºç¡€é›†æˆæµ‹è¯•
```

#### âŒ ä¸åŒ…å«åŠŸèƒ½
```typescript
// å»¶ååˆ°v0.2.0+
- è¡¨è¾¾å¼å¼•æ“ï¼ˆ$state.countï¼‰
- å®‰å…¨æ²™ç®±ï¼ˆäº”å±‚é˜²æŠ¤ï¼‰
- computed/watchï¼ˆé«˜çº§å“åº”å¼ï¼‰
- æ¡ä»¶æ¸²æŸ“ï¼ˆv-ifï¼‰
- åˆ—è¡¨æ¸²æŸ“ï¼ˆv-forï¼‰
- Reacté€‚é…
- CLIå·¥å…·
- è™šæ‹Ÿæ»šåŠ¨
```

---

### 3.2 Week 1ï¼šTokenç³»ç»Ÿ + å“åº”å¼å¼•æ“ï¼ˆDay 1-7ï¼‰

#### Day 1-2ï¼šé¡¹ç›®ç»“æ„ + Tokenç³»ç»Ÿ

**åˆ›å»ºæ ¸å¿ƒæ–‡ä»¶**ï¼š
```bash
# Tokenç³»ç»Ÿ
packages/core/src/token/
â”œâ”€â”€ types.ts           # Tokenç±»å‹å®šä¹‰
â”œâ”€â”€ simple-compiler.ts # ç®€åŒ–ç‰ˆç¼–è¯‘å™¨
â””â”€â”€ index.ts

# æµ‹è¯•æ–‡ä»¶
packages/core/test/unit/token/
â””â”€â”€ compiler.test.ts
```

**Tokenç¼–è¯‘å™¨å®ç°**ï¼š
```typescript
// packages/core/src/token/simple-compiler.ts
export interface SimpleToken {
  [key: string]: string | number
}

export class SimpleTokenCompiler {
  compile(tokens: SimpleToken): string {
    const lines: string[] = [':root {']
    
    for (const [key, value] of Object.entries(tokens)) {
      lines.push(`  --vjs-${key.replace(/\./g, '-')}: ${value};`)
    }
    
    lines.push('}')
    return lines.join('\n')
  }
}
```

**Day 1-2 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºTokenç±»å‹å®šä¹‰
- [ ] å®ç°SimpleTokenCompiler
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆ5ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡>80%
- [ ] åˆ›å»ºé»˜è®¤ä¸»é¢˜JSON

---

#### Day 3-5ï¼šå“åº”å¼ç³»ç»Ÿæ ¸å¿ƒ

**åˆ›å»ºå“åº”å¼æ–‡ä»¶**ï¼š
```bash
packages/core/src/reactive/
â”œâ”€â”€ reactive.ts  # reactiveå®ç°
â”œâ”€â”€ effect.ts    # effectå®ç°
â”œâ”€â”€ ref.ts       # refå®ç°
â””â”€â”€ index.ts
```

**å“åº”å¼æ ¸å¿ƒå®ç°**ï¼š
```typescript
// packages/core/src/reactive/reactive.ts
let activeEffect: Function | undefined

export function effect(fn: Function): Function {
  const effectFn = () => {
    activeEffect = effectFn
    fn()
    activeEffect = undefined
  }
  effectFn()
  return effectFn
}

export function reactive<T extends object>(target: T): T {
  const deps = new Map<string, Set<Function>>()
  
  return new Proxy(target, {
    get(target, key) {
      // ä¾èµ–æ”¶é›†
      if (activeEffect) {
        if (!deps.has(key as string)) {
          deps.set(key as string, new Set())
        }
        deps.get(key as string)!.add(activeEffect)
      }
      return Reflect.get(target, key)
    },
    
    set(target, key, value) {
      const result = Reflect.set(target, key, value)
      // è§¦å‘æ›´æ–°
      const effects = deps.get(key as string)
      if (effects) {
        effects.forEach(effect => effect())
      }
      return result
    }
  })
}

export function ref<T>(value: T) {
  const wrapper = { value }
  return reactive(wrapper)
}
```

**Day 3-5 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°reactive()
- [ ] å®ç°effect()
- [ ] å®ç°ref()
- [ ] å¤„ç†åµŒå¥—å¯¹è±¡
- [ ] å¤„ç†æ•°ç»„æ“ä½œ
- [ ] ç¼–å†™15+æµ‹è¯•ç”¨ä¾‹
- [ ] æµ‹è¯•è¦†ç›–ç‡>90%

---

#### Day 6-7ï¼šæ€§èƒ½æµ‹è¯• + æ–‡æ¡£

**æ€§èƒ½åŸºå‡†**ï¼š
```typescript
// packages/core/test/benchmarks/week1.bench.ts
import { bench } from 'vitest'

bench('create reactive object', () => {
  reactive({ count: 0 })
})

bench('reactive get', () => {
  const obj = reactive({ count: 0 })
  effect(() => obj.count)
})

bench('reactive set', () => {
  const obj = reactive({ count: 0 })
  obj.count = 1
})
```

**Day 6-7 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] reactiveåˆ›å»º < 1ms
- [ ] ä¾èµ–æ”¶é›† < 0.5ms
- [ ] è§¦å‘æ›´æ–° < 0.5ms
- [ ] ç¼–å†™Week 1æ€»ç»“æ–‡æ¡£
- [ ] ä»£ç review
- [ ] æäº¤Week 1ä»£ç 

**Week 1 éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] Tokenç³»ç»Ÿå¯ç”¨
- [ ] å“åº”å¼ç³»ç»Ÿå¯ç”¨
- [ ] æµ‹è¯•è¦†ç›–ç‡>70%
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] ä»£ç å·²æäº¤

---

### 3.3 Week 2ï¼šDSLè§£æå™¨ + Vueæ¸²æŸ“å™¨ï¼ˆDay 8-14ï¼‰

#### Day 8-10ï¼šDSLè§£æå™¨

**åˆ›å»ºDSLæ–‡ä»¶**ï¼š
```bash
packages/core/src/dsl/
â”œâ”€â”€ types.ts          # DSLç±»å‹å®šä¹‰
â”œâ”€â”€ simple-parser.ts  # ç®€å•è§£æå™¨
â””â”€â”€ index.ts
```

**DSLè§£æå™¨å®ç°**ï¼š
```typescript
// packages/core/src/dsl/simple-parser.ts
export interface SimpleDSL {
  type: string
  props?: Record<string, any>
  style?: Record<string, string>
  children?: SimpleDSL[]
}

export interface SimpleVNode {
  type: string
  props: Record<string, any>
  style: Record<string, string>
  children: SimpleVNode[]
}

export class SimpleParser {
  parse(dsl: SimpleDSL): SimpleVNode {
    return {
      type: dsl.type,
      props: dsl.props || {},
      style: dsl.style || {},
      children: (dsl.children || []).map(child => this.parse(child))
    }
  }
  
  validate(dsl: SimpleDSL): boolean {
    if (!dsl.type || typeof dsl.type !== 'string') {
      throw new Error('DSLå¿…é¡»æœ‰typeå­—æ®µ')
    }
    return true
  }
}
```

**Day 8-10 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®šä¹‰DSLç±»å‹
- [ ] å®šä¹‰VNodeç±»å‹
- [ ] å®ç°SimpleParser
- [ ] å®ç°validateéªŒè¯
- [ ] æ”¯æŒåµŒå¥—children
- [ ] ç¼–å†™10+æµ‹è¯•ç”¨ä¾‹
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%

---

#### Day 11-14ï¼šVueæ¸²æŸ“å™¨

**åˆ›å»ºVueé€‚é…å™¨**ï¼š
```bash
packages/vue/src/adapter/
â”œâ”€â”€ simple-renderer.ts  # Vueæ¸²æŸ“å™¨
â””â”€â”€ index.ts

packages/vue/src/composables/
â”œâ”€â”€ useCore.ts
â””â”€â”€ index.ts
```

**Vueæ¸²æŸ“å™¨å®ç°**ï¼š
```typescript
// packages/vue/src/adapter/simple-renderer.ts
import { h, createApp } from 'vue'
import type { SimpleVNode } from '@vjs-ui/core'

export class SimpleVueRenderer {
  private componentMap = new Map<string, any>()
  
  registerComponent(name: string, component: any): void {
    this.componentMap.set(name, component)
  }
  
  render(vnode: SimpleVNode): any {
    const component = this.componentMap.get(vnode.type)
    
    if (!component) {
      console.warn(`Component not found: ${vnode.type}`)
      return h('div', `[${vnode.type}]`)
    }
    
    const children = vnode.children.map(child => this.render(child))
    
    return h(component, {
      ...vnode.props,
      style: vnode.style
    }, children.length > 0 ? children : undefined)
  }
  
  mount(vnode: SimpleVNode, container: Element): void {
    const app = createApp({
      render: () => this.render(vnode)
    })
    app.mount(container)
  }
}
```

**Day 11-14 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°SimpleVueRenderer
- [ ] å®ç°registerComponent
- [ ] å®ç°renderæ–¹æ³•
- [ ] å®ç°mountæ–¹æ³•
- [ ] åˆ›å»ºuseCoreç»„åˆå¼å‡½æ•°
- [ ] ç¼–å†™é›†æˆæµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡>80%

**Week 2 éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] DSLå¯ä»¥æ­£ç¡®è§£æ
- [ ] Vueæ¸²æŸ“å™¨å¯ç”¨
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡>75%
- [ ] ä»£ç å·²æäº¤

---

### 3.4 Week 3ï¼š3ä¸ªåŸºç¡€ç»„ä»¶ï¼ˆDay 15-21ï¼‰

#### Day 15-17ï¼šVButtonç»„ä»¶

**ç»„ä»¶æ–‡ä»¶**ï¼š
```bash
packages/vue/src/components/Button/
â”œâ”€â”€ Button.vue
â”œâ”€â”€ types.ts
â””â”€â”€ index.ts
```

**VButtonå®ç°**ï¼š
```vue
<!-- packages/vue/src/components/Button/Button.vue -->
<template>
  <button
    :class="['vjs-button', `vjs-button--${type}`]"
    :disabled="disabled"
    @click="$emit('click', $event)"
  >
    <slot>{{ text }}</slot>
  </button>
</template>

<script setup lang="ts">
defineOptions({ name: 'VButton' })

interface Props {
  type?: 'default' | 'primary'
  text?: string
  disabled?: boolean
}

withDefaults(defineProps<Props>(), {
  type: 'default',
  disabled: false
})

defineEmits<{
  click: [event: MouseEvent]
}>()
</script>

<style scoped>
.vjs-button {
  padding: var(--vjs-spacing-md);
  border: 1px solid var(--vjs-color-border);
  border-radius: var(--vjs-radius-md);
  background: var(--vjs-color-bg);
  cursor: pointer;
}

.vjs-button--primary {
  background: var(--vjs-color-primary);
  color: white;
  border-color: var(--vjs-color-primary);
}

.vjs-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
</style>
```

**Day 15-17 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºVButtonç»„ä»¶
- [ ] æ”¯æŒtypeå±æ€§
- [ ] æ”¯æŒdisabledçŠ¶æ€
- [ ] æ”¯æŒclickäº‹ä»¶
- [ ] æ”¯æŒé»˜è®¤æ’æ§½
- [ ] ç¼–å†™ç»„ä»¶æµ‹è¯•ï¼ˆ10+ç”¨ä¾‹ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%

---

#### Day 18-19ï¼šVInputç»„ä»¶

**VInputå®ç°**ï¼š
```vue
<!-- packages/vue/src/components/Input/Input.vue -->
<template>
  <input
    :class="['vjs-input']"
    :type="type"
    :value="modelValue"
    :placeholder="placeholder"
    :disabled="disabled"
    @input="handleInput"
  />
</template>

<script setup lang="ts">
defineOptions({ name: 'VInput' })

interface Props {
  modelValue?: string | number
  type?: string
  placeholder?: string
  disabled?: boolean
}

withDefaults(defineProps<Props>(), {
  type: 'text',
  disabled: false
})

const emit = defineEmits<{
  'update:modelValue': [value: string]
}>()

const handleInput = (event: Event) => {
  const target = event.target as HTMLInputElement
  emit('update:modelValue', target.value)
}
</script>

<style scoped>
.vjs-input {
  padding: var(--vjs-spacing-sm);
  border: 1px solid var(--vjs-color-border);
  border-radius: var(--vjs-radius-md);
  width: 100%;
}

.vjs-input:focus {
  outline: none;
  border-color: var(--vjs-color-primary);
}

.vjs-input:disabled {
  background: var(--vjs-color-bg-disabled);
  cursor: not-allowed;
}
</style>
```

**Day 18-19 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºVInputç»„ä»¶
- [ ] æ”¯æŒv-model
- [ ] æ”¯æŒtypeå±æ€§
- [ ] æ”¯æŒplaceholder
- [ ] æ”¯æŒdisabledçŠ¶æ€
- [ ] ç¼–å†™ç»„ä»¶æµ‹è¯•ï¼ˆ8+ç”¨ä¾‹ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%

---

#### Day 20-21ï¼šVCardç»„ä»¶

**VCardå®ç°**ï¼š
```vue
<!-- packages/vue/src/components/Card/Card.vue -->
<template>
  <div class="vjs-card">
    <div v-if="$slots.header" class="vjs-card__header">
      <slot name="header" />
    </div>
    
    <div class="vjs-card__body">
      <slot />
    </div>
    
    <div v-if="$slots.footer" class="vjs-card__footer">
      <slot name="footer" />
    </div>
  </div>
</template>

<script setup lang="ts">
defineOptions({ name: 'VCard' })
</script>

<style scoped>
.vjs-card {
  border: 1px solid var(--vjs-color-border);
  border-radius: var(--vjs-radius-md);
  background: var(--vjs-color-bg);
  box-shadow: var(--vjs-shadow-sm);
  overflow: hidden;
}

.vjs-card__header {
  padding: var(--vjs-spacing-md);
  border-bottom: 1px solid var(--vjs-color-border);
  font-weight: 600;
}

.vjs-card__body {
  padding: var(--vjs-spacing-md);
}

.vjs-card__footer {
  padding: var(--vjs-spacing-md);
  border-top: 1px solid var(--vjs-color-border);
}
</style>
```

**Day 20-21 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºVCardç»„ä»¶
- [ ] æ”¯æŒheaderæ’æ§½
- [ ] æ”¯æŒé»˜è®¤æ’æ§½
- [ ] æ”¯æŒfooteræ’æ§½
- [ ] ç¼–å†™ç»„ä»¶æµ‹è¯•ï¼ˆ6+ç”¨ä¾‹ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%

**Week 3 éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] 3ä¸ªç»„ä»¶å…¨éƒ¨å®Œæˆ
- [ ] ç»„ä»¶å¯ç‹¬ç«‹ä½¿ç”¨
- [ ] ç»„ä»¶å¯é€šè¿‡DSLæ¸²æŸ“
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%
- [ ] ä»£ç å·²æäº¤

---

### 3.5 Week 4ï¼šé›†æˆæµ‹è¯• + æ–‡æ¡£ + å‘å¸ƒï¼ˆDay 22-28ï¼‰

#### Day 22-24ï¼šé›†æˆæµ‹è¯•

**å®Œæ•´æµç¨‹æµ‹è¯•**ï¼š
```typescript
// packages/vue/test/integration/mvp.test.ts
import { describe, it, expect } from 'vitest'
import { SimpleParser, SimpleTokenCompiler, reactive } from '@vjs-ui/core'
import { SimpleVueRenderer } from '@vjs-ui/vue'
import { VButton, VInput, VCard } from '@vjs-ui/vue'

describe('MVP Integration', () => {
  it('should render DSL with Vue', () => {
    const dsl = {
      type: 'Button',
      props: { text: 'Click Me' }
    }
    
    const parser = new SimpleParser()
    const renderer = new SimpleVueRenderer()
    renderer.registerComponent('Button', VButton)
    
    const vnode = parser.parse(dsl)
    const container = document.createElement('div')
    renderer.mount(vnode, container)
    
    expect(container.querySelector('.vjs-button')).toBeTruthy()
    expect(container.textContent).toContain('Click Me')
  })
  
  it('should work with reactive state', async () => {
    const state = reactive({ count: 0 })
    
    // æµ‹è¯•çŠ¶æ€æ›´æ–°
    expect(state.count).toBe(0)
    state.count++
    expect(state.count).toBe(1)
  })
  
  it('should render nested components', () => {
    const dsl = {
      type: 'Card',
      children: [
        {
          type: 'Button',
          props: { text: 'Submit' }
        }
      ]
    }
    
    const parser = new SimpleParser()
    const renderer = new SimpleVueRenderer()
    renderer.registerComponent('Card', VCard)
    renderer.registerComponent('Button', VButton)
    
    const vnode = parser.parse(dsl)
    const container = document.createElement('div')
    renderer.mount(vnode, container)
    
    expect(container.querySelector('.vjs-card')).toBeTruthy()
    expect(container.querySelector('.vjs-button')).toBeTruthy()
  })
})
```

**Day 22-24 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] ç¼–å†™å®Œæ•´æµç¨‹é›†æˆæµ‹è¯•
- [ ] Token + DSL + Vueé›†æˆæµ‹è¯•
- [ ] å“åº”å¼ + ç»„ä»¶é›†æˆæµ‹è¯•
- [ ] 3ä¸ªç»„ä»¶äº’ç›¸åµŒå¥—æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡>70%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Day 25-26ï¼šç¤ºä¾‹åº”ç”¨

**åˆ›å»ºMVP Demo**ï¼š
```vue
<!-- examples/mvp-demo/src/App.vue -->
<template>
  <div class="demo">
    <VCard>
      <template #header>
        <h2>VJS-UI MVP Demo</h2>
      </template>
      
      <div class="demo-content">
        <VInput 
          v-model="name" 
          placeholder="Enter your name" 
        />
        
        <VButton 
          type="primary" 
          @click="handleClick"
        >
          Hello, {{ name || 'World' }}!
        </VButton>
        
        <p>Clicked {{ count }} times</p>
      </div>
    </VCard>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { VButton, VInput, VCard } from '@vjs-ui/vue'

const name = ref('')
const count = ref(0)

const handleClick = () => {
  count.value++
  alert(`Hello, ${name.value || 'World'}!`)
}
</script>

<style scoped>
.demo {
  max-width: 600px;
  margin: 50px auto;
}

.demo-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
</style>
```

**Day 25-26 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºMVPç¤ºä¾‹åº”ç”¨
- [ ] å±•ç¤º3ä¸ªç»„ä»¶ä½¿ç”¨
- [ ] å±•ç¤ºå“åº”å¼çŠ¶æ€
- [ ] å±•ç¤ºDSLæ¸²æŸ“ï¼ˆå¯é€‰ï¼‰
- [ ] åº”ç”¨å¯æ­£å¸¸è¿è¡Œ
- [ ] æˆªå›¾ä¿å­˜

---

#### Day 27-28ï¼šæ–‡æ¡£ + å‘å¸ƒ

**ç¼–å†™æ–‡æ¡£**ï¼š
```markdown
# VJS-UI v0.1.0 (MVP)

## å¿«é€Ÿå¼€å§‹

\`\`\`bash
pnpm add @vjs-ui/vue
\`\`\`

## åŸºç¡€ç”¨æ³•

\`\`\`vue
<template>
  <VButton type="primary" @click="handleClick">
    Click Me
  </VButton>
</template>

<script setup>
import { VButton } from '@vjs-ui/vue'

const handleClick = () => {
  console.log('clicked')
}
</script>
\`\`\`

## å½“å‰åŠŸèƒ½

- âœ… 3ä¸ªåŸºç¡€ç»„ä»¶ï¼ˆButton, Input, Cardï¼‰
- âœ… ç®€å•DSLæ”¯æŒ
- âœ… åŸºç¡€å“åº”å¼ç³»ç»Ÿ
- âœ… Tokenç³»ç»Ÿ

## å³å°†æ¨å‡ºï¼ˆv0.2.0ï¼‰

- è¡¨è¾¾å¼æ”¯æŒ
- Dialogå’ŒTableç»„ä»¶
- æ›´å¤šä¸»é¢˜
```

**å‘å¸ƒæµç¨‹**ï¼š
```bash
# 1. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
pnpm test

# 2. åˆ›å»ºchangeset
pnpm changeset
# é€‰æ‹©: minor (æ–°åŠŸèƒ½)
# åŒ…: @vjs-ui/core, @vjs-ui/vue
# æè¿°: feat: MVP release

# 3. æ›´æ–°ç‰ˆæœ¬å·
pnpm changeset version

# 4. æ„å»º
pnpm build

# 5. æäº¤
git add .
git commit -m "chore: release v0.1.0"
git tag v0.1.0

# 6. å‘å¸ƒ
pnpm changeset publish

# 7. æ¨é€
git push origin main --tags
```

**Day 27-28 ä»»åŠ¡æ¸…å•**ï¼š
- [ ] ç¼–å†™å¿«é€Ÿå¼€å§‹æ–‡æ¡£
- [ ] ç¼–å†™APIæ–‡æ¡£
- [ ] ç¼–å†™ä½¿ç”¨ç¤ºä¾‹
- [ ] æ›´æ–°CHANGELOG
- [ ] åˆ›å»ºGitHub Release
- [ ] å‘å¸ƒåˆ°npm
- [ ] éªŒè¯å‘å¸ƒæˆåŠŸ

**Week 4 éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] é›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] ç¤ºä¾‹åº”ç”¨å¯è¿è¡Œ
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] v0.1.0æˆåŠŸå‘å¸ƒ
- [ ] npmåŒ…å¯å®‰è£…ä½¿ç”¨

---

### 3.6 MVPæ€»ä½“éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶
```
âœ“ 3ä¸ªç»„ä»¶å¯æ­£å¸¸ä½¿ç”¨
âœ“ DSLå¯ä»¥æ¸²æŸ“åŸºç¡€ç»„ä»¶
âœ“ å“åº”å¼çŠ¶æ€æ›´æ–°æ­£å¸¸
âœ“ Tokenç³»ç»Ÿå·¥ä½œæ­£å¸¸
```

#### è´¨é‡éªŒæ”¶
```
âœ“ æµ‹è¯•è¦†ç›–ç‡>70%
  - Coreæ¨¡å—: >75%
  - Vueæ¨¡å—: >70%
âœ“ æ— ä¸¥é‡bug
âœ“ ä»£ç è§„èŒƒæ£€æŸ¥é€šè¿‡
âœ“ TypeScriptç±»å‹å®Œæ•´
```

#### æ€§èƒ½éªŒæ”¶
```
âœ“ æ ¸å¿ƒåŒ…<30KB (gzipped)
âœ“ ç»„ä»¶æ¸²æŸ“<50ms
âœ“ å“åº”å¼æ›´æ–°<2ms
```

#### æ–‡æ¡£éªŒæ”¶
```
âœ“ READMEå®Œæ•´
âœ“ å¿«é€Ÿå¼€å§‹æŒ‡å—
âœ“ APIæ–‡æ¡£
âœ“ ä½¿ç”¨ç¤ºä¾‹
âœ“ CHANGELOG
```

#### å‘å¸ƒéªŒæ”¶
```
âœ“ npmåŒ…æˆåŠŸå‘å¸ƒ
âœ“ ç‰ˆæœ¬å·æ­£ç¡®ï¼ˆv0.1.0ï¼‰
âœ“ GitHub Releaseåˆ›å»º
âœ“ ç¤ºä¾‹å¯è¿è¡Œ
```

---

**MVPæˆåŠŸæ ‡å¿—**ï¼š
- ğŸ‰ v0.1.0æˆåŠŸå‘å¸ƒåˆ°npm
- ğŸ‰ å›¢é˜Ÿæˆå‘˜å¯å®‰è£…ä½¿ç”¨
- ğŸ‰ ç¤ºä¾‹åº”ç”¨å¯æ­£å¸¸è¿è¡Œ
- ğŸ‰ æŠ€æœ¯æ–¹æ¡ˆå¾—åˆ°éªŒè¯
- ğŸ‰ ä¸ºv0.2.0æ‰“ä¸‹åŸºç¡€

---

## ğŸ”¬ é˜¶æ®µ4ï¼šCoreå¼•æ“å®Œå–„é˜¶æ®µï¼ˆ6-8å‘¨ï¼‰

> **é‡è¦æ€§**: ğŸ”´ é¡¹ç›®æ ¸å¿ƒé˜¶æ®µ  
> **é£é™©**: é«˜ï¼ˆå®‰å…¨æ€§ã€æ€§èƒ½ï¼‰  
> **æµ‹è¯•è¦æ±‚**: Coreâ‰¥90%, å®‰å…¨100%

> **ğŸ“‹ è¯¦ç»†æ–‡æ¡£å·²åˆ†ç¦»**ï¼š  
> ç”±äºå†…å®¹éå¸¸è¯¦ç»†ï¼ˆåŒ…å«å¤§é‡ä»£ç å’Œæµ‹è¯•ç”¨ä¾‹ï¼‰ï¼Œå·²åˆ†ä¸º3ä¸ªç‹¬ç«‹æ–‡æ¡£ï¼š
> - [ğŸ“„ Part 1: Week 1-2](./00-IMPLEMENTATION-GUIDE-PHASE4-PART1.md) - Token + å“åº”å¼ + è¡¨è¾¾å¼ + å®‰å…¨ âœ…
> - [ğŸ“„ Part 2: Week 3-4](./00-IMPLEMENTATION-GUIDE-PHASE4-PART2.md) - Binder + Coreé›†æˆ âœ…
> - [ğŸ“„ Part 3: Week 5-8](./00-IMPLEMENTATION-GUIDE-PHASE4-PART3.md) - æµ‹è¯• + ä¼˜åŒ– + å‘å¸ƒ âœ…

---

### 4.1 é˜¶æ®µæ€»è§ˆ

**ä¸ºä»€ä¹ˆè¿™ä¸ªé˜¶æ®µæœ€é‡è¦ï¼Ÿ**
1. ä»MVPç®€åŒ–ç‰ˆå‡çº§åˆ°**ç”Ÿäº§çº§åˆ«**
2. å®ç°**å®Œæ•´è¡¨è¾¾å¼ç³»ç»Ÿ**ï¼ˆDSLçš„æ ¸å¿ƒèƒ½åŠ›ï¼‰
3. å®ç°**äº”å±‚å®‰å…¨é˜²æŠ¤**ğŸ”´ï¼ˆå¿…é¡»100%æµ‹è¯•ï¼‰
4. ä¸ºVueé€‚é…å’Œç»„ä»¶å¼€å‘æ‰“ä¸‹åšå®åŸºç¡€

**6-8å‘¨æ—¶é—´åˆ†é…**ï¼š
- **Week 1**: Tokenç³»ç»Ÿå®Œæ•´ç‰ˆ + å“åº”å¼å®Œæ•´ç‰ˆï¼ˆcomputed/watchï¼‰
- **Week 2**: DSLå®Œæ•´ç‰ˆ + è¡¨è¾¾å¼å¼•æ“ + äº”å±‚å®‰å…¨æ²™ç®± ğŸ”´
- **Week 3**: Binderï¼ˆæ•°æ®ç»‘å®šå™¨ï¼‰+ Coreå¼•æ“é›†æˆ
- **Week 4-5**: å®Œå–„æµ‹è¯•ï¼ˆè¦†ç›–ç‡>90%ï¼‰+ æ€§èƒ½ä¼˜åŒ–
- **Week 6-7**: æ–‡æ¡£å®Œå–„ + ä»£ç å®¡æŸ¥
- **Week 8**: å‘å¸ƒv0.2.0 + æ€»ç»“

---

### ğŸ“„ 4-1. Week 1ï¼šå®Œæ•´Token + å“åº”å¼ç³»ç»Ÿ

**æ–‡æ¡£**: [01-PHASE-1-CORE.md](./01-PHASE-1-CORE.md) + [è¯¦ç»†Part 1](./00-IMPLEMENTATION-GUIDE-PHASE4-PART1.md)  
**ç”¨æ—¶**: 1å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æœ¬å‘¨ç›®æ ‡**ï¼š
- å®Œæ•´Tokenç³»ç»Ÿï¼ˆåŠ¨æ€åˆ‡æ¢ã€å¼•ç”¨ã€alphaã€å¾ªç¯æ£€æµ‹ï¼‰
- å®Œæ•´å“åº”å¼ç³»ç»Ÿï¼ˆcomputed + watch + effectStackï¼‰
- æµ‹è¯•è¦†ç›–ç‡>90%

**å…³é”®ä»»åŠ¡**ï¼š
- Day 1-3: Tokenç³»ç»Ÿï¼ˆ20+æµ‹è¯•ç”¨ä¾‹ï¼‰
- Day 4-7: å“åº”å¼ç³»ç»Ÿï¼ˆ30+æµ‹è¯•ç”¨ä¾‹ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] 50+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] TokenåŠ¨æ€åˆ‡æ¢æ­£å¸¸
- [ ] computedç¼“å­˜æœºåˆ¶æ­£ç¡®
- [ ] watchç›‘å¬æ­£ç¡®
- [ ] æ— å†…å­˜æ³„æ¼

---

### ğŸ“„ 4-2. Week 2ï¼šè¡¨è¾¾å¼ + å®‰å…¨æ²™ç®± ğŸ”´

**æ–‡æ¡£**: [01-PHASE-1-CORE-WEEK2.md](./01-PHASE-1-CORE-WEEK2.md) + [è¯¦ç»†Part 1](./00-IMPLEMENTATION-GUIDE-PHASE4-PART1.md)  
**ç”¨æ—¶**: 1å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜ï¼ˆå®‰å…¨å…³é”®ï¼‰

**æœ¬å‘¨ç›®æ ‡**ï¼š
- å®Œæ•´DSLè§£æå™¨ï¼ˆif/for/slots/eventsï¼‰
- è¡¨è¾¾å¼å¼•æ“ï¼ˆjsep + ASTæ±‚å€¼ï¼‰
- **äº”å±‚å®‰å…¨é˜²æŠ¤**ï¼ˆ100%æµ‹è¯•è¦†ç›–ï¼‰

**äº”å±‚å®‰å…¨é˜²æŠ¤**ï¼š
1. è¡¨è¾¾å¼é™æ€åˆ†æï¼ˆå±é™©æ¨¡å¼æ£€æµ‹ï¼‰
2. ASTç™½åå•éªŒè¯ï¼ˆä»…å…è®¸å®‰å…¨èŠ‚ç‚¹ï¼‰
3. å®‰å…¨ä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆçº¯å‡€å¯¹è±¡ï¼‰
4. èµ„æºé™åˆ¶ï¼ˆè¶…æ—¶ã€æ“ä½œæ¬¡æ•°ï¼‰
5. å®Œæ•´å®‰å…¨æ±‚å€¼å™¨ï¼ˆé›†æˆæ‰€æœ‰é˜²æŠ¤ï¼‰

**å…³é”®ä»»åŠ¡**ï¼š
- Day 8-9: DSLè§£æå™¨ï¼ˆ20+æµ‹è¯•ï¼‰
- Day 10-12: è¡¨è¾¾å¼+å®‰å…¨ï¼ˆ50+æµ‹è¯•ï¼‰ğŸ”´
- Day 13-14: é›†æˆæµ‹è¯•ï¼ˆ30+æµ‹è¯•ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] 100+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] å®‰å…¨æµ‹è¯•100%è¦†ç›–
- [ ] æ‰€æœ‰å±é™©æ“ä½œè¢«é˜»æ­¢
- [ ] æ€§èƒ½æŸè€—<10%

---

### ğŸ“„ 4-3. Week 3-4+ï¼šBinder + é›†æˆ + ä¼˜åŒ–

**æ–‡æ¡£**: 
- [è¯¦ç»†Part 2](./00-IMPLEMENTATION-GUIDE-PHASE4-PART2.md) - Week 3-4 âœ…
- [è¯¦ç»†Part 3](./00-IMPLEMENTATION-GUIDE-PHASE4-PART3.md) - Week 5-8 âœ…

**ç”¨æ—¶**: 5-6å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**Week 3ç›®æ ‡**: Binder + Coreé›†æˆï¼ˆPart 2ï¼‰  
**Week 4-5ç›®æ ‡**: å®Œå–„æµ‹è¯• + æ€§èƒ½ä¼˜åŒ–ï¼ˆPart 3ï¼‰  
**Week 6-7ç›®æ ‡**: æ–‡æ¡£ + å®¡æŸ¥ï¼ˆPart 3ï¼‰  
**Week 8ç›®æ ‡**: å‘å¸ƒv0.2.0ï¼ˆPart 3ï¼‰

**è¯¦ç»†å†…å®¹**: 
- Part 2åŒ…å«Binderå®ç°å’ŒCoreå¼•æ“é›†æˆï¼ˆ485è¡Œï¼Œ70+æµ‹è¯•ï¼‰
- Part 3åŒ…å«æµ‹è¯•å®Œå–„ã€æ€§èƒ½ä¼˜åŒ–ã€æ–‡æ¡£å’Œå‘å¸ƒæµç¨‹ï¼ˆ549è¡Œï¼‰

---

**é˜¶æ®µ4å®Œæˆæ ‡å¿—**ï¼š
- ğŸ‰ Coreå¼•æ“ç”Ÿäº§å°±ç»ª
- ğŸ‰ å®‰å…¨å®¡è®¡å…¨éƒ¨é€šè¿‡
- ğŸ‰ æ€§èƒ½è¾¾åˆ°ç›®æ ‡
- ğŸ‰ æµ‹è¯•è¦†ç›–ç‡>90%
- ğŸ‰ v0.2.0æˆåŠŸå‘å¸ƒ

---

## ğŸ¨ é˜¶æ®µ5ï¼šVueé€‚é…å±‚é˜¶æ®µï¼ˆ6å‘¨ï¼‰

> **é‡è¦æ€§**: ğŸ”´ ç¬¬ä¸€ä¸ªæ¡†æ¶é€‚é…  
> **é£é™©**: ä¸­ï¼ˆAPIè®¾è®¡ã€ç»„ä»¶è´¨é‡ï¼‰  
> **æµ‹è¯•è¦æ±‚**: Vueæ¨¡å—â‰¥85%, ç»„ä»¶â‰¥85%

> **ğŸ“‹ è¯¦ç»†æ–‡æ¡£å·²åˆ†ç¦»**ï¼š  
> ç”±äºå†…å®¹éå¸¸è¯¦ç»†ï¼ˆ10ä¸ªç»„ä»¶+å®Œæ•´æµ‹è¯•ï¼‰ï¼Œå·²åˆ†ä¸º2ä¸ªç‹¬ç«‹æ–‡æ¡£ï¼š
> - [ğŸ“„ Part 1: Week 1-3](./00-IMPLEMENTATION-GUIDE-PHASE5-PART1.md) - æ¸²æŸ“å™¨ + å‰6ä¸ªç»„ä»¶ âœ…
> - [ğŸ“„ Part 2: Week 4-6](./00-IMPLEMENTATION-GUIDE-PHASE5-PART2.md) - å4ä¸ªç»„ä»¶ + æµ‹è¯• + å‘å¸ƒ âœ…

---

### 5.1 é˜¶æ®µæ€»è§ˆ

**ä¸ºä»€ä¹ˆè¿™ä¸ªé˜¶æ®µé‡è¦ï¼Ÿ**
1. ç¬¬ä¸€ä¸ªå®Œæ•´çš„**æ¡†æ¶é€‚é…**éªŒè¯
2. 10ä¸ªæ ¸å¿ƒç»„ä»¶ä¸ºåç»­æ‰“ä¸‹åŸºç¡€
3. å»ºç«‹ç»„ä»¶å¼€å‘è§„èŒƒå’Œæ¨¡å¼
4. ä¸ºReacté€‚é…æä¾›å‚è€ƒ

**6å‘¨æ—¶é—´åˆ†é…**ï¼š
- **Week 1**: Vueæ¸²æŸ“å™¨ + ç»„åˆå¼å‡½æ•° + ç»„ä»¶åŸºç¡€
- **Week 2**: åŸºç¡€ç»„ä»¶ï¼ˆButtonã€Inputã€Cardï¼‰
- **Week 3**: è¡¨å•ç»„ä»¶ï¼ˆSelectã€Checkboxã€Radioï¼‰
- **Week 4**: å¤æ‚ç»„ä»¶ï¼ˆDialogã€Tableï¼‰
- **Week 5**: é«˜çº§ç»„ä»¶ï¼ˆFormã€DatePickerï¼‰
- **Week 6**: å®Œå–„æµ‹è¯• + æ–‡æ¡£ + å‘å¸ƒv0.5.0

---

### ğŸ“„ 5-1. Week 1ï¼šVueæ¸²æŸ“å™¨ + åŸºç¡€è®¾æ–½

**æ–‡æ¡£**: [02-PHASE-2-VUE.md](./02-PHASE-2-VUE.md) + [è¯¦ç»†Part 1](./00-IMPLEMENTATION-GUIDE-PHASE5-PART1.md)  
**ç”¨æ—¶**: 1å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æœ¬å‘¨ç›®æ ‡**ï¼š
- Vueæ¸²æŸ“å™¨å®ç°ï¼ˆå®ç°Rendereræ¥å£ï¼‰
- ç»„åˆå¼å‡½æ•°ï¼ˆuseCoreã€useThemeã€useTokenï¼‰
- ç»„ä»¶åŸºç¡€è®¾æ–½ï¼ˆåŸºç±»ã€å·¥å…·å‡½æ•°ï¼‰
- æ ·å¼ç³»ç»Ÿé›†æˆ

**å…³é”®ä»»åŠ¡**ï¼š
- Day 1-3: Vueæ¸²æŸ“å™¨ï¼ˆ20+æµ‹è¯•ï¼‰
- Day 4-5: ç»„åˆå¼å‡½æ•°ï¼ˆ15+æµ‹è¯•ï¼‰
- Day 6-7: ç»„ä»¶åŸºç¡€è®¾æ–½

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] Vueæ¸²æŸ“å™¨å®Œæ•´å®ç°
- [ ] DSLå¯æ¸²æŸ“ä¸ºVueç»„ä»¶
- [ ] ç»„åˆå¼å‡½æ•°å¯ç”¨
- [ ] 35+æµ‹è¯•é€šè¿‡

---

### ğŸ“„ 5-2. Week 2-3ï¼šå‰6ä¸ªåŸºç¡€ç»„ä»¶

**æ–‡æ¡£**: [è¯¦ç»†Part 1](./00-IMPLEMENTATION-GUIDE-PHASE5-PART1.md)  
**ç”¨æ—¶**: 2å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æœ¬å‘¨ç›®æ ‡**ï¼š
- Week 2: Buttonã€Inputã€Cardï¼ˆ3ä¸ªï¼‰
- Week 3: Selectã€Checkboxã€Radioï¼ˆ3ä¸ªï¼‰

**æ¯ä¸ªç»„ä»¶åŒ…å«**ï¼š
- Vue SFCå®ç°
- TypeScriptç±»å‹å®šä¹‰
- å•å…ƒæµ‹è¯•ï¼ˆâ‰¥10ä¸ªï¼‰
- ä½¿ç”¨æ–‡æ¡£
- ç¤ºä¾‹ä»£ç 

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] 6ä¸ªç»„ä»¶åŠŸèƒ½å®Œæ•´
- [ ] æ”¯æŒDSLæ¸²æŸ“
- [ ] æ”¯æŒä¸»é¢˜åˆ‡æ¢
- [ ] 60+æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%

---

### ğŸ“„ 5-3. Week 4-5ï¼šå4ä¸ªå¤æ‚ç»„ä»¶

**æ–‡æ¡£**: [è¯¦ç»†Part 2](./00-IMPLEMENTATION-GUIDE-PHASE5-PART2.md)  
**ç”¨æ—¶**: 2å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æœ¬å‘¨ç›®æ ‡**ï¼š
- Week 4: Dialogã€Tableï¼ˆ2ä¸ªå¤æ‚ç»„ä»¶ï¼‰
- Week 5: Formã€DatePickerï¼ˆ2ä¸ªé«˜çº§ç»„ä»¶ï¼‰

**å¤æ‚ç»„ä»¶ç‰¹ç‚¹**ï¼š
- å¤šä¸ªå­ç»„ä»¶ååŒ
- å¤æ‚çŠ¶æ€ç®¡ç†
- é«˜çº§äº¤äº’é€»è¾‘
- æ€§èƒ½è¦æ±‚é«˜

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] 4ä¸ªå¤æ‚ç»„ä»¶å®Œæ•´
- [ ] æ€§èƒ½è¾¾æ ‡ï¼ˆTableæ¸²æŸ“1000è¡Œ<500msï¼‰
- [ ] 40+æµ‹è¯•é€šè¿‡
- [ ] ä½¿ç”¨æ–‡æ¡£å®Œæ•´

---

### ğŸ“„ 5-4. Week 6ï¼šæµ‹è¯• + æ–‡æ¡£ + å‘å¸ƒ

**æ–‡æ¡£**: [è¯¦ç»†Part 2](./00-IMPLEMENTATION-GUIDE-PHASE5-PART2.md)  
**ç”¨æ—¶**: 1å‘¨  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**æœ¬å‘¨ç›®æ ‡**ï¼š
- å®Œå–„æ‰€æœ‰ç»„ä»¶æµ‹è¯•
- ç¼–å†™å®Œæ•´ä½¿ç”¨æ–‡æ¡£
- æ€§èƒ½ä¼˜åŒ–
- å‘å¸ƒv0.5.0

**å…³é”®ä»»åŠ¡**ï¼š
- Day 1-3: è¡¥å……æµ‹è¯•åˆ°>85%
- Day 4-5: æ–‡æ¡£å’Œç¤ºä¾‹
- Day 6-7: å‘å¸ƒæµç¨‹

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] v0.5.0æˆåŠŸå‘å¸ƒ

---

**é˜¶æ®µ5å®Œæˆæ ‡å¿—**ï¼š
- ğŸ‰ Vueé€‚é…å±‚å®Œæ•´
- ğŸ‰ 10ä¸ªæ ¸å¿ƒç»„ä»¶ç”Ÿäº§å°±ç»ª
- ğŸ‰ æµ‹è¯•è¦†ç›–ç‡>85%
- ğŸ‰ æ–‡æ¡£å®Œæ•´
- ğŸ‰ v0.5.0æˆåŠŸå‘å¸ƒ

---

## ğŸ› ï¸ é˜¶æ®µ6ï¼šå¼€å‘è€…å·¥å…·é˜¶æ®µï¼ˆ3-4å‘¨ï¼‰

### ğŸ“„ 6-1. å¼€å‘è€…å·¥å…·å®æ–½

**æ–‡æ¡£**: 03-PHASE-3-DEVTOOLS.mdï¼ˆå¾…åˆ›å»ºï¼‰  
**ç”¨æ—¶**: 3-4å‘¨  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**ç›®æ ‡**ï¼š
- Playgroundï¼ˆåœ¨çº¿æ¼”ç¤ºï¼‰
- CLIå·¥å…·
- æ–‡æ¡£ç«™ï¼ˆVitePressï¼‰

---

## ğŸš€ é˜¶æ®µ7ï¼šè·¨æ¡†æ¶æ‰©å±•é˜¶æ®µï¼ˆ4å‘¨ï¼‰

### ğŸ“„ 7-1. æ‰©å±•ä¼˜åŒ–å®æ–½

**æ–‡æ¡£**: 04-PHASE-4-EXTEND.mdï¼ˆå¾…åˆ›å»ºï¼‰  
**ç”¨æ—¶**: 4å‘¨  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**ç›®æ ‡**ï¼š
- Reacté€‚é…
- æ€§èƒ½ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ã€æ‰¹é‡æ›´æ–°ï¼‰
- Bundleä¼˜åŒ–

---

## ğŸ¢ é˜¶æ®µ8ï¼šä¼ä¸šçº§ç‰¹æ€§é˜¶æ®µï¼ˆæŒç»­ï¼‰

### ğŸ“„ 8-1. ä¼ä¸šçº§ç‰¹æ€§å®æ–½

**æ–‡æ¡£**: 05-PHASE-5-ENTERPRISE.mdï¼ˆå¾…åˆ›å»ºï¼‰  
**ç”¨æ—¶**: æŒç»­è¿­ä»£  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½

---

### 8.1 å®Œæ•´ç»„ä»¶åº“ï¼ˆ30+ç»„ä»¶ï¼‰

#### å¸ƒå±€ç»„ä»¶
```
âœ“ Container - å®¹å™¨ç»„ä»¶
âœ“ Row / Col - æ …æ ¼ç³»ç»Ÿ
âœ“ Space - é—´è·ç»„ä»¶
âœ“ Divider - åˆ†å‰²çº¿
âœ“ Grid - ç½‘æ ¼å¸ƒå±€
âœ“ Flex - å¼¹æ€§å¸ƒå±€
```

#### å¯¼èˆªç»„ä»¶
```
â–¡ Menu - å¯¼èˆªèœå•ï¼ˆå¤šçº§ã€æŠ˜å ï¼‰
â–¡ Breadcrumb - é¢åŒ…å±‘
â–¡ Tabs - æ ‡ç­¾é¡µï¼ˆå¯æ‹–æ‹½ã€å¯å…³é—­ï¼‰
â–¡ Pagination - åˆ†é¡µå™¨ï¼ˆè·³è½¬ã€å¿«é€Ÿè·³é¡µï¼‰
â–¡ Steps - æ­¥éª¤æ¡ï¼ˆå‚ç›´ã€æ°´å¹³ï¼‰
â–¡ Affix - å›ºé’‰
â–¡ BackTop - å›åˆ°é¡¶éƒ¨
â–¡ Anchor - é”šç‚¹
```

#### æ•°æ®å½•å…¥ï¼ˆå®Œæ•´è¡¨å•ä½“ç³»ï¼‰
```
â–¡ Form - è¡¨å•å®¹å™¨ï¼ˆåŠ¨æ€è¡¨å•ï¼‰
â–¡ FormItem - è¡¨å•é¡¹
â–¡ Checkbox - å¤šé€‰æ¡†ï¼ˆå…¨é€‰ã€åŠé€‰ï¼‰
â–¡ Radio - å•é€‰æ¡†ï¼ˆæŒ‰é’®ç»„ï¼‰
â–¡ Select - ä¸‹æ‹‰é€‰æ‹©ï¼ˆæœç´¢ã€å¤šé€‰ã€åˆ†ç»„ï¼‰
â–¡ DatePicker - æ—¥æœŸé€‰æ‹©å™¨ï¼ˆèŒƒå›´ã€å¿«æ·ï¼‰
â–¡ TimePicker - æ—¶é—´é€‰æ‹©å™¨
â–¡ Upload - æ–‡ä»¶ä¸Šä¼ ï¼ˆæ‹–æ‹½ã€é¢„è§ˆã€å¤šæ–‡ä»¶ï¼‰
â–¡ Switch - å¼€å…³
â–¡ Slider - æ»‘å—ï¼ˆèŒƒå›´ã€æ­¥é•¿ï¼‰
â–¡ Rate - è¯„åˆ†
â–¡ ColorPicker - é¢œè‰²é€‰æ‹©å™¨
â–¡ Transfer - ç©¿æ¢­æ¡†
â–¡ Cascader - çº§è”é€‰æ‹©å™¨
```

#### æ•°æ®å±•ç¤º
```
â–¡ Table - è¡¨æ ¼ï¼ˆå®Œæ•´ç‰ˆï¼šæ’åºã€ç­›é€‰ã€å›ºå®šåˆ—ï¼‰
â–¡ List - åˆ—è¡¨ï¼ˆæ— é™æ»šåŠ¨ï¼‰
â–¡ Tree - æ ‘å½¢æ§ä»¶ï¼ˆæœç´¢ã€æ‹–æ‹½ï¼‰
â–¡ TreeSelect - æ ‘å½¢é€‰æ‹©
â–¡ Timeline - æ—¶é—´è½´
â–¡ Tag - æ ‡ç­¾ï¼ˆåŠ¨æ€ã€å¯å…³é—­ï¼‰
â–¡ Badge - å¾½ç« 
â–¡ Avatar - å¤´åƒï¼ˆç»„åˆæ˜¾ç¤ºï¼‰
â–¡ Descriptions - æè¿°åˆ—è¡¨
â–¡ Empty - ç©ºçŠ¶æ€
â–¡ Statistic - ç»Ÿè®¡æ•°å€¼
â–¡ Calendar - æ—¥å†
â–¡ Card - å¡ç‰‡ï¼ˆå¯æŠ˜å ã€åŠ è½½ä¸­ï¼‰
â–¡ Collapse - æŠ˜å é¢æ¿
â–¡ Carousel - èµ°é©¬ç¯
â–¡ Image - å›¾ç‰‡ï¼ˆé¢„è§ˆã€æ‡’åŠ è½½ï¼‰
```

#### åé¦ˆç»„ä»¶
```
â–¡ Alert - è­¦å‘Šæç¤ºï¼ˆå¯å…³é—­ã€å›¾æ ‡ï¼‰
â–¡ Message - æ¶ˆæ¯æç¤ºï¼ˆå…¨å±€æ–¹æ³•ï¼‰
â–¡ Notification - é€šçŸ¥æé†’æ¡†
â–¡ Modal - æ¨¡æ€æ¡†ï¼ˆæ‹–æ‹½ã€å…¨å±ï¼‰
â–¡ Dialog - å¯¹è¯æ¡†ï¼ˆç¡®è®¤ã€è¡¨å•ï¼‰
â–¡ Drawer - æŠ½å±‰ï¼ˆå¤šå±‚ï¼‰
â–¡ Tooltip - æ–‡å­—æç¤º
â–¡ Popover - æ°”æ³¡å¡ç‰‡
â–¡ Popconfirm - æ°”æ³¡ç¡®è®¤æ¡†
â–¡ Progress - è¿›åº¦æ¡ï¼ˆç¯å½¢ã€ä»ªè¡¨ç›˜ï¼‰
â–¡ Spin - åŠ è½½ä¸­
â–¡ Skeleton - éª¨æ¶å±
â–¡ Result - ç»“æœé¡µ
```

---

### 8.2 Proä¼ä¸šç»„ä»¶ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

#### æ•°æ®å±•ç¤ºå¢å¼º
```
â–¡ DataGrid - é«˜æ€§èƒ½è¡¨æ ¼
  - è™šæ‹Ÿæ»šåŠ¨ï¼ˆç™¾ä¸‡è¡Œæ•°æ®ï¼‰
  - å›ºå®šåˆ—ã€è¡¨å¤´
  - è¡Œåˆ—åˆå¹¶
  - å¯ç¼–è¾‘å•å…ƒæ ¼
  - å¯¼å‡ºExcel
  - æ‰“å°

â–¡ ProTable - é«˜çº§è¡¨æ ¼
  - å†…ç½®å·¥å…·æ 
  - åˆ—é…ç½®ï¼ˆæ˜¾ç¤º/éšè—ï¼‰
  - æŸ¥è¯¢è¡¨å•
  - æ‰¹é‡æ“ä½œ
  - æ•°æ®æºé…ç½®

â–¡ ProList - é«˜çº§åˆ—è¡¨
  - æœç´¢ã€ç­›é€‰
  - åˆ†ç»„æ˜¾ç¤º
  - å¡ç‰‡/åˆ—è¡¨åˆ‡æ¢
```

#### ä½ä»£ç ç»„ä»¶
```
â–¡ FormBuilder - è¡¨å•ç”Ÿæˆå™¨
  - JSON Schemaé©±åŠ¨
  - æ‹–æ‹½è®¾è®¡å™¨
  - è‡ªå®šä¹‰éªŒè¯è§„åˆ™
  - è”åŠ¨é€»è¾‘
  - è¡¨å•é¢„è§ˆ

â–¡ TableBuilder - è¡¨æ ¼é…ç½®å™¨
  - å¯è§†åŒ–é…ç½®åˆ—
  - æ•°æ®æºç»‘å®š
  - æ“ä½œæŒ‰é’®é…ç½®

â–¡ PageLayout - é¡µé¢å¸ƒå±€
  - Header + Sider + Content
  - å“åº”å¼å¸ƒå±€
  - é¢åŒ…å±‘é›†æˆ
  - å¤šæ ‡ç­¾é¡µ

â–¡ Dashboard - ä»ªè¡¨ç›˜
  - å¯æ‹–æ‹½ç»„ä»¶
  - è‡ªå®šä¹‰å¸ƒå±€
  - Widgetå¸‚åœº
  - æ•°æ®å¤§å±
```

#### æ•°æ®å¯è§†åŒ–
```
â–¡ Chart - å›¾è¡¨ç»„ä»¶
  - EChartsé›†æˆ
  - AntVé›†æˆ
  - å¸¸ç”¨å›¾è¡¨å°è£…
  - å®æ—¶æ•°æ®æ›´æ–°

â–¡ ChartBuilder - å›¾è¡¨é…ç½®å™¨
  - å¯è§†åŒ–é…ç½®
  - æ•°æ®ç»‘å®š
  - ä¸»é¢˜åˆ‡æ¢
```

#### é«˜çº§ç¼–è¾‘å™¨
```
â–¡ CodeEditor - ä»£ç ç¼–è¾‘å™¨
  - Monaco Editor
  - è¯­æ³•é«˜äº®
  - ä»£ç æç¤º
  - å¤šè¯­è¨€æ”¯æŒ

â–¡ RichEditor - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
  - å·¥å…·æ é…ç½®
  - å›¾ç‰‡ä¸Šä¼ 
  - Markdownæ”¯æŒ

â–¡ JSONViewer - JSONæŸ¥çœ‹å™¨
  - æ ¼å¼åŒ–æ˜¾ç¤º
  - æŠ˜å å±•å¼€
  - æœç´¢é«˜äº®
```

#### å·¥ä½œæµç›¸å…³
```
â–¡ WorkflowDesigner - æµç¨‹å›¾è®¾è®¡å™¨
  - èŠ‚ç‚¹æ‹–æ‹½
  - è¿çº¿é…ç½®
  - æµç¨‹éªŒè¯
  - å¯¼å‡º/å¯¼å…¥

â–¡ SplitPane - åˆ†å‰²é¢æ¿
  - æ°´å¹³/å‚ç›´åˆ†å‰²
  - å¯è°ƒæ•´å¤§å°
  - åµŒå¥—æ”¯æŒ
```

---

### 8.3 ä¸»é¢˜å¸‚åœº

#### ä¸»é¢˜ç³»ç»Ÿå¢å¼º
```
â–¡ ä¸»é¢˜ç¼–è¾‘å™¨
  - å¯è§†åŒ–ç¼–è¾‘Token
  - å®æ—¶é¢„è§ˆ
  - å¯¼å‡ºä¸»é¢˜åŒ…

â–¡ ä¸»é¢˜å¸‚åœº
  - ä¸»é¢˜æµè§ˆ
  - ä¸»é¢˜ä¸‹è½½
  - ä¸»é¢˜è¯„åˆ†
  - ä¸»é¢˜åˆ†äº«

â–¡ ä¼ä¸šå®šåˆ¶
  - å“ç‰Œè‰²è‡ªåŠ¨ç”Ÿæˆ
  - ç»„ä»¶æ ·å¼å®šåˆ¶
  - å¯¼å‡ºè®¾è®¡è§„èŒƒ
```

#### é¢„è®¾ä¸»é¢˜
```
â–¡ Default - é»˜è®¤ä¸»é¢˜
â–¡ Dark - æš—è‰²ä¸»é¢˜
â–¡ Compact - ç´§å‡‘ä¸»é¢˜
â–¡ Enterprise - ä¼ä¸šä¸»é¢˜
â–¡ Material - Material Design
â–¡ Ant Design - Anté£æ ¼
â–¡ Element - Elementé£æ ¼
```

---

### 8.4 å›½é™…åŒ–ï¼ˆi18nï¼‰

#### å¤šè¯­è¨€æ”¯æŒ
```
â–¡ å†…ç½®è¯­è¨€åŒ…
  - ç®€ä½“ä¸­æ–‡
  - ç¹ä½“ä¸­æ–‡
  - è‹±è¯­
  - æ—¥è¯­
  - éŸ©è¯­
  - æ³•è¯­
  - å¾·è¯­
  - è¥¿ç­ç‰™è¯­

â–¡ i18nç³»ç»Ÿ
  - åŠ¨æ€åˆ‡æ¢è¯­è¨€
  - æ—¥æœŸæœ¬åœ°åŒ–
  - æ•°å­—æœ¬åœ°åŒ–
  - è´§å¸æ ¼å¼åŒ–

â–¡ RTLæ”¯æŒ
  - é˜¿æ‹‰ä¼¯è¯­
  - å¸Œä¼¯æ¥è¯­
  - å¸ƒå±€è‡ªåŠ¨é•œåƒ
```

---

### 8.5 æ— éšœç¢ï¼ˆa11yï¼‰

#### WCAG 2.1 AAAçº§
```
â–¡ é”®ç›˜å¯¼èˆª
  - Tabé”®å®Œæ•´æ”¯æŒ
  - å¿«æ·é”®æ”¯æŒ
  - ç„¦ç‚¹é™·é˜±ç®¡ç†

â–¡ å±å¹•é˜…è¯»å™¨
  - ARIAå®Œæ•´æ”¯æŒ
  - è¯­ä¹‰åŒ–HTML
  - åŠ¨æ€å†…å®¹é€šçŸ¥

â–¡ è§†è§‰è¾…åŠ©
  - é¢œè‰²å¯¹æ¯”åº¦â‰¥7:1
  - ç„¦ç‚¹æ ·å¼æ¸…æ™°
  - æ–‡æœ¬å¯ç¼©æ”¾è‡³200%
  - é«˜å¯¹æ¯”åº¦æ¨¡å¼

â–¡ æ— éšœç¢å·¥å…·
  - æ— éšœç¢æ£€æŸ¥å™¨
  - è‡ªåŠ¨æµ‹è¯•
  - æŠ¥å‘Šç”Ÿæˆ
```

---

### 8.6 SSR/SSGæ”¯æŒ

#### æœåŠ¡ç«¯æ¸²æŸ“
```
â–¡ Nuxté›†æˆ
  - Nuxtæ¨¡å—
  - è‡ªåŠ¨å¯¼å…¥
  - SSRä¼˜åŒ–

â–¡ Next.jsé›†æˆ
  - Next.jsæ’ä»¶
  - App Routeræ”¯æŒ
  - RSCæ”¯æŒ

â–¡ Vite SSR
  - SSRä¸­é—´ä»¶
  - é¢„æ¸²æŸ“
  - Hydrationä¼˜åŒ–
```

#### é™æ€ç”Ÿæˆ
```
â–¡ é™æ€ç«™ç‚¹ç”Ÿæˆ
  - VitePressé›†æˆ
  - æ„å»ºä¼˜åŒ–
  - SEOä¼˜åŒ–

â–¡ é¢„æ¸²æŸ“
  - å…³é”®é¡µé¢é¢„æ¸²æŸ“
  - å¢é‡é™æ€ç”Ÿæˆ
```

---

### 8.7 æ€§èƒ½ä¼˜åŒ–

#### è¿è¡Œæ—¶ä¼˜åŒ–
```
â–¡ è™šæ‹Ÿæ»šåŠ¨
  - åˆ—è¡¨è™šæ‹ŸåŒ–
  - è¡¨æ ¼è™šæ‹ŸåŒ–
  - åŠ¨æ€é«˜åº¦æ”¯æŒ

â–¡ æ‡’åŠ è½½
  - ç»„ä»¶æ‡’åŠ è½½
  - å›¾ç‰‡æ‡’åŠ è½½
  - è·¯ç”±æ‡’åŠ è½½

â–¡ ç¼“å­˜ç­–ç•¥
  - è®¡ç®—å±æ€§ç¼“å­˜
  - ç»„ä»¶ç¼“å­˜
  - è¯·æ±‚ç¼“å­˜
```

#### æ„å»ºä¼˜åŒ–
```
â–¡ Tree-shaking
  - æŒ‰éœ€å¯¼å…¥
  - æ— å‰¯ä½œç”¨æ ‡è®°
  - DCEä¼˜åŒ–

â–¡ ä»£ç åˆ†å‰²
  - è·¯ç”±åˆ†å‰²
  - ç»„ä»¶åˆ†å‰²
  - å¼‚æ­¥chunk

â–¡ å‹ç¼©ä¼˜åŒ–
  - Gzipå‹ç¼©
  - Brotliå‹ç¼©
  - å›¾ç‰‡å‹ç¼©
```

---

### 8.8 å¼€å‘è€…å·¥å…·å¢å¼º

#### æµè§ˆå™¨æ‰©å±•
```
â–¡ VJS DevTools
  - ç»„ä»¶æ ‘æŸ¥çœ‹
  - Tokenå®æ—¶ç¼–è¾‘
  - DSLè°ƒè¯•
  - æ€§èƒ½åˆ†æ
  - æ—¶é—´æ—…è¡Œè°ƒè¯•
```

#### CLIå¢å¼º
```
â–¡ é¡¹ç›®æ¨¡æ¿
  - å¤šç§é¡¹ç›®æ¨¡æ¿
  - è‡ªå®šä¹‰æ¨¡æ¿
  - æ¨¡æ¿å¸‚åœº

â–¡ ä»£ç ç”Ÿæˆ
  - ç»„ä»¶ç”Ÿæˆ
  - é¡µé¢ç”Ÿæˆ
  - è¡¨å•ç”Ÿæˆ
  - CRUDç”Ÿæˆ

â–¡ æ„å»ºä¼˜åŒ–
  - åˆ†ææŠ¥å‘Š
  - ä¼˜åŒ–å»ºè®®
  - ä¾èµ–åˆ†æ
```

#### å¯è§†åŒ–è®¾è®¡å™¨
```
â–¡ DSLè®¾è®¡å™¨
  - æ‹–æ‹½è®¾è®¡
  - å±æ€§ç¼–è¾‘
  - æ ·å¼ç¼–è¾‘
  - å®æ—¶é¢„è§ˆ
  - ä»£ç ç”Ÿæˆ

â–¡ ä½ä»£ç å¹³å°
  - é¡µé¢è®¾è®¡
  - æµç¨‹è®¾è®¡
  - æ•°æ®å»ºæ¨¡
  - æ¥å£é…ç½®
```

---

### 8.9 ä¼ä¸šçº§ç‰¹æ€§

#### æƒé™ç®¡ç†
```
â–¡ èœå•æƒé™
â–¡ æŒ‰é’®æƒé™
â–¡ æ•°æ®æƒé™
â–¡ å­—æ®µæƒé™
â–¡ åŠ¨æ€è·¯ç”±
```

#### æ•°æ®ç®¡ç†
```
â–¡ è¡¨æ ¼å¢å¼º
  - å¯¼å…¥å¯¼å‡º
  - æ‰¹é‡æ“ä½œ
  - æ•°æ®æ ¡éªŒ
  - æ“ä½œæ—¥å¿—

â–¡ è¡¨å•å¢å¼º
  - åˆ†æ­¥è¡¨å•
  - åŠ¨æ€è¡¨å•
  - è¡¨å•è”åŠ¨
  - è¿œç¨‹æ•°æ®
```

#### ç›‘æ§ä¸åˆ†æ
```
â–¡ æ€§èƒ½ç›‘æ§
  - åŠ è½½æ—¶é—´
  - æ¸²æŸ“æ€§èƒ½
  - APIè€—æ—¶
  - é”™è¯¯è¿½è¸ª

â–¡ ç”¨æˆ·è¡Œä¸º
  - æ“ä½œå½•åˆ¶
  - çƒ­åŠ›å›¾
  - æ¼æ–—åˆ†æ
  - ç”¨æˆ·è·¯å¾„
```

---

### 8.10 ç”Ÿæ€å»ºè®¾

#### ç¤¾åŒºè¿è¥
```
â–¡ å®˜æ–¹ç½‘ç«™
â–¡ ç»„ä»¶å¸‚åœº
â–¡ æ’ä»¶å¸‚åœº
â–¡ ä¸»é¢˜å¸‚åœº
â–¡ æ¨¡æ¿å¸‚åœº
â–¡ ç¤¾åŒºè®ºå›
â–¡ æŠ€æœ¯åšå®¢
â–¡ è§†é¢‘æ•™ç¨‹
```

#### ä¼ä¸šæœåŠ¡
```
â–¡ æŠ€æœ¯æ”¯æŒ
â–¡ å®šåˆ¶å¼€å‘
â–¡ åŸ¹è®­æœåŠ¡
â–¡ å’¨è¯¢æœåŠ¡
â–¡ SLAä¿éšœ
```

---

**é˜¶æ®µ8æˆåŠŸæ ‡å‡†**ï¼š
- [ ] å®Œæ•´ç»„ä»¶åº“ï¼ˆ60+ç»„ä»¶ï¼‰
- [ ] ä¸»é¢˜å¸‚åœºä¸Šçº¿
- [ ] å¤šè¯­è¨€æ”¯æŒå®Œæ•´
- [ ] æ— éšœç¢AAAçº§è¾¾æ ‡
- [ ] SSR/SSGç”Ÿäº§å¯ç”¨
- [ ] å¼€å‘è€…å·¥å…·å®Œå–„
- [ ] ç¤¾åŒºæ´»è·ƒ
- [ ] ä¼ä¸šå®¢æˆ·æ¡ˆä¾‹

**é¢„è®¡æ—¶é—´çº¿**ï¼š
- v1.0.0: 30+åŸºç¡€ç»„ä»¶
- v1.5.0: Proä¼ä¸šç»„ä»¶
- v2.0.0: å®Œæ•´ç”Ÿæ€
- v3.0.0: ä½ä»£ç å¹³å°

---

## ğŸ“š è¾…åŠ©å‚è€ƒæ–‡æ¡£

### ğŸ“„ APIè®¾è®¡è§„èŒƒ

**æ–‡æ¡£**: [API-DESIGN.md](./API-DESIGN.md)  
**æŸ¥é˜…æ—¶æœº**: å¼€å‘ç»„ä»¶æ—¶å‚è€ƒ

### ğŸ“„ ç»„ä»¶å¼€å‘æŒ‡å—

**æ–‡æ¡£**: [COMPONENT-DEV-GUIDE.md](./COMPONENT-DEV-GUIDE.md)  
**æŸ¥é˜…æ—¶æœº**: å¼€å‘æ–°ç»„ä»¶æ—¶å‚è€ƒ

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨è·¯å¾„

### æ–°æˆå‘˜ï¼ˆ3å¤©å…¥é—¨ï¼‰

```
Day 1:
  â†’ README.md (30åˆ†é’Ÿ)
  â†’ RISK-ASSESSMENT.md (1å°æ—¶) ğŸ”´
  â†’ ARCHITECTURE.md (1å°æ—¶)

Day 2:
  â†’ TESTING-STRATEGY.md (45åˆ†é’Ÿ)
  â†’ MVP-PLAN.md (1å°æ—¶)
  â†’ TECHNICAL-SPECS.md (30åˆ†é’Ÿ)

Day 3 å¼€å§‹:
  â†’ è·ŸéšMVP-PLANå¼€å§‹å¼€å‘
```

### æ¶æ„å¸ˆï¼ˆ2å¤©ï¼‰

```
Day 1:
  â†’ RISK-ASSESSMENT.md ğŸ”´
  â†’ ARCHITECTURE.md
  â†’ 00-MASTER-PLAN.md
  â†’ TESTING-STRATEGY.md

Day 2:
  â†’ æ‰€æœ‰å®æ–½æ–‡æ¡£ï¼ˆ01-05-PHASEï¼‰
  â†’ TECHNICAL-SPECS.md
  â†’ COMPONENT-ROADMAP.md
```

---

## âš ï¸ å¸¸è§é”™è¯¯æé†’

### âŒ é”™è¯¯1ï¼šè·³è¿‡MVPé˜¶æ®µ
```
"æˆ‘ä»¬ç›´æ¥å¼€å‘å®Œæ•´ç‰ˆå§ï¼ŒMVPå¤ªç®€å•äº†"
```
**åæœ**: æŠ€æœ¯æ–¹æ¡ˆæœªéªŒè¯ï¼ŒåæœŸå¤§è§„æ¨¡è¿”å·¥

### âŒ é”™è¯¯2ï¼šå¿½è§†æµ‹è¯•
```
"å…ˆå†™å®ŒåŠŸèƒ½ï¼Œæµ‹è¯•ä»¥åå†è¡¥"
```
**åæœ**: Bugç§¯ç´¯ï¼Œé‡æ„å›°éš¾

### âŒ é”™è¯¯3ï¼šå¿½è§†å®‰å…¨æ€§
```
"å®‰å…¨é—®é¢˜ä»¥åå†ä¼˜åŒ–"
```
**åæœ**: ç”Ÿäº§ç¯å¢ƒæ¼æ´ï¼Œç”¨æˆ·æ•°æ®é£é™©

---

## ğŸ“Š å½“å‰è¿›åº¦

**é˜¶æ®µ0ï¼ˆé¡¹ç›®åˆå§‹åŒ–ï¼‰**: âœ… 70%å®Œæˆ  
**MVPé˜¶æ®µ**: âšª å¾…å¼€å§‹  
**Coreé˜¶æ®µ**: âšª å¾…å¼€å§‹  
**Vueé˜¶æ®µ**: âšª å¾…å¼€å§‹  

---

## ğŸ‰ æ€»ç»“

### ä¸‰ä¸ªå…³é”®åŸåˆ™

1. **æŒ‰é¡ºåºæ‰§è¡Œ** - æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å‰ç½®ä¾èµ–
2. **MVPä¼˜å…ˆ** - å¿«é€ŸéªŒè¯ï¼Œé™ä½é£é™©
3. **è´¨é‡ä¸ºæœ¬** - æµ‹è¯•è¦†ç›–ç‡ã€å®‰å…¨æ€§ä¸å¦¥å

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… é˜…è¯»æœ¬å®æ–½æŒ‡å—
2. â†’ é˜…è¯» RISK-ASSESSMENT.md ğŸ”´
3. â†’ é˜…è¯» ARCHITECTURE.md
4. â†’ å¼€å§‹MVP Week 1

---

**æœ€åæ›´æ–°**: 2025-01-08  
**ç»´æŠ¤è€…**: VJS Team  
**æ–‡æ¡£çŠ¶æ€**: ğŸš€ æ‰§è¡Œä¸­
# é˜¶æ®µ1: CoreåŸºç¡€è®¾æ–½è¯¦ç»†å®æ–½æ–‡æ¡£

> **æ—¶é—´**: 2-3å‘¨
> **ç›®æ ‡**: æ„å»ºVJS-UIçš„æ ¸å¿ƒå¼•æ“
> **çŠ¶æ€**: ğŸ“‹ è§„åˆ’ä¸­

---

## ç›®å½•

1. [æ€»è§ˆ](#ä¸€æ€»è§ˆ)
2. [Week 1: Tokenç³»ç»Ÿ + å“åº”å¼å¼•æ“](#äºŒweek-1-tokenç³»ç»Ÿ--å“åº”å¼å¼•æ“)
3. [Week 2: DSLè§£æå™¨ + è¡¨è¾¾å¼æ±‚å€¼å™¨](#ä¸‰week-2-dslè§£æå™¨--è¡¨è¾¾å¼æ±‚å€¼å™¨)
4. [Week 3: Binder + Coreå¼•æ“é›†æˆ](#å››week-3-binder--coreå¼•æ“é›†æˆ)
5. [æµ‹è¯•ç­–ç•¥](#äº”æµ‹è¯•ç­–ç•¥)
6. [æ€§èƒ½åŸºå‡†](#å…­æ€§èƒ½åŸºå‡†)

---

## ä¸€ã€æ€»è§ˆ

### 1.1 æ ¸å¿ƒåŒ…ç»“æ„

```
@vjs-ui/core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/              # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ dsl.ts         # DSLç±»å‹
â”‚   â”‚   â”œâ”€â”€ token.ts       # Tokenç±»å‹
â”‚   â”‚   â”œâ”€â”€ vnode.ts       # VNodeç±»å‹
â”‚   â”‚   â”œâ”€â”€ context.ts     # ä¸Šä¸‹æ–‡ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ token/             # Tokenç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ compiler.ts    # Tokenç¼–è¯‘å™¨
â”‚   â”‚   â”œâ”€â”€ runtime.ts     # Tokenè¿è¡Œæ—¶
â”‚   â”‚   â”œâ”€â”€ utils.ts       # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ reactive/          # å“åº”å¼ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ reactive.ts    # reactiveå®ç°
â”‚   â”‚   â”œâ”€â”€ effect.ts      # effectå®ç°
â”‚   â”‚   â”œâ”€â”€ computed.ts    # computedå®ç°
â”‚   â”‚   â”œâ”€â”€ watch.ts       # watchå®ç°
â”‚   â”‚   â”œâ”€â”€ ref.ts         # refå®ç°
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ parser/            # DSLè§£æå™¨
â”‚   â”‚   â”œâ”€â”€ parser.ts      # æ ¸å¿ƒè§£æå™¨
â”‚   â”‚   â”œâ”€â”€ if-parser.ts   # æ¡ä»¶è§£æ
â”‚   â”‚   â”œâ”€â”€ for-parser.ts  # å¾ªç¯è§£æ
â”‚   â”‚   â”œâ”€â”€ slot-parser.ts # æ’æ§½è§£æ
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ evaluator/         # è¡¨è¾¾å¼æ±‚å€¼å™¨
â”‚   â”‚   â”œâ”€â”€ evaluator.ts   # æ ¸å¿ƒæ±‚å€¼å™¨
â”‚   â”‚   â”œâ”€â”€ sandbox.ts     # å®‰å…¨æ²™ç®±
â”‚   â”‚   â”œâ”€â”€ ast-walker.ts  # ASTéå†å™¨
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ binder/            # æ•°æ®ç»‘å®šå™¨
â”‚   â”‚   â”œâ”€â”€ binder.ts      # æ ¸å¿ƒç»‘å®šå™¨
â”‚   â”‚   â”œâ”€â”€ props-binder.ts
â”‚   â”‚   â”œâ”€â”€ style-binder.ts
â”‚   â”‚   â”œâ”€â”€ event-binder.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ renderer/          # æ¸²æŸ“å™¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ renderer.ts    # æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ vnode.ts       # VNodeå·¥å‚
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ core.ts            # Coreä¸»ç±»
â”‚   â””â”€â”€ index.ts           # å…¥å£
â”‚
â”œâ”€â”€ test/                  # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ benchmarks/
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ rollup.config.ts
â””â”€â”€ README.md
```

### 1.2 æ ¸å¿ƒä¾èµ–

```json
{
  "dependencies": {
    "jsep": "^1.3.8"  // è¡¨è¾¾å¼è§£æ
  },
  "devDependencies": {
    "@types/jsep": "^1.3.5",
    "vitest": "^1.0.0",
    "rollup": "^4.6.0",
    "typescript": "^5.3.2"
  }
}
```

---

## äºŒã€Week 1: Tokenç³»ç»Ÿ + å“åº”å¼å¼•æ“

### 2.1 Tokenç³»ç»Ÿå®ç°

#### 2.1.1 ç±»å‹å®šä¹‰

```typescript
// src/types/token.ts

/**
 * Tokenå€¼ç±»å‹
 */
export type TokenValue = string | number | boolean

/**
 * Tokenå®šä¹‰
 */
export interface TokenDefinition {
  value: TokenValue
  type: 'color' | 'spacing' | 'radius' | 'font' | 'shadow' | 'motion' | 'zIndex' | 'other'
  description?: string
  alpha?: number  // ç”¨äºé¢œè‰²é€æ˜åº¦
  reference?: string  // å¼•ç”¨å…¶ä»–token
}

/**
 * Tokené›†åˆ
 */
export type TokenMap = Record<string, TokenDefinition>

/**
 * æ‰å¹³åŒ–Tokenï¼ˆè¿è¡Œæ—¶ä½¿ç”¨ï¼‰
 */
export type FlatTokenMap = Record<string, TokenValue>

/**
 * Tokenç¼–è¯‘é€‰é¡¹
 */
export interface TokenCompileOptions {
  prefix?: string  // CSSå˜é‡å‰ç¼€ï¼Œé»˜è®¤'vjs'
  format?: 'css' | 'scss' | 'less' | 'js' | 'json'
  minify?: boolean
}

/**
 * Tokenè¿è¡Œæ—¶é…ç½®
 */
export interface TokenRuntimeConfig {
  tokens: FlatTokenMap
  prefix?: string
  scope?: Element  // CSS Variablesä½œç”¨åŸŸ
}
```

#### 2.1.2 Tokenç¼–è¯‘å™¨

```typescript
// src/token/compiler.ts

import type { TokenMap, FlatTokenMap, TokenCompileOptions, TokenDefinition } from '../types'

/**
 * Tokenç¼–è¯‘å™¨ç±»
 */
export class TokenCompiler {
  private tokens: TokenMap
  private flatTokens: FlatTokenMap = {}

  constructor(tokens: TokenMap) {
    this.tokens = tokens
    this.flatten()
  }

  /**
   * å±•å¹³Tokenå®šä¹‰ï¼Œè§£æå¼•ç”¨
   */
  private flatten(): void {
    const resolve = (key: string, visited = new Set<string>()): TokenValue => {
      if (visited.has(key)) {
        throw new Error(`Circular token reference detected: ${key}`)
      }

      const token = this.tokens[key]
      if (!token) {
        throw new Error(`Token not found: ${key}`)
      }

      // å¦‚æœæœ‰å¼•ç”¨ï¼Œé€’å½’è§£æ
      if (token.reference) {
        visited.add(key)
        const refValue = resolve(token.reference, visited)
        
        // å¤„ç†alphaé€æ˜åº¦ï¼ˆä»…colorç±»å‹ï¼‰
        if (token.type === 'color' && token.alpha !== undefined) {
          return this.applyAlpha(String(refValue), token.alpha)
        }
        
        return refValue
      }

      return token.value
    }

    // è§£ææ‰€æœ‰token
    for (const key in this.tokens) {
      this.flatTokens[key] = resolve(key)
    }
  }

  /**
   * åº”ç”¨alphaé€æ˜åº¦åˆ°é¢œè‰²
   */
  private applyAlpha(color: string, alpha: number): string {
    // ç®€åŒ–å®ç°ï¼Œå®é™…åº”ä½¿ç”¨coloråº“
    if (color.startsWith('#')) {
      const hex = Math.round(alpha * 255).toString(16).padStart(2, '0')
      return color + hex
    }
    return color
  }

  /**
   * ç¼–è¯‘ä¸ºCSS Variables
   */
  toCSSVariables(options: TokenCompileOptions = {}): string {
    const prefix = options.prefix || 'vjs'
    const lines: string[] = [':root {']

    for (const [key, value] of Object.entries(this.flatTokens)) {
      const cssVar = `--${prefix}-${key.replace(/\./g, '-')}`
      lines.push(`  ${cssVar}: ${value};`)
    }

    lines.push('}')
    return options.minify ? lines.join('') : lines.join('\n')
  }

  /**
   * ç¼–è¯‘ä¸ºTypeScriptç±»å‹
   */
  toTypeScript(): string {
    const keys = Object.keys(this.flatTokens)
    return `export type TokenKey = ${keys.map(k => `'${k}'`).join(' | ')}`
  }

  /**
   * ç¼–è¯‘ä¸ºSCSSå˜é‡
   */
  toSCSS(): string {
    const lines: string[] = []
    for (const [key, value] of Object.entries(this.flatTokens)) {
      const scssVar = `$${key.replace(/\./g, '-')}`
      lines.push(`${scssVar}: ${value};`)
    }
    return lines.join('\n')
  }

  /**
   * è·å–æ‰å¹³åŒ–çš„tokens
   */
  getFlatTokens(): FlatTokenMap {
    return { ...this.flatTokens }
  }
}

/**
 * ç¼–è¯‘Token
 */
export function compileTokens(tokens: TokenMap, options?: TokenCompileOptions): string {
  const compiler = new TokenCompiler(tokens)
  
  switch (options?.format || 'css') {
    case 'css':
      return compiler.toCSSVariables(options)
    case 'scss':
      return compiler.toSCSS()
    case 'js':
    case 'json':
      return JSON.stringify(compiler.getFlatTokens(), null, 2)
    default:
      throw new Error(`Unsupported format: ${options?.format}`)
  }
}
```

#### 2.1.3 Tokenè¿è¡Œæ—¶

```typescript
// src/token/runtime.ts

import type { FlatTokenMap, TokenRuntimeConfig } from '../types'

/**
 * Tokenè¿è¡Œæ—¶ç±»
 */
export class TokenRuntime {
  private tokens: FlatTokenMap
  private prefix: string
  private scope: Element
  private listeners = new Set<(tokens: FlatTokenMap) => void>()

  constructor(config: TokenRuntimeConfig) {
    this.tokens = config.tokens
    this.prefix = config.prefix || 'vjs'
    this.scope = config.scope || document.documentElement
    this.apply()
  }

  /**
   * åº”ç”¨tokensåˆ°DOM
   */
  private apply(): void {
    for (const [key, value] of Object.entries(this.tokens)) {
      this.setCSSVariable(key, value)
    }
  }

  /**
   * è®¾ç½®CSSå˜é‡
   */
  private setCSSVariable(key: string, value: string | number | boolean): void {
    const cssVar = `--${this.prefix}-${key.replace(/\./g, '-')}`
    this.scope.style.setProperty(cssVar, String(value))
  }

  /**
   * è·å–tokenå€¼
   */
  get(key: string): string | number | boolean | undefined {
    return this.tokens[key]
  }

  /**
   * è®¾ç½®tokenå€¼ï¼ˆè¿è¡Œæ—¶ä¿®æ”¹ï¼‰
   */
  set(key: string, value: string | number | boolean): void {
    this.tokens[key] = value
    this.setCSSVariable(key, value)
    this.notify()
  }

  /**
   * æ‰¹é‡è®¾ç½®tokens
   */
  setMultiple(updates: Partial<FlatTokenMap>): void {
    Object.assign(this.tokens, updates)
    for (const [key, value] of Object.entries(updates)) {
      this.setCSSVariable(key, value)
    }
    this.notify()
  }

  /**
   * è·å–CSSå˜é‡å¼•ç”¨
   */
  getVar(key: string): string {
    return `var(--${this.prefix}-${key.replace(/\./g, '-')})`
  }

  /**
   * ç›‘å¬tokenå˜åŒ–
   */
  onChange(callback: (tokens: FlatTokenMap) => void): () => void {
    this.listeners.add(callback)
    return () => this.listeners.delete(callback)
  }

  /**
   * é€šçŸ¥listeners
   */
  private notify(): void {
    this.listeners.forEach(callback => callback(this.tokens))
  }

  /**
   * é‡ç½®ä¸ºåˆå§‹tokens
   */
  reset(tokens?: FlatTokenMap): void {
    this.tokens = tokens || this.tokens
    this.apply()
    this.notify()
  }

  /**
   * é”€æ¯
   */
  destroy(): void {
    this.listeners.clear()
  }
}

/**
 * åˆ›å»ºTokenè¿è¡Œæ—¶
 */
export function createTokenRuntime(config: TokenRuntimeConfig): TokenRuntime {
  return new TokenRuntime(config)
}
```

#### 2.1.4 é¢„è®¾ä¸»é¢˜

```typescript
// @vjs-ui/tokens/src/presets/default.json
{
  "color.primary": {
    "value": "#1677ff",
    "type": "color",
    "description": "ä¸»è‰²è°ƒ"
  },
  "color.primary.hover": {
    "value": "#1677ff",
    "type": "color",
    "alpha": 0.8,
    "reference": "color.primary"
  },
  "color.success": {
    "value": "#52c41a",
    "type": "color"
  },
  "color.warning": {
    "value": "#faad14",
    "type": "color"
  },
  "color.danger": {
    "value": "#ff4d4f",
    "type": "color"
  },
  "color.info": {
    "value": "#1890ff",
    "type": "color"
  },
  
  "spacing.xs": {
    "value": "4px",
    "type": "spacing"
  },
  "spacing.sm": {
    "value": "8px",
    "type": "spacing"
  },
  "spacing.md": {
    "value": "16px",
    "type": "spacing"
  },
  "spacing.lg": {
    "value": "24px",
    "type": "spacing"
  },
  "spacing.xl": {
    "value": "32px",
    "type": "spacing"
  },
  
  "radius.sm": {
    "value": "4px",
    "type": "radius"
  },
  "radius.md": {
    "value": "8px",
    "type": "radius"
  },
  "radius.lg": {
    "value": "16px",
    "type": "radius"
  },
  "radius.full": {
    "value": "9999px",
    "type": "radius"
  },
  
  "font.family": {
    "value": "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial",
    "type": "font"
  },
  "font.size.xs": {
    "value": "12px",
    "type": "font"
  },
  "font.size.sm": {
    "value": "14px",
    "type": "font"
  },
  "font.size.base": {
    "value": "16px",
    "type": "font"
  },
  "font.size.lg": {
    "value": "18px",
    "type": "font"
  },
  "font.size.xl": {
    "value": "20px",
    "type": "font"
  },
  
  "shadow.sm": {
    "value": "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
    "type": "shadow"
  },
  "shadow.md": {
    "value": "0 4px 6px -1px rgba(0, 0, 0, 0.1)",
    "type": "shadow"
  },
  "shadow.lg": {
    "value": "0 10px 15px -3px rgba(0, 0, 0, 0.1)",
    "type": "shadow"
  },
  
  "motion.duration.fast": {
    "value": "150ms",
    "type": "motion"
  },
  "motion.duration.base": {
    "value": "300ms",
    "type": "motion"
  },
  "motion.duration.slow": {
    "value": "500ms",
    "type": "motion"
  },
  "motion.easing.ease": {
    "value": "cubic-bezier(0.4, 0, 0.2, 1)",
    "type": "motion"
  },
  
  "zIndex.dropdown": {
    "value": 1000,
    "type": "zIndex"
  },
  "zIndex.modal": {
    "value": 1050,
    "type": "zIndex"
  },
  "zIndex.tooltip": {
    "value": 1100,
    "type": "zIndex"
  }
}
```

### 2.2 å“åº”å¼ç³»ç»Ÿå®ç°

#### 2.2.1 ç±»å‹å®šä¹‰

```typescript
// src/types/reactive.ts

export type Effect = () => void
export type EffectCleanup = () => void

export interface ReactiveEffectOptions {
  lazy?: boolean
  scheduler?: (effect: Effect) => void
}

export interface ComputedRef<T = any> {
  readonly value: T
}

export interface WatchOptions {
  immediate?: boolean
  deep?: boolean
}

export type WatchCallback<T = any> = (
  newValue: T,
  oldValue: T,
  onCleanup: (cleanup: () => void) => void
) => void
```

#### 2.2.2 æ ¸å¿ƒå“åº”å¼å®ç°

```typescript
// src/reactive/reactive.ts

/**
 * å½“å‰æ´»è·ƒçš„effect
 */
let activeEffect: Effect | undefined
const effectStack: Effect[] = []

/**
 * ä¾èµ–æ˜ å°„è¡¨ WeakMap<target, Map<key, Set<Effect>>>
 */
const targetMap = new WeakMap<object, Map<string | symbol, Set<Effect>>>()

/**
 * æ‰§è¡Œeffectå¹¶è¿½è¸ªä¾èµ–
 */
export function effect(fn: Effect, options: ReactiveEffectOptions = {}): EffectCleanup {
  const effectFn = () => {
    try {
      effectStack.push(effectFn)
      activeEffect = effectFn
      return fn()
    } finally {
      effectStack.pop()
      activeEffect = effectStack[effectStack.length - 1]
    }
  }

  if (!options.lazy) {
    effectFn()
  }

  return () => {
    // æ¸…ç†effect
    cleanup(effectFn)
  }
}

/**
 * è¿½è¸ªä¾èµ–
 */
export function track(target: object, key: string | symbol): void {
  if (!activeEffect) return

  let depsMap = targetMap.get(target)
  if (!depsMap) {
    depsMap = new Map()
    targetMap.set(target, depsMap)
  }

  let dep = depsMap.get(key)
  if (!dep) {
    dep = new Set()
    depsMap.set(key, dep)
  }

  dep.add(activeEffect)
}

/**
 * è§¦å‘æ›´æ–°
 */
export function trigger(target: object, key: string | symbol): void {
  const depsMap = targetMap.get(target)
  if (!depsMap) return

  const dep = depsMap.get(key)
  if (!dep) return

  // åˆ›å»ºå‰¯æœ¬é¿å…æ— é™å¾ªç¯
  const effects = new Set(dep)
  effects.forEach(effect => effect())
}

/**
 * æ¸…ç†effectçš„æ‰€æœ‰ä¾èµ–
 */
function cleanup(effect: Effect): void {
  targetMap.forEach(depsMap => {
    depsMap.forEach(dep => {
      dep.delete(effect)
    })
  })
}

/**
 * åˆ›å»ºå“åº”å¼å¯¹è±¡
 */
export function reactive<T extends object>(target: T): T {
  return new Proxy(target, {
    get(target, key, receiver) {
      track(target, key)
      const result = Reflect.get(target, key, receiver)
      
      // æ·±åº¦å“åº”å¼
      if (typeof result === 'object' && result !== null) {
        return reactive(result)
      }
      
      return result
    },

    set(target, key, value, receiver) {
      const oldValue = (target as any)[key]
      const result = Reflect.set(target, key, value, receiver)
      
      // åªåœ¨å€¼çœŸæ­£æ”¹å˜æ—¶è§¦å‘
      if (oldValue !== value) {
        trigger(target, key)
      }
      
      return result
    },

    deleteProperty(target, key) {
      const result = Reflect.deleteProperty(target, key)
      trigger(target, key)
      return result
    }
  })
}

/**
 * æ£€æŸ¥æ˜¯å¦ä¸ºå“åº”å¼å¯¹è±¡
 */
const reactiveFlag = Symbol('__vjs_reactive__')

export function isReactive(value: any): boolean {
  return !!(value && value[reactiveFlag])
}
```

#### 2.2.3 Computedå®ç°

```typescript
// src/reactive/computed.ts

import { effect, type Effect } from './reactive'
import type { ComputedRef } from '../types'

/**
 * è®¡ç®—å±æ€§
 */
export function computed<T>(getter: () => T): ComputedRef<T> {
  let value: T
  let dirty = true
  
  const effectFn = effect(
    () => {
      value = getter()
      dirty = false
    },
    { lazy: true }
  )

  return {
    get value() {
      if (dirty) {
        effectFn()
      }
      return value
    }
  }
}
```

#### 2.2.4 Watchå®ç°

```typescript
// src/reactive/watch.ts

import { effect } from './reactive'
import type { WatchCallback, WatchOptions } from '../types'

/**
 * ç›‘å¬å™¨
 */
export function watch<T>(
  source: () => T,
  callback: WatchCallback<T>,
  options: WatchOptions = {}
): () => void {
  let oldValue: T
  let cleanup: (() => void) | undefined

  const onCleanup = (fn: () => void) => {
    cleanup = fn
  }

  const job = () => {
    const newValue = source()
    
    if (cleanup) {
      cleanup()
      cleanup = undefined
    }
    
    callback(newValue, oldValue, onCleanup)
    oldValue = newValue
  }

  if (options.immediate) {
    job()
  }

  return effect(job, { lazy: !options.immediate })
}
```

### 2.3 å•å…ƒæµ‹è¯•ç¤ºä¾‹

```typescript
// test/unit/reactive.test.ts

import { describe, it, expect, vi } from 'vitest'
import { reactive, effect, computed, watch } from '../src/reactive'

describe('Reactive System', () => {
  describe('reactive', () => {
    it('should make object reactive', () => {
      const obj = reactive({ count: 0 })
      let dummy
      
      effect(() => {
        dummy = obj.count
      })
      
      expect(dummy).toBe(0)
      obj.count++
      expect(dummy).toBe(1)
    })

    it('should handle nested objects', () => {
      const obj = reactive({ nested: { count: 0 } })
      let dummy
      
      effect(() => {
        dummy = obj.nested.count
      })
      
      expect(dummy).toBe(0)
      obj.nested.count++
      expect(dummy).toBe(1)
    })
  })

  describe('computed', () => {
    it('should compute value', () => {
      const obj = reactive({ count: 0 })
      const double = computed(() => obj.count * 2)
      
      expect(double.value).toBe(0)
      obj.count++
      expect(double.value).toBe(2)
    })

    it('should cache computed value', () => {
      const obj = reactive({ count: 0 })
      const getter = vi.fn(() => obj.count * 2)
      const double = computed(getter)
      
      expect(double.value).toBe(0)
      expect(getter).toHaveBeenCalledTimes(1)
      
      // å¤šæ¬¡è®¿é—®ï¼Œgetteråªè°ƒç”¨ä¸€æ¬¡
      expect(double.value).toBe(0)
      expect(getter).toHaveBeenCalledTimes(1)
      
      // ä¾èµ–æ”¹å˜ï¼Œé‡æ–°è®¡ç®—
      obj.count++
      expect(double.value).toBe(2)
      expect(getter).toHaveBeenCalledTimes(2)
    })
  })

  describe('watch', () => {
    it('should watch reactive property', () => {
      const obj = reactive({ count: 0 })
      const callback = vi.fn()
      
      watch(() => obj.count, callback)
      
      obj.count++
      expect(callback).toHaveBeenCalledWith(1, 0, expect.any(Function))
    })

    it('should support immediate option', () => {
      const obj = reactive({ count: 0 })
      const callback = vi.fn()
      
      watch(() => obj.count, callback, { immediate: true })
      
      expect(callback).toHaveBeenCalledWith(0, undefined, expect.any(Function))
    })
  })
})
```

---

**ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†: Week 2 DSLè§£æå™¨å’Œè¡¨è¾¾å¼æ±‚å€¼å™¨...**

ï¼ˆç”±äºæ–‡æ¡£è¿‡é•¿ï¼Œæˆ‘ä¼šæ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚ç°åœ¨å…ˆä¿å­˜è¿™éƒ¨åˆ†ï¼Œç„¶åç»§ç»­åˆ›å»ºï¼‰
# é˜¶æ®µ1 Week 2: DSLè§£æå™¨ + è¡¨è¾¾å¼æ±‚å€¼å™¨

> æœ¬æ–‡æ¡£æ˜¯ [01-PHASE-1-CORE.md](./01-PHASE-1-CORE.md) çš„ç»­ç¯‡

---

## ä¸‰ã€Week 2: DSLè§£æå™¨ + è¡¨è¾¾å¼æ±‚å€¼å™¨

### 3.1 DSLç±»å‹ç³»ç»Ÿ

```typescript
// src/types/dsl.ts

/**
 * DSLèŠ‚ç‚¹å®šä¹‰
 */
export interface DSLNode {
  // åŸºç¡€ä¿¡æ¯
  id?: string
  type: string  // ç»„ä»¶ç±»å‹
  
  // å±æ€§é…ç½®
  props?: Record<string, any>
  
  // æ ·å¼é…ç½®
  style?: Record<string, string | DSLExpression>
  
  // äº‹ä»¶ç»‘å®š
  events?: Record<string, string | Function>
  
  // å†…éƒ¨çŠ¶æ€
  state?: Record<string, any>
  
  // æ’æ§½å†…å®¹
  slots?: Record<string, string | DSLNode | DSLNode[]>
  
  // æ¡ä»¶æ¸²æŸ“
  if?: DSLExpression
  
  // åˆ—è¡¨æ¸²æŸ“
  for?: string  // "item in items" æˆ– "item, index in items"
  
  // èŠ‚ç‚¹å¼•ç”¨
  ref?: string
  
  // åŠ¨ç”»é…ç½®
  motion?: MotionConfig
  
  // è‡ªå®šä¹‰å…ƒæ•°æ®
  meta?: Record<string, any>
}

/**
 * DSLè¡¨è¾¾å¼ç±»å‹
 */
export type DSLExpression = string

/**
 * åŠ¨ç”»é…ç½®
 */
export interface MotionConfig {
  enter?: string | MotionKeyframes
  leave?: string | MotionKeyframes
  duration?: number
  easing?: string
}

export interface MotionKeyframes {
  from: Record<string, any>
  to: Record<string, any>
}

/**
 * VNodeå®šä¹‰ï¼ˆå†…éƒ¨è™šæ‹ŸèŠ‚ç‚¹ï¼‰
 */
export interface VNode {
  id: string
  type: string
  props: Record<string, any>
  style: Record<string, any>
  events: Record<string, Function>
  children: VNode[]
  raw: DSLNode  // åŸå§‹DSL
  ctx: RuntimeContext
}

/**
 * è¿è¡Œæ—¶ä¸Šä¸‹æ–‡
 */
export interface RuntimeContext {
  tokens: FlatTokenMap
  state: Record<string, any>
  props: Record<string, any>
  rootState: Record<string, any>
  emit: (event: string, payload?: any) => void
  getRef: (ref: string) => any
}

/**
 * è§£æé€‰é¡¹
 */
export interface ParseOptions {
  strict?: boolean  // ä¸¥æ ¼æ¨¡å¼
  maxDepth?: number  // æœ€å¤§åµŒå¥—æ·±åº¦
}
```

### 3.2 DSLè§£æå™¨å®ç°

#### 3.2.1 æ ¸å¿ƒè§£æå™¨

```typescript
// src/parser/parser.ts

import { v4 as uuid } from 'uuid'
import type { DSLNode, VNode, RuntimeContext, ParseOptions } from '../types'
import { parseIf } from './if-parser'
import { parseFor } from './for-parser'
import { parseSlots } from './slot-parser'

/**
 * DSLè§£æå™¨ç±»
 */
export class Parser {
  private options: ParseOptions
  private depth = 0

  constructor(options: ParseOptions = {}) {
    this.options = {
      strict: false,
      maxDepth: 100,
      ...options
    }
  }

  /**
   * è§£æDSLèŠ‚ç‚¹
   */
  parse(node: DSLNode, ctx: RuntimeContext): VNode[] {
    if (!node) {
      if (this.options.strict) {
        throw new Error('DSL node is required')
      }
      return []
    }

    // æ£€æŸ¥åµŒå¥—æ·±åº¦
    this.depth++
    if (this.depth > this.options.maxDepth!) {
      throw new Error(`Maximum nesting depth exceeded: ${this.options.maxDepth}`)
    }

    try {
      // 1. å¤„ç†æ¡ä»¶æ¸²æŸ“
      if (node.if !== undefined) {
        const shouldRender = parseIf(node.if, ctx)
        if (!shouldRender) {
          return []
        }
      }

      // 2. å¤„ç†åˆ—è¡¨æ¸²æŸ“
      if (node.for) {
        return parseFor(node, ctx, (itemNode, itemCtx) => {
          return this.parseSingle(itemNode, itemCtx)
        })
      }

      // 3. å¤„ç†å•ä¸ªèŠ‚ç‚¹
      return [this.parseSingle(node, ctx)]
    } finally {
      this.depth--
    }
  }

  /**
   * è§£æå•ä¸ªèŠ‚ç‚¹
   */
  private parseSingle(node: DSLNode, ctx: RuntimeContext): VNode {
    const id = node.id || uuid()
    
    // å¤„ç†æ’æ§½
    const children = parseSlots(node.slots, ctx, (childNode) => {
      return this.parse(childNode, ctx)
    })

    const vnode: VNode = {
      id,
      type: node.type,
      props: { ...(node.props || {}) },
      style: { ...(node.style || {}) },
      events: {},
      children: children.flat(),
      raw: node,
      ctx
    }

    return vnode
  }

  /**
   * éªŒè¯DSLèŠ‚ç‚¹
   */
  validate(node: DSLNode): { valid: boolean; errors: string[] } {
    const errors: string[] = []

    if (!node.type) {
      errors.push('Missing required field: type')
    }

    if (node.for && node.if) {
      errors.push('Cannot use both "for" and "if" on the same node')
    }

    return {
      valid: errors.length === 0,
      errors
    }
  }
}

/**
 * ä¾¿æ·å‡½æ•°ï¼šè§£æDSL
 */
export function parseDSL(node: DSLNode, ctx: RuntimeContext, options?: ParseOptions): VNode[] {
  const parser = new Parser(options)
  return parser.parse(node, ctx)
}
```

#### 3.2.2 æ¡ä»¶è§£æå™¨

```typescript
// src/parser/if-parser.ts

import { compileExpression } from '../evaluator'
import type { DSLExpression, RuntimeContext } from '../types'

/**
 * è§£æifè¡¨è¾¾å¼
 */
export function parseIf(expression: DSLExpression, ctx: RuntimeContext): boolean {
  try {
    const compiled = compileExpression(expression)
    const result = compiled({
      __state: ctx.state,
      __props: ctx.props,
      __context: ctx,
      tokens: ctx.tokens
    })
    
    return Boolean(result)
  } catch (error) {
    console.error('Error evaluating if expression:', expression, error)
    return false
  }
}
```

#### 3.2.3 å¾ªç¯è§£æå™¨

```typescript
// src/parser/for-parser.ts

import { compileExpression } from '../evaluator'
import type { DSLNode, VNode, RuntimeContext } from '../types'

/**
 * è§£æforè¡¨è¾¾å¼
 * æ”¯æŒ: "item in items" æˆ– "item, index in items"
 */
export function parseFor(
  node: DSLNode,
  ctx: RuntimeContext,
  parseNode: (node: DSLNode, ctx: RuntimeContext) => VNode
): VNode[] {
  const forExpr = node.for!
  
  // è§£æforè¡¨è¾¾å¼
  const match = forExpr.match(/^\s*(\w+)(?:\s*,\s*(\w+))?\s+in\s+(.+)$/)
  if (!match) {
    throw new Error(`Invalid for expression: ${forExpr}`)
  }

  const [, itemName, indexName, listExpr] = match

  // è·å–åˆ—è¡¨æ•°æ®
  const compiled = compileExpression(listExpr)
  const list = compiled({
    __state: ctx.state,
    __props: ctx.props,
    __context: ctx,
    tokens: ctx.tokens
  })

  if (!Array.isArray(list)) {
    console.warn('For expression did not evaluate to an array:', listExpr)
    return []
  }

  // ä¸ºæ¯ä¸ªitemåˆ›å»ºèŠ‚ç‚¹
  const vnodes: VNode[] = []
  
  list.forEach((item, index) => {
    // å…‹éš†èŠ‚ç‚¹ï¼ˆç§»é™¤foræŒ‡ä»¤ï¼‰
    const itemNode: DSLNode = {
      ...node,
      for: undefined,
      // åˆå¹¶itemæ•°æ®åˆ°state
      state: {
        ...(node.state || {}),
        [itemName]: item,
        ...(indexName ? { [indexName]: index } : {})
      },
      // ç”Ÿæˆå”¯ä¸€key
      id: `${node.id || node.type}-${index}`
    }

    // è§£æèŠ‚ç‚¹
    const vnode = parseNode(itemNode, ctx)
    vnodes.push(vnode)
  })

  return vnodes
}
```

#### 3.2.4 æ’æ§½è§£æå™¨

```typescript
// src/parser/slot-parser.ts

import { v4 as uuid } from 'uuid'
import type { DSLNode, VNode, RuntimeContext } from '../types'

/**
 * è§£ææ’æ§½
 */
export function parseSlots(
  slots: DSLNode['slots'],
  ctx: RuntimeContext,
  parseNode: (node: DSLNode, ctx: RuntimeContext) => VNode[]
): VNode[] {
  if (!slots) {
    return []
  }

  const children: VNode[] = []

  for (const slotContent of Object.values(slots)) {
    if (typeof slotContent === 'string') {
      // æ–‡æœ¬èŠ‚ç‚¹
      children.push(createTextNode(slotContent, ctx))
    } else if (Array.isArray(slotContent)) {
      // å¤šä¸ªèŠ‚ç‚¹
      slotContent.forEach(node => {
        children.push(...parseNode(node, ctx))
      })
    } else {
      // å•ä¸ªèŠ‚ç‚¹
      children.push(...parseNode(slotContent, ctx))
    }
  }

  return children
}

/**
 * åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
 */
function createTextNode(text: string, ctx: RuntimeContext): VNode {
  return {
    id: uuid(),
    type: 'Text',
    props: { text },
    style: {},
    events: {},
    children: [],
    raw: { type: 'Text' },
    ctx
  }
}
```

### 3.3 è¡¨è¾¾å¼æ±‚å€¼å™¨å®ç°

#### 3.3.1 è¡¨è¾¾å¼ç¼–è¯‘å™¨

```typescript
// src/evaluator/evaluator.ts

import jsep from 'jsep'
import { ASTWalker } from './ast-walker'
import type { DSLExpression } from '../types'

/**
 * è¡¨è¾¾å¼æ±‚å€¼ä¸Šä¸‹æ–‡
 */
export interface EvalContext {
  __state: Record<string, any>
  __props: Record<string, any>
  __context: any
  tokens: Record<string, any>
  __event?: any
}

/**
 * ç¼–è¯‘åçš„è¡¨è¾¾å¼å‡½æ•°
 */
export type CompiledExpression = (ctx: EvalContext) => any

/**
 * è¡¨è¾¾å¼ç¼–è¯‘å™¨ç¼“å­˜
 */
const expressionCache = new Map<string, CompiledExpression>()

/**
 * ç¼–è¯‘è¡¨è¾¾å¼
 */
export function compileExpression(expr: DSLExpression): CompiledExpression {
  // æ£€æŸ¥ç¼“å­˜
  if (expressionCache.has(expr)) {
    return expressionCache.get(expr)!
  }

  // é¢„å¤„ç†ï¼šæ›¿æ¢ç‰¹æ®Šæ ‡è®°
  const transformed = transformExpression(expr)

  try {
    // ä½¿ç”¨jsepè§£æä¸ºAST
    const ast = jsep(transformed)
    
    // åˆ›å»ºAST walker
    const walker = new ASTWalker()
    
    // ç¼–è¯‘ä¸ºå‡½æ•°
    const compiled: CompiledExpression = (ctx: EvalContext) => {
      return walker.walk(ast, ctx)
    }

    // ç¼“å­˜
    expressionCache.set(expr, compiled)
    
    return compiled
  } catch (error) {
    console.error('Failed to compile expression:', expr, error)
    // è¿”å›ä¸€ä¸ªå®‰å…¨çš„é»˜è®¤å‡½æ•°
    return () => undefined
  }
}

/**
 * è½¬æ¢è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šæ ‡è®°
 */
function transformExpression(expr: string): string {
  return expr
    .replace(/\$state\./g, '__state.')
    .replace(/\$props\./g, '__props.')
    .replace(/\$context\./g, '__context.')
    .replace(/\$event/g, '__event')
}

/**
 * æ¸…é™¤ç¼–è¯‘ç¼“å­˜
 */
export function clearExpressionCache(): void {
  expressionCache.clear()
}
```

#### 3.3.2 ASTéå†å™¨ï¼ˆå®‰å…¨æ²™ç®±ï¼‰

```typescript
// src/evaluator/ast-walker.ts

import type { Expression } from 'jsep'
import type { EvalContext } from './evaluator'

/**
 * ç™½åå•ï¼šå…è®¸çš„æ“ä½œç¬¦
 */
const ALLOWED_OPERATORS = new Set([
  '+', '-', '*', '/', '%',
  '==', '===', '!=', '!==',
  '<', '<=', '>', '>=',
  '&&', '||', '!',
  '?', ':',  // ä¸‰å…ƒè¿ç®—ç¬¦
])

/**
 * ç™½åå•ï¼šå…è®¸çš„å†…ç½®å‡½æ•°
 */
const ALLOWED_FUNCTIONS = new Set([
  'String',
  'Number',
  'Boolean',
  'Array',
  'Object',
  'Math',
  'Date',
  'JSON'
])

/**
 * ASTéå†å™¨ï¼ˆå®‰å…¨æ‰§è¡Œï¼‰
 */
export class ASTWalker {
  /**
   * éå†ASTèŠ‚ç‚¹
   */
  walk(node: Expression, ctx: EvalContext): any {
    switch (node.type) {
      case 'Literal':
        return this.walkLiteral(node)
      
      case 'Identifier':
        return this.walkIdentifier(node, ctx)
      
      case 'MemberExpression':
        return this.walkMemberExpression(node, ctx)
      
      case 'BinaryExpression':
        return this.walkBinaryExpression(node, ctx)
      
      case 'UnaryExpression':
        return this.walkUnaryExpression(node, ctx)
      
      case 'LogicalExpression':
        return this.walkLogicalExpression(node, ctx)
      
      case 'ConditionalExpression':
        return this.walkConditionalExpression(node, ctx)
      
      case 'CallExpression':
        return this.walkCallExpression(node, ctx)
      
      case 'ArrayExpression':
        return this.walkArrayExpression(node, ctx)
      
      case 'ObjectExpression':
        return this.walkObjectExpression(node, ctx)
      
      default:
        throw new Error(`Unsupported expression type: ${node.type}`)
    }
  }

  /**
   * å­—é¢é‡
   */
  private walkLiteral(node: any): any {
    return node.value
  }

  /**
   * æ ‡è¯†ç¬¦
   */
  private walkIdentifier(node: any, ctx: EvalContext): any {
    const name = node.name
    
    // åªå…è®¸è®¿é—®ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡
    if (name in ctx) {
      return ctx[name as keyof EvalContext]
    }
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºå…è®¸çš„å…¨å±€å‡½æ•°
    if (ALLOWED_FUNCTIONS.has(name)) {
      return (globalThis as any)[name]
    }
    
    throw new Error(`Undefined variable: ${name}`)
  }

  /**
   * æˆå‘˜è®¿é—®
   */
  private walkMemberExpression(node: any, ctx: EvalContext): any {
    const object = this.walk(node.object, ctx)
    const property = node.computed 
      ? this.walk(node.property, ctx)
      : node.property.name

    if (object == null) {
      return undefined
    }

    return object[property]
  }

  /**
   * äºŒå…ƒè¿ç®—ç¬¦
   */
  private walkBinaryExpression(node: any, ctx: EvalContext): any {
    const operator = node.operator
    
    // æ£€æŸ¥æ“ä½œç¬¦ç™½åå•
    if (!ALLOWED_OPERATORS.has(operator)) {
      throw new Error(`Operator not allowed: ${operator}`)
    }

    const left = this.walk(node.left, ctx)
    const right = this.walk(node.right, ctx)

    switch (operator) {
      case '+': return left + right
      case '-': return left - right
      case '*': return left * right
      case '/': return left / right
      case '%': return left % right
      case '==': return left == right
      case '===': return left === right
      case '!=': return left != right
      case '!==': return left !== right
      case '<': return left < right
      case '<=': return left <= right
      case '>': return left > right
      case '>=': return left >= right
      default:
        throw new Error(`Unknown operator: ${operator}`)
    }
  }

  /**
   * ä¸€å…ƒè¿ç®—ç¬¦
   */
  private walkUnaryExpression(node: any, ctx: EvalContext): any {
    const operator = node.operator
    const argument = this.walk(node.argument, ctx)

    switch (operator) {
      case '!': return !argument
      case '+': return +argument
      case '-': return -argument
      default:
        throw new Error(`Unknown unary operator: ${operator}`)
    }
  }

  /**
   * é€»è¾‘è¿ç®—ç¬¦
   */
  private walkLogicalExpression(node: any, ctx: EvalContext): any {
    const operator = node.operator
    const left = this.walk(node.left, ctx)

    switch (operator) {
      case '&&':
        return left && this.walk(node.right, ctx)
      case '||':
        return left || this.walk(node.right, ctx)
      default:
        throw new Error(`Unknown logical operator: ${operator}`)
    }
  }

  /**
   * ä¸‰å…ƒè¿ç®—ç¬¦
   */
  private walkConditionalExpression(node: any, ctx: EvalContext): any {
    const test = this.walk(node.test, ctx)
    return test
      ? this.walk(node.consequent, ctx)
      : this.walk(node.alternate, ctx)
  }

  /**
   * å‡½æ•°è°ƒç”¨
   */
  private walkCallExpression(node: any, ctx: EvalContext): any {
    const callee = this.walk(node.callee, ctx)
    const args = node.arguments.map((arg: any) => this.walk(arg, ctx))

    if (typeof callee !== 'function') {
      throw new Error('Callee is not a function')
    }

    // å®‰å…¨è°ƒç”¨
    return callee(...args)
  }

  /**
   * æ•°ç»„è¡¨è¾¾å¼
   */
  private walkArrayExpression(node: any, ctx: EvalContext): any[] {
    return node.elements.map((element: any) => this.walk(element, ctx))
  }

  /**
   * å¯¹è±¡è¡¨è¾¾å¼
   */
  private walkObjectExpression(node: any, ctx: EvalContext): Record<string, any> {
    const obj: Record<string, any> = {}
    
    node.properties.forEach((prop: any) => {
      const key = prop.key.type === 'Identifier' 
        ? prop.key.name 
        : this.walk(prop.key, ctx)
      const value = this.walk(prop.value, ctx)
      obj[key] = value
    })

    return obj
  }
}
```

#### 3.3.3 å®‰å…¨æ²™ç®±å¢å¼º

```typescript
// src/evaluator/sandbox.ts

/**
 * åˆ›å»ºå®‰å…¨æ‰§è¡Œç¯å¢ƒ
 */
export class Sandbox {
  private allowedGlobals: Set<string>

  constructor(allowedGlobals: string[] = []) {
    this.allowedGlobals = new Set([
      'undefined',
      'null',
      'true',
      'false',
      'NaN',
      'Infinity',
      ...allowedGlobals
    ])
  }

  /**
   * åœ¨æ²™ç®±ä¸­æ‰§è¡Œä»£ç 
   */
  execute(code: string, context: Record<string, any>): any {
    // åˆ›å»ºå—é™çš„å…¨å±€å¯¹è±¡
    const sandbox = this.createSandbox(context)
    
    try {
      // ä½¿ç”¨withåˆ›å»ºä½œç”¨åŸŸï¼ˆæ³¨æ„ï¼šä¸¥æ ¼æ¨¡å¼ä¸‹ä¸å¯ç”¨ï¼‰
      const fn = new Function(...Object.keys(sandbox), `return (${code})`)
      return fn(...Object.values(sandbox))
    } catch (error) {
      console.error('Sandbox execution error:', error)
      throw error
    }
  }

  /**
   * åˆ›å»ºæ²™ç®±ç¯å¢ƒ
   */
  private createSandbox(context: Record<string, any>): Record<string, any> {
    const sandbox: Record<string, any> = {}

    // æ³¨å…¥ä¸Šä¸‹æ–‡
    Object.assign(sandbox, context)

    // æ³¨å…¥å…è®¸çš„å…¨å±€å˜é‡
    this.allowedGlobals.forEach(name => {
      if (name in globalThis) {
        sandbox[name] = (globalThis as any)[name]
      }
    })

    return sandbox
  }
}
```

### 3.4 å•å…ƒæµ‹è¯•

```typescript
// test/unit/parser.test.ts

import { describe, it, expect } from 'vitest'
import { parseDSL } from '../src/parser'
import type { DSLNode, RuntimeContext } from '../src/types'

describe('Parser', () => {
  const createContext = (): RuntimeContext => ({
    tokens: {},
    state: { count: 0, items: ['a', 'b', 'c'] },
    props: {},
    rootState: {},
    emit: () => {},
    getRef: () => null
  })

  describe('basic parsing', () => {
    it('should parse simple node', () => {
      const dsl: DSLNode = {
        type: 'Button',
        props: { text: 'Click' }
      }

      const vnodes = parseDSL(dsl, createContext())
      
      expect(vnodes).toHaveLength(1)
      expect(vnodes[0].type).toBe('Button')
      expect(vnodes[0].props.text).toBe('Click')
    })
  })

  describe('conditional rendering', () => {
    it('should render when condition is true', () => {
      const dsl: DSLNode = {
        type: 'Button',
        if: '$state.count === 0'
      }

      const vnodes = parseDSL(dsl, createContext())
      expect(vnodes).toHaveLength(1)
    })

    it('should not render when condition is false', () => {
      const dsl: DSLNode = {
        type: 'Button',
        if: '$state.count > 0'
      }

      const vnodes = parseDSL(dsl, createContext())
      expect(vnodes).toHaveLength(0)
    })
  })

  describe('list rendering', () => {
    it('should render list items', () => {
      const dsl: DSLNode = {
        type: 'ListItem',
        for: 'item in $state.items',
        props: { text: '$state.item' }
      }

      const vnodes = parseDSL(dsl, createContext())
      expect(vnodes).toHaveLength(3)
    })

    it('should support index in for loop', () => {
      const dsl: DSLNode = {
        type: 'ListItem',
        for: 'item, index in $state.items'
      }

      const vnodes = parseDSL(dsl, createContext())
      expect(vnodes).toHaveLength(3)
    })
  })
})

// test/unit/evaluator.test.ts

import { describe, it, expect } from 'vitest'
import { compileExpression } from '../src/evaluator'

describe('Evaluator', () => {
  const createContext = () => ({
    __state: { count: 10, name: 'test' },
    __props: { value: 5 },
    __context: {},
    tokens: { 'color.primary': '#1677ff' }
  })

  it('should evaluate simple expression', () => {
    const fn = compileExpression('$state.count + 1')
    expect(fn(createContext())).toBe(11)
  })

  it('should evaluate comparison', () => {
    const fn = compileExpression('$state.count > 5')
    expect(fn(createContext())).toBe(true)
  })

  it('should evaluate ternary operator', () => {
    const fn = compileExpression('$state.count > 5 ? "big" : "small"')
    expect(fn(createContext())).toBe('big')
  })

  it('should access nested properties', () => {
    const ctx = {
      __state: { user: { name: 'Alice' } },
      __props: {},
      __context: {},
      tokens: {}
    }
    const fn = compileExpression('$state.user.name')
    expect(fn(ctx)).toBe('Alice')
  })

  it('should handle undefined gracefully', () => {
    const fn = compileExpression('$state.missing')
    expect(fn(createContext())).toBeUndefined()
  })
})
```

---

**ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†: Week 3...**

ï¼ˆå†…å®¹è¿‡é•¿ï¼Œæˆ‘ä¼šç»§ç»­åˆ›å»ºWeek 3çš„æ–‡æ¡£ï¼‰
# é˜¶æ®µ1 Week 3: Binder + Coreå¼•æ“é›†æˆ

> æœ¬æ–‡æ¡£æ˜¯ [01-PHASE-1-CORE.md](./01-PHASE-1-CORE.md) çš„ç»­ç¯‡

---

## å››ã€Week 3: Binder + Rendereræ¥å£ + Coreé›†æˆ

### 4.1 Binderå®ç°

#### 4.1.1 æ ¸å¿ƒBinderç±»

```typescript
// src/binder/binder.ts

import { effect } from '../reactive'
import { compileExpression } from '../evaluator'
import type { VNode, DSLExpression } from '../types'

/**
 * ç»‘å®šæ¸…ç†å‡½æ•°é›†åˆ
 */
const binderCleanups = new WeakMap<VNode, Array<() => void>>()

/**
 * ç»‘å®šå™¨ç±»
 */
export class Binder {
  /**
   * ç»‘å®šVNode
   */
  bind(vnode: VNode): void {
    const cleanups: Array<() => void> = []

    // 1. ç»‘å®šprops
    this.bindProps(vnode, cleanups)

    // 2. ç»‘å®šstyle
    this.bindStyle(vnode, cleanups)

    // 3. ç»‘å®ševents
    this.bindEvents(vnode, cleanups)

    // 4. ç»‘å®šchildren
    vnode.children.forEach(child => this.bind(child))

    // å­˜å‚¨æ¸…ç†å‡½æ•°
    binderCleanups.set(vnode, cleanups)
  }

  /**
   * è§£é™¤ç»‘å®š
   */
  unbind(vnode: VNode): void {
    // æ¸…ç†å½“å‰èŠ‚ç‚¹
    const cleanups = binderCleanups.get(vnode)
    if (cleanups) {
      cleanups.forEach(cleanup => cleanup())
      binderCleanups.delete(vnode)
    }

    // é€’å½’æ¸…ç†children
    vnode.children.forEach(child => this.unbind(child))
  }

  /**
   * ç»‘å®šProps
   */
  private bindProps(vnode: VNode, cleanups: Array<() => void>): void {
    const { props } = vnode.raw
    if (!props) return

    for (const [key, value] of Object.entries(props)) {
      if (this.isExpression(value)) {
        // åŠ¨æ€ç»‘å®š
        this.bindDynamicProp(vnode, key, value as string, cleanups)
      } else if (this.isTokenReference(value)) {
        // Tokenå¼•ç”¨
        vnode.props[key] = this.resolveToken(value as string, vnode)
      } else {
        // é™æ€å€¼
        vnode.props[key] = value
      }
    }
  }

  /**
   * ç»‘å®šåŠ¨æ€prop
   */
  private bindDynamicProp(
    vnode: VNode,
    key: string,
    expr: string,
    cleanups: Array<() => void>
  ): void {
    const compiled = compileExpression(expr)
    const ctx = vnode.ctx

    const cleanup = effect(() => {
      try {
        vnode.props[key] = compiled({
          __state: ctx.state,
          __props: ctx.props,
          __context: ctx,
          tokens: ctx.tokens
        })
        
        // è§¦å‘æ›´æ–°
        ctx.emit('__update__', { vnodeId: vnode.id, type: 'props', key })
      } catch (error) {
        console.error(`Error binding prop "${key}":`, error)
      }
    })

    cleanups.push(cleanup)
  }

  /**
   * ç»‘å®šStyle
   */
  private bindStyle(vnode: VNode, cleanups: Array<() => void>): void {
    const { style } = vnode.raw
    if (!style) return

    for (const [key, value] of Object.entries(style)) {
      if (this.isExpression(value)) {
        // åŠ¨æ€ç»‘å®š
        this.bindDynamicStyle(vnode, key, value as string, cleanups)
      } else if (this.isTokenReference(value)) {
        // Tokenå¼•ç”¨
        vnode.style[key] = this.resolveToken(value as string, vnode)
      } else {
        // é™æ€å€¼
        vnode.style[key] = value as string
      }
    }
  }

  /**
   * ç»‘å®šåŠ¨æ€style
   */
  private bindDynamicStyle(
    vnode: VNode,
    key: string,
    expr: string,
    cleanups: Array<() => void>
  ): void {
    const compiled = compileExpression(expr)
    const ctx = vnode.ctx

    const cleanup = effect(() => {
      try {
        vnode.style[key] = compiled({
          __state: ctx.state,
          __props: ctx.props,
          __context: ctx,
          tokens: ctx.tokens
        })
        
        // è§¦å‘æ›´æ–°
        ctx.emit('__update__', { vnodeId: vnode.id, type: 'style', key })
      } catch (error) {
        console.error(`Error binding style "${key}":`, error)
      }
    })

    cleanups.push(cleanup)
  }

  /**
   * ç»‘å®šEvents
   */
  private bindEvents(vnode: VNode, cleanups: Array<() => void>): void {
    const { events } = vnode.raw
    if (!events) return

    for (const [eventName, handler] of Object.entries(events)) {
      if (typeof handler === 'function') {
        // ç›´æ¥ä½¿ç”¨å‡½æ•°
        vnode.events[eventName] = handler
      } else if (typeof handler === 'string') {
        // ç¼–è¯‘è¡¨è¾¾å¼ä¸ºå‡½æ•°
        vnode.events[eventName] = this.compileEventHandler(handler, vnode)
      }
    }
  }

  /**
   * ç¼–è¯‘äº‹ä»¶å¤„ç†å™¨
   */
  private compileEventHandler(expr: string, vnode: VNode): Function {
    const compiled = compileExpression(expr)
    const ctx = vnode.ctx

    return (event: Event) => {
      try {
        return compiled({
          __state: ctx.state,
          __props: ctx.props,
          __context: ctx,
          tokens: ctx.tokens,
          __event: event
        })
      } catch (error) {
        console.error(`Error handling event:`, error)
      }
    }
  }

  /**
   * åˆ¤æ–­æ˜¯å¦ä¸ºè¡¨è¾¾å¼
   */
  private isExpression(value: any): boolean {
    return typeof value === 'string' && value.includes('$')
  }

  /**
   * åˆ¤æ–­æ˜¯å¦ä¸ºTokenå¼•ç”¨
   */
  private isTokenReference(value: any): boolean {
    return typeof value === 'string' && 
           value.startsWith('{') && 
           value.endsWith('}')
  }

  /**
   * è§£æTokenå¼•ç”¨
   */
  private resolveToken(reference: string, vnode: VNode): string {
    const tokenKey = reference.slice(1, -1)  // ç§»é™¤{}
    const tokenValue = vnode.ctx.tokens[tokenKey]

    if (tokenValue === undefined) {
      console.warn(`Token not found: ${tokenKey}`)
      // è¿”å›CSSå˜é‡å¼•ç”¨
      return `var(--vjs-${tokenKey.replace(/\./g, '-')})`
    }

    return String(tokenValue)
  }
}

/**
 * ä¾¿æ·å‡½æ•°
 */
export function bindVNode(vnode: VNode): void {
  const binder = new Binder()
  binder.bind(vnode)
}

export function unbindVNode(vnode: VNode): void {
  const binder = new Binder()
  binder.unbind(vnode)
}
```

### 4.2 Rendereræ¥å£å®šä¹‰

```typescript
// src/renderer/renderer.ts

import type { VNode } from '../types'

/**
 * æ¸²æŸ“å¥æŸ„
 */
export interface RenderHandle {
  id: string
  vnode: VNode
  instance?: any  // æ¡†æ¶ç‰¹å®šçš„å®ä¾‹
}

/**
 * æ¸²æŸ“å™¨æ¥å£
 */
export interface Renderer {
  /**
   * æŒ‚è½½VNodeåˆ°å®¹å™¨
   */
  mount(container: Element, vnode: VNode): RenderHandle

  /**
   * æ›´æ–°å·²æŒ‚è½½çš„VNode
   */
  update(handle: RenderHandle, vnode: VNode): void

  /**
   * å¸è½½VNode
   */
  unmount(handle: RenderHandle): void

  /**
   * æ‰¹é‡æ›´æ–°ï¼ˆå¯é€‰ï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼‰
   */
  batchUpdate?(updates: UpdateBatch): void
}

/**
 * æ›´æ–°æ‰¹æ¬¡
 */
export interface UpdateBatch {
  updates: Array<{
    handle: RenderHandle
    vnode: VNode
  }>
}

/**
 * VNodeå·¥å‚å‡½æ•°
 */
export function createVNode(
  type: string,
  props?: Record<string, any>,
  children?: VNode[]
): Partial<VNode> {
  return {
    type,
    props: props || {},
    style: {},
    events: {},
    children: children || []
  }
}
```

### 4.3 Coreå¼•æ“ä¸»ç±»

```typescript
// src/core.ts

import { reactive } from './reactive'
import { Parser } from './parser'
import { Binder } from './binder'
import { TokenRuntime } from './token'
import type {
  DSLNode,
  VNode,
  RuntimeContext,
  Renderer,
  RenderHandle,
  FlatTokenMap
} from './types'

/**
 * Coreé…ç½®
 */
export interface CoreConfig {
  tokens: FlatTokenMap
  initialState?: Record<string, any>
  renderer: Renderer
}

/**
 * æ¸²æŸ“å®ä¾‹
 */
export interface RenderInstance {
  vnode: VNode
  handle: RenderHandle
  update: (state?: Record<string, any>) => void
  unmount: () => void
}

/**
 * Coreå¼•æ“ä¸»ç±»
 */
export class Core {
  private tokenRuntime: TokenRuntime
  private state: Record<string, any>
  private parser: Parser
  private binder: Binder
  private renderer: Renderer
  private instances = new Map<string, RenderInstance>()
  private updateQueue = new Set<string>()
  private updating = false

  constructor(config: CoreConfig) {
    // åˆå§‹åŒ–Tokenè¿è¡Œæ—¶
    this.tokenRuntime = new TokenRuntime({
      tokens: config.tokens
    })

    // åˆå§‹åŒ–å“åº”å¼çŠ¶æ€
    this.state = reactive(config.initialState || {})

    // åˆå§‹åŒ–å­ç³»ç»Ÿ
    this.parser = new Parser()
    this.binder = new Binder()
    this.renderer = config.renderer

    // ç›‘å¬Tokenå˜åŒ–
    this.tokenRuntime.onChange(() => {
      this.triggerUpdate()
    })
  }

  /**
   * æ¸²æŸ“DSLåˆ°å®¹å™¨
   */
  render(
    dsl: DSLNode,
    container: Element,
    props: Record<string, any> = {}
  ): RenderInstance {
    // åˆ›å»ºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡
    const context = this.createContext(props)

    // 1. è§£æDSL
    const vnodes = this.parser.parse(dsl, context)
    if (vnodes.length === 0) {
      throw new Error('DSL parsing resulted in no nodes')
    }

    const rootVNode = vnodes[0]

    // 2. ç»‘å®šæ•°æ®
    this.binder.bind(rootVNode)

    // 3. æ¸²æŸ“
    const handle = this.renderer.mount(container, rootVNode)

    // 4. åˆ›å»ºå®ä¾‹
    const instance: RenderInstance = {
      vnode: rootVNode,
      handle,
      update: (state) => this.updateInstance(handle.id, state),
      unmount: () => this.unmountInstance(handle.id)
    }

    // ä¿å­˜å®ä¾‹
    this.instances.set(handle.id, instance)

    return instance
  }

  /**
   * åˆ›å»ºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡
   */
  private createContext(props: Record<string, any>): RuntimeContext {
    return {
      tokens: this.tokenRuntime['tokens'],  // è®¿é—®privateå±æ€§
      state: this.state,
      props,
      rootState: this.state,
      emit: (event: string, payload?: any) => {
        this.handleEmit(event, payload)
      },
      getRef: (ref: string) => {
        return this.getRef(ref)
      }
    }
  }

  /**
   * å¤„ç†äº‹ä»¶å‘å°„
   */
  private handleEmit(event: string, payload?: any): void {
    if (event === '__update__') {
      // å†…éƒ¨æ›´æ–°äº‹ä»¶
      this.scheduleUpdate(payload?.vnodeId)
    } else {
      // ç”¨æˆ·è‡ªå®šä¹‰äº‹ä»¶
      console.log('Event emitted:', event, payload)
    }
  }

  /**
   * è°ƒåº¦æ›´æ–°
   */
  private scheduleUpdate(vnodeId?: string): void {
    if (vnodeId) {
      this.updateQueue.add(vnodeId)
    }

    if (!this.updating) {
      this.updating = true
      // ä½¿ç”¨requestAnimationFrameæ‰¹é‡æ›´æ–°
      requestAnimationFrame(() => {
        this.flushUpdates()
        this.updating = false
      })
    }
  }

  /**
   * åˆ·æ–°æ›´æ–°é˜Ÿåˆ—
   */
  private flushUpdates(): void {
    this.updateQueue.forEach(vnodeId => {
      // æ‰¾åˆ°åŒ…å«è¯¥vnodeçš„instance
      this.instances.forEach(instance => {
        if (this.findVNode(instance.vnode, vnodeId)) {
          this.renderer.update(instance.handle, instance.vnode)
        }
      })
    })

    this.updateQueue.clear()
  }

  /**
   * æŸ¥æ‰¾VNode
   */
  private findVNode(vnode: VNode, id: string): VNode | null {
    if (vnode.id === id) return vnode
    
    for (const child of vnode.children) {
      const found = this.findVNode(child, id)
      if (found) return found
    }
    
    return null
  }

  /**
   * è§¦å‘å…¨é‡æ›´æ–°
   */
  private triggerUpdate(): void {
    this.instances.forEach(instance => {
      this.renderer.update(instance.handle, instance.vnode)
    })
  }

  /**
   * æ›´æ–°å®ä¾‹çŠ¶æ€
   */
  private updateInstance(instanceId: string, state?: Record<string, any>): void {
    if (state) {
      Object.assign(this.state, state)
    }
    
    const instance = this.instances.get(instanceId)
    if (instance) {
      this.renderer.update(instance.handle, instance.vnode)
    }
  }

  /**
   * å¸è½½å®ä¾‹
   */
  private unmountInstance(instanceId: string): void {
    const instance = this.instances.get(instanceId)
    if (!instance) return

    // è§£é™¤ç»‘å®š
    this.binder.unbind(instance.vnode)

    // å¸è½½æ¸²æŸ“
    this.renderer.unmount(instance.handle)

    // ç§»é™¤å®ä¾‹
    this.instances.delete(instanceId)
  }

  /**
   * è·å–å¼•ç”¨
   */
  private getRef(ref: string): any {
    // TODO: å®ç°refæŸ¥æ‰¾
    return null
  }

  /**
   * è·å–çŠ¶æ€
   */
  getState(): Record<string, any> {
    return this.state
  }

  /**
   * è®¾ç½®çŠ¶æ€
   */
  setState(updates: Record<string, any>): void {
    Object.assign(this.state, updates)
  }

  /**
   * è·å–Tokenè¿è¡Œæ—¶
   */
  getTokenRuntime(): TokenRuntime {
    return this.tokenRuntime
  }

  /**
   * é”€æ¯Coreå®ä¾‹
   */
  destroy(): void {
    // å¸è½½æ‰€æœ‰å®ä¾‹
    Array.from(this.instances.keys()).forEach(id => {
      this.unmountInstance(id)
    })

    // æ¸…ç†Tokenè¿è¡Œæ—¶
    this.tokenRuntime.destroy()
  }
}

/**
 * åˆ›å»ºCoreå®ä¾‹
 */
export function createCore(config: CoreConfig): Core {
  return new Core(config)
}
```

### 4.4 Coreå…¥å£

```typescript
// src/index.ts

// ç±»å‹å¯¼å‡º
export type {
  // DSLç±»å‹
  DSLNode,
  DSLExpression,
  MotionConfig,
  
  // VNodeç±»å‹
  VNode,
  RuntimeContext,
  
  // Tokenç±»å‹
  TokenDefinition,
  TokenMap,
  FlatTokenMap,
  TokenCompileOptions,
  TokenRuntimeConfig,
  
  // Rendererç±»å‹
  Renderer,
  RenderHandle,
  UpdateBatch,
  
  // Coreç±»å‹
  CoreConfig,
  RenderInstance
} from './types'

// æ ¸å¿ƒAPIå¯¼å‡º
export { Core, createCore } from './core'
export { Parser, parseDSL } from './parser'
export { Binder, bindVNode, unbindVNode } from './binder'
export { compileExpression, clearExpressionCache } from './evaluator'
export { TokenCompiler, TokenRuntime, compileTokens, createTokenRuntime } from './token'
export { reactive, effect, computed, watch } from './reactive'
export { createVNode } from './renderer'

// é»˜è®¤å¯¼å‡º
export default {
  createCore,
  parseDSL,
  bindVNode,
  compileExpression,
  compileTokens,
  createTokenRuntime,
  reactive,
  effect,
  computed,
  watch
}
```

### 4.5 åŒ…é…ç½®

```json
// packages/core/package.json
{
  "name": "@vjs-ui/core",
  "version": "0.1.0",
  "description": "VJS-UI Core Engine - DSL + Token + Reactive System",
  "type": "module",
  "main": "./dist/index.cjs.js",
  "module": "./dist/index.esm.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "import": "./dist/index.esm.js",
      "require": "./dist/index.cjs.js",
      "types": "./dist/index.d.ts"
    },
    "./package.json": "./package.json"
  },
  "files": [
    "dist"
  ],
  "scripts": {
    "dev": "rollup -c -w",
    "build": "rollup -c && tsc --declaration --emitDeclarationOnly --outDir dist",
    "test": "vitest",
    "test:coverage": "vitest --coverage",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "jsep": "^1.3.8"
  },
  "devDependencies": {
    "@types/jsep": "^1.3.5",
    "@rollup/plugin-node-resolve": "^15.2.3",
    "@rollup/plugin-typescript": "^11.1.5",
    "rollup": "^4.6.0",
    "typescript": "^5.3.2",
    "vitest": "^1.0.0",
    "@vitest/coverage-v8": "^1.0.0"
  },
  "keywords": [
    "ui",
    "dsl",
    "token",
    "reactive",
    "framework-agnostic"
  ],
  "license": "MIT"
}
```

### 4.6 Rollupé…ç½®

```typescript
// packages/core/rollup.config.ts

import { defineConfig } from 'rollup'
import typescript from '@rollup/plugin-typescript'
import resolve from '@rollup/plugin-node-resolve'

export default defineConfig({
  input: 'src/index.ts',
  external: ['jsep'],
  plugins: [
    resolve(),
    typescript({
      tsconfig: './tsconfig.json',
      declaration: false  // ç”±å•ç‹¬çš„tscå‘½ä»¤ç”Ÿæˆ
    })
  ],
  output: [
    {
      file: 'dist/index.esm.js',
      format: 'esm',
      sourcemap: true
    },
    {
      file: 'dist/index.cjs.js',
      format: 'cjs',
      sourcemap: true
    },
    {
      file: 'dist/index.umd.js',
      format: 'umd',
      name: 'VjsUICore',
      sourcemap: true,
      globals: {
        jsep: 'jsep'
      }
    }
  ]
})
```

### 4.7 é›†æˆæµ‹è¯•

```typescript
// test/integration/core.test.ts

import { describe, it, expect, beforeEach } from 'vitest'
import { createCore } from '../src/core'
import type { DSLNode, Renderer, RenderHandle, VNode } from '../src/types'

// Mock Renderer
class MockRenderer implements Renderer {
  private mounts = new Map<string, VNode>()

  mount(container: Element, vnode: VNode): RenderHandle {
    const id = vnode.id
    this.mounts.set(id, vnode)
    return { id, vnode }
  }

  update(handle: RenderHandle, vnode: VNode): void {
    this.mounts.set(handle.id, vnode)
  }

  unmount(handle: RenderHandle): void {
    this.mounts.delete(handle.id)
  }

  getMounted(id: string): VNode | undefined {
    return this.mounts.get(id)
  }
}

describe('Core Integration', () => {
  let core: ReturnType<typeof createCore>
  let renderer: MockRenderer
  let container: HTMLDivElement

  beforeEach(() => {
    renderer = new MockRenderer()
    container = document.createElement('div')
    
    core = createCore({
      tokens: {
        'color.primary': '#1677ff',
        'spacing.md': '16px'
      },
      initialState: {
        count: 0,
        message: 'Hello'
      },
      renderer
    })
  })

  it('should render simple DSL', () => {
    const dsl: DSLNode = {
      type: 'Button',
      props: {
        text: 'Click'
      }
    }

    const instance = core.render(dsl, container)
    
    expect(instance).toBeDefined()
    expect(instance.vnode.type).toBe('Button')
    expect(instance.vnode.props.text).toBe('Click')
  })

  it('should bind reactive state', () => {
    const dsl: DSLNode = {
      type: 'Text',
      props: {
        content: '$state.message'
      }
    }

    const instance = core.render(dsl, container)
    
    expect(instance.vnode.props.content).toBe('Hello')
    
    // æ›´æ–°çŠ¶æ€
    core.setState({ message: 'World' })
    
    // ç­‰å¾…ä¸‹ä¸€å¸§
    return new Promise(resolve => {
      requestAnimationFrame(() => {
        const mounted = renderer.getMounted(instance.handle.id)
        expect(mounted?.props.content).toBe('World')
        resolve(undefined)
      })
    })
  })

  it('should resolve token references', () => {
    const dsl: DSLNode = {
      type: 'Box',
      style: {
        color: '{color.primary}',
        padding: '{spacing.md}'
      }
    }

    const instance = core.render(dsl, container)
    
    expect(instance.vnode.style.color).toBe('#1677ff')
    expect(instance.vnode.style.padding).toBe('16px')
  })

  it('should handle conditional rendering', () => {
    const dsl: DSLNode = {
      type: 'Alert',
      if: '$state.count > 0'
    }

    const instance = core.render(dsl, container)
    
    // åˆå§‹ä¸æ¸²æŸ“ï¼ˆcount = 0ï¼‰
    expect(instance.vnode.type).toBe('Alert')
    
    core.setState({ count: 1 })
    
    // æ›´æ–°ååº”è¯¥æ¸²æŸ“
    return new Promise(resolve => {
      requestAnimationFrame(() => {
        resolve(undefined)
      })
    })
  })

  it('should unmount properly', () => {
    const dsl: DSLNode = {
      type: 'Button'
    }

    const instance = core.render(dsl, container)
    const handleId = instance.handle.id
    
    expect(renderer.getMounted(handleId)).toBeDefined()
    
    instance.unmount()
    
    expect(renderer.getMounted(handleId)).toBeUndefined()
  })
})
```

---

## äº”ã€æµ‹è¯•ç­–ç•¥

### 5.1 å•å…ƒæµ‹è¯•æ¸…å•

- [x] Tokenç³»ç»Ÿ
  - [x] Tokenç¼–è¯‘å™¨
  - [x] Tokenè¿è¡Œæ—¶
  - [x] Tokenå¼•ç”¨è§£æ
  
- [x] å“åº”å¼ç³»ç»Ÿ
  - [x] reactive
  - [x] effect
  - [x] computed
  - [x] watch
  
- [x] DSLè§£æå™¨
  - [x] åŸºç¡€è§£æ
  - [x] æ¡ä»¶æ¸²æŸ“
  - [x] åˆ—è¡¨æ¸²æŸ“
  - [x] æ’æ§½å¤„ç†
  
- [x] è¡¨è¾¾å¼æ±‚å€¼å™¨
  - [x] è¡¨è¾¾å¼ç¼–è¯‘
  - [x] ASTéå†
  - [x] å®‰å…¨æ²™ç®±
  
- [x] ç»‘å®šå™¨
  - [x] Propsç»‘å®š
  - [x] Styleç»‘å®š
  - [x] Eventsç»‘å®š
  - [x] æ¸…ç†æœºåˆ¶

### 5.2 é›†æˆæµ‹è¯•æ¸…å•

- [x] Coreå¼•æ“é›†æˆ
- [x] æ¸²æŸ“æµç¨‹
- [x] çŠ¶æ€æ›´æ–°
- [x] Tokenåˆ‡æ¢
- [x] å¸è½½æ¸…ç†

### 5.3 æ€§èƒ½æµ‹è¯•

```typescript
// test/benchmarks/reactive.bench.ts

import { bench, describe } from 'vitest'
import { reactive, effect } from '../src/reactive'

describe('Reactive Performance', () => {
  bench('reactive object creation', () => {
    reactive({ count: 0, nested: { value: 1 } })
  })

  bench('effect execution', () => {
    const obj = reactive({ count: 0 })
    effect(() => obj.count)
  })

  bench('deep reactive access', () => {
    const obj = reactive({ a: { b: { c: { d: 0 } } } })
    effect(() => obj.a.b.c.d)
  })
})
```

---

## å…­ã€æ€§èƒ½åŸºå‡†

### 6.1 ç›®æ ‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|--------|
| åŒ…ä½“ç§¯(gzipped) | < 50KB |
| è§£æ1000ä¸ªèŠ‚ç‚¹ | < 100ms |
| ç»‘å®š1000ä¸ªè¡¨è¾¾å¼ | < 50ms |
| å“åº”å¼æ›´æ–°å»¶è¿Ÿ | < 16ms (60fps) |

### 6.2 ä¼˜åŒ–ç­–ç•¥

1. **è¡¨è¾¾å¼ç¼“å­˜**: å·²ç¼–è¯‘çš„è¡¨è¾¾å¼ç¼“å­˜å¤ç”¨
2. **æ‰¹é‡æ›´æ–°**: requestAnimationFrameæ‰¹å¤„ç†
3. **ä¾èµ–è¿½è¸ª**: ç»†ç²’åº¦çš„å“åº”å¼æ›´æ–°
4. **Tree-shaking**: ESMæ¨¡å—åŒ–è¾“å‡º

---

## ä¸ƒã€ä¸‹ä¸€æ­¥

é˜¶æ®µ1å®Œæˆåï¼Œè¿›å…¥é˜¶æ®µ2ï¼š
- [02-PHASE-2-VUE.md](./02-PHASE-2-VUE.md) - Vueé€‚é…å±‚å®ç°

**å½“å‰çŠ¶æ€**: ğŸ“‹ Week 3 è§„åˆ’å®Œæˆ
# é˜¶æ®µ2: Vueé€‚é…å±‚è¯¦ç»†å®æ–½æ–‡æ¡£

> **æ—¶é—´**: 2å‘¨
> **ç›®æ ‡**: åŸºäºCoreå¼•æ“å®ç°Vue 3é€‚é…å™¨ï¼Œåˆ›å»º5ä¸ªæ ¸å¿ƒç»„ä»¶
> **ä¾èµ–**: é˜¶æ®µ1å®Œæˆ

---

## ä¸€ã€æ€»è§ˆ

### 1.1 ç›®æ ‡
- å®ç°Vue 3æ¸²æŸ“å™¨
- åˆ›å»ºVueç»„åˆå¼å‡½æ•°
- å®ç°5ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆButton, Input, Card, Dialog, Tableï¼‰
- å»ºç«‹ç»„ä»¶å¼€å‘æ¨¡å¼
- å®Œå–„æµ‹è¯•ä¸æ–‡æ¡£

### 1.2 åŒ…ç»“æ„

```
@vjs-ui/vue/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ adapter/            # Vueé€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ VueRenderer.ts
â”‚   â”‚   â”œâ”€â”€ component-registry.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useCore.ts
â”‚   â”‚   â”œâ”€â”€ useDSL.ts
â”‚   â”‚   â”œâ”€â”€ useToken.ts
â”‚   â”‚   â”œâ”€â”€ useTheme.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.dsl.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.styles.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â”œâ”€â”€ Card/
â”‚   â”‚   â”œâ”€â”€ Dialog/
â”‚   â”‚   â””â”€â”€ Table/
â”‚   â”‚
â”‚   â”œâ”€â”€ directives/         # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ v-dsl.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ props.ts
â”‚   â”‚   â”œâ”€â”€ slots.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ styles/                 # æ ·å¼
â”‚   â”œâ”€â”€ base.css
â”‚   â”œâ”€â”€ components/
â”‚   â””â”€â”€ themes/
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## äºŒã€Week 1: Vueæ¸²æŸ“å™¨ + ç»„ä»¶ç³»ç»Ÿ

### 2.1 Vueæ¸²æŸ“å™¨å®ç°

```typescript
// src/adapter/VueRenderer.ts

import { createApp, h, type VNode as VueVNode, type App } from 'vue'
import type { Renderer, RenderHandle, VNode } from '@vjs-ui/core'
import { ComponentRegistry } from './component-registry'

/**
 * Vueæ¸²æŸ“å¥æŸ„
 */
interface VueRenderHandle extends RenderHandle {
  app: App
  container: Element
}

/**
 * Vueæ¸²æŸ“å™¨
 */
export class VueRenderer implements Renderer {
  private registry: ComponentRegistry

  constructor() {
    this.registry = new ComponentRegistry()
  }

  /**
   * æŒ‚è½½VNode
   */
  mount(container: Element, vnode: VNode): VueRenderHandle {
    // åˆ›å»ºVueåº”ç”¨
    const app = createApp({
      name: 'VjsUIRoot',
      setup() {
        return () => this.buildVNode(vnode)
      }
    })

    // æ³¨å†Œå…¨å±€ç»„ä»¶
    this.registry.registerToApp(app)

    // æŒ‚è½½
    app.mount(container)

    return {
      id: vnode.id,
      vnode,
      app,
      container
    }
  }

  /**
   * æ›´æ–°VNode
   */
  update(handle: VueRenderHandle, vnode: VNode): void {
    // Vueçš„å“åº”å¼ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†æ›´æ–°
    // è¿™é‡Œåªéœ€è¦ç¡®ä¿vnodeå¼•ç”¨è¢«æ›´æ–°
    handle.vnode = vnode
  }

  /**
   * å¸è½½VNode
   */
  unmount(handle: VueRenderHandle): void {
    handle.app.unmount()
  }

  /**
   * æ„å»ºVue VNode
   */
  private buildVNode(vnode: VNode): VueVNode | string {
    // æ–‡æœ¬èŠ‚ç‚¹
    if (vnode.type === 'Text') {
      return vnode.props.text || ''
    }

    // è·å–ç»„ä»¶
    const component = this.registry.getComponent(vnode.type)
    if (!component) {
      console.warn(`Component not registered: ${vnode.type}`)
      return h('div', `[Unknown Component: ${vnode.type}]`)
    }

    // æ„å»ºprops
    const props = {
      ...vnode.props,
      style: vnode.style
    }

    // ç»‘å®šäº‹ä»¶
    Object.entries(vnode.events).forEach(([name, handler]) => {
      const eventName = `on${name.charAt(0).toUpperCase()}${name.slice(1)}`
      props[eventName] = handler
    })

    // æ„å»ºchildren
    const children = vnode.children.map(child => this.buildVNode(child))

    return h(component, props, children.length > 0 ? children : undefined)
  }

  /**
   * æ³¨å†Œç»„ä»¶
   */
  registerComponent(name: string, component: any): void {
    this.registry.register(name, component)
  }

  /**
   * æ³¨å†Œå¤šä¸ªç»„ä»¶
   */
  registerComponents(components: Record<string, any>): void {
    this.registry.registerMultiple(components)
  }
}

/**
 * åˆ›å»ºVueæ¸²æŸ“å™¨
 */
export function createVueRenderer(): VueRenderer {
  return new VueRenderer()
}
```

```typescript
// src/adapter/component-registry.ts

import type { App, Component } from 'vue'

/**
 * ç»„ä»¶æ³¨å†Œè¡¨
 */
export class ComponentRegistry {
  private components = new Map<string, Component>()

  /**
   * æ³¨å†Œç»„ä»¶
   */
  register(name: string, component: Component): void {
    this.components.set(name, component)
  }

  /**
   * æ‰¹é‡æ³¨å†Œ
   */
  registerMultiple(components: Record<string, Component>): void {
    Object.entries(components).forEach(([name, component]) => {
      this.register(name, component)
    })
  }

  /**
   * è·å–ç»„ä»¶
   */
  getComponent(name: string): Component | undefined {
    return this.components.get(name)
  }

  /**
   * æ³¨å†Œåˆ°Vueåº”ç”¨
   */
  registerToApp(app: App): void {
    this.components.forEach((component, name) => {
      app.component(name, component)
    })
  }

  /**
   * æ¸…é™¤æ‰€æœ‰æ³¨å†Œ
   */
  clear(): void {
    this.components.clear()
  }
}
```

### 2.2 ç»„åˆå¼å‡½æ•°

```typescript
// src/composables/useCore.ts

import { inject, provide, type InjectionKey } from 'vue'
import { Core } from '@vjs-ui/core'

const CoreSymbol: InjectionKey<Core> = Symbol('vjs-ui-core')

/**
 * æä¾›Coreå®ä¾‹
 */
export function provideCore(core: Core): void {
  provide(CoreSymbol, core)
}

/**
 * ä½¿ç”¨Coreå®ä¾‹
 */
export function useCore(): Core {
  const core = inject(CoreSymbol)
  if (!core) {
    throw new Error('Core not provided. Did you forget to use provideCore()?')
  }
  return core
}
```

```typescript
// src/composables/useDSL.ts

import { ref, watch, onUnmounted, type Ref } from 'vue'
import type { DSLNode, RenderInstance } from '@vjs-ui/core'
import { useCore } from './useCore'

/**
 * DSLæ¸²æŸ“ç»„åˆå‡½æ•°
 */
export function useDSL(dsl: Ref<DSLNode> | DSLNode) {
  const core = useCore()
  const instance = ref<RenderInstance | null>(null)
  const containerRef = ref<HTMLElement>()

  // æ¸²æŸ“DSL
  const render = (props?: Record<string, any>) => {
    if (!containerRef.value) return
    
    const dslValue = typeof dsl === 'object' && 'value' in dsl ? dsl.value : dsl
    instance.value = core.render(dslValue, containerRef.value, props)
  }

  // ç›‘å¬DSLå˜åŒ–
  if (typeof dsl === 'object' && 'value' in dsl) {
    watch(dsl, () => {
      if (instance.value) {
        instance.value.unmount()
      }
      render()
    })
  }

  // æ¸…ç†
  onUnmounted(() => {
    if (instance.value) {
      instance.value.unmount()
    }
  })

  return {
    containerRef,
    instance,
    render
  }
}
```

```typescript
// src/composables/useToken.ts

import { computed, type ComputedRef } from 'vue'
import { useCore } from './useCore'

/**
 * Tokenè®¿é—®ç»„åˆå‡½æ•°
 */
export function useToken() {
  const core = useCore()
  const tokenRuntime = core.getTokenRuntime()

  /**
   * è·å–tokenå€¼
   */
  const getToken = (key: string): string | number | boolean | undefined => {
    return tokenRuntime.get(key)
  }

  /**
   * è·å–CSSå˜é‡å¼•ç”¨
   */
  const getTokenVar = (key: string): string => {
    return tokenRuntime.getVar(key)
  }

  /**
   * è®¾ç½®tokenå€¼
   */
  const setToken = (key: string, value: string | number | boolean): void => {
    tokenRuntime.set(key, value)
  }

  /**
   * æ‰¹é‡è®¾ç½®tokens
   */
  const setTokens = (updates: Record<string, string | number | boolean>): void => {
    tokenRuntime.setMultiple(updates)
  }

  /**
   * åˆ›å»ºå“åº”å¼token
   */
  const token = (key: string): ComputedRef<string | number | boolean | undefined> => {
    return computed(() => getToken(key))
  }

  return {
    getToken,
    getTokenVar,
    setToken,
    setTokens,
    token
  }
}
```

```typescript
// src/composables/useTheme.ts

import { ref, watch, onMounted } from 'vue'
import { useToken } from './useToken'
import type { FlatTokenMap } from '@vjs-ui/core'

/**
 * ä¸»é¢˜ç®¡ç†ç»„åˆå‡½æ•°
 */
export function useTheme() {
  const { setTokens } = useToken()
  const currentTheme = ref<string>('default')

  /**
   * åˆ‡æ¢ä¸»é¢˜
   */
  const setTheme = (themeName: string, tokens: FlatTokenMap): void => {
    setTokens(tokens)
    currentTheme.value = themeName
  }

  /**
   * åˆ‡æ¢æš—é»‘æ¨¡å¼
   */
  const toggleDark = (): void => {
    // å®ç°æš—é»‘æ¨¡å¼åˆ‡æ¢é€»è¾‘
    const isDark = document.documentElement.classList.toggle('dark')
    currentTheme.value = isDark ? 'dark' : 'default'
  }

  /**
   * ä»localStorageæ¢å¤ä¸»é¢˜
   */
  const restoreTheme = (): void => {
    const saved = localStorage.getItem('vjs-ui-theme')
    if (saved) {
      currentTheme.value = saved
      document.documentElement.classList.toggle('dark', saved === 'dark')
    }
  }

  // ç›‘å¬ä¸»é¢˜å˜åŒ–ï¼Œä¿å­˜åˆ°localStorage
  watch(currentTheme, (theme) => {
    localStorage.setItem('vjs-ui-theme', theme)
  })

  // åˆå§‹åŒ–æ—¶æ¢å¤ä¸»é¢˜
  onMounted(() => {
    restoreTheme()
  })

  return {
    currentTheme,
    setTheme,
    toggleDark,
    restoreTheme
  }
}
```

---

## ä¸‰ã€Week 2: æ ¸å¿ƒç»„ä»¶å®ç°

### 3.1 VButtonç»„ä»¶

```typescript
// src/components/Button/Button.dsl.ts

import type { DSLNode } from '@vjs-ui/core'

export const ButtonDSL: DSLNode = {
  type: 'button',
  props: {
    type: 'button',
    disabled: '$props.disabled',
    class: [
      'vjs-button',
      '$props.type ? `vjs-button--${$props.type}` : ""',
      '$props.size ? `vjs-button--${$props.size}` : ""',
      '$props.loading ? "vjs-button--loading" : ""'
    ]
  },
  style: {
    backgroundColor: '$props.type === "primary" ? {color.primary} : "transparent"',
    borderRadius: '{radius.md}',
    padding: '$props.size === "large" ? "{spacing.lg}" : "{spacing.md}"',
    fontSize: '{font.size.base}'
  },
  events: {
    click: '$props.disabled || $props.loading ? null : emit("click", $event)'
  },
  slots: {
    default: '$props.loading ? "Loading..." : $props.text'
  }
}
```

```vue
<!-- src/components/Button/Button.vue -->
<template>
  <button
    :class="buttonClass"
    :style="buttonStyle"
    :disabled="disabled || loading"
    @click="handleClick"
  >
    <span v-if="loading" class="vjs-button__loading">
      <slot name="loading">
        <span class="vjs-button__spinner"></span>
      </slot>
    </span>
    <span v-if="icon && !loading" class="vjs-button__icon">
      <component :is="icon" />
    </span>
    <span v-if="$slots.default || text" class="vjs-button__text">
      <slot>{{ text }}</slot>
    </span>
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useToken } from '../../composables'
import type { ButtonProps, ButtonEmits } from './types'

const props = withDefaults(defineProps<ButtonProps>(), {
  type: 'default',
  size: 'medium',
  disabled: false,
  loading: false
})

const emit = defineEmits<ButtonEmits>()

const { getToken } = useToken()

const buttonClass = computed(() => [
  'vjs-button',
  `vjs-button--${props.type}`,
  `vjs-button--${props.size}`,
  {
    'vjs-button--loading': props.loading,
    'vjs-button--disabled': props.disabled,
    'vjs-button--block': props.block
  }
])

const buttonStyle = computed(() => ({
  '--vjs-button-bg': props.type === 'primary' ? getToken('color.primary') : 'transparent',
  '--vjs-button-radius': getToken('radius.md'),
  '--vjs-button-padding': props.size === 'large' 
    ? getToken('spacing.lg') 
    : getToken('spacing.md')
}))

const handleClick = (event: MouseEvent) => {
  if (props.disabled || props.loading) return
  emit('click', event)
}
</script>

<style scoped>
.vjs-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--vjs-spacing-xs);
  padding: var(--vjs-button-padding);
  border: 1px solid transparent;
  border-radius: var(--vjs-button-radius);
  background: var(--vjs-button-bg);
  font-family: var(--vjs-font-family);
  font-size: var(--vjs-font-size-base);
  font-weight: 500;
  line-height: 1.5;
  color: var(--vjs-color-text);
  cursor: pointer;
  user-select: none;
  transition: all var(--vjs-motion-duration-fast) var(--vjs-motion-easing-ease);
}

.vjs-button:hover:not(.vjs-button--disabled):not(.vjs-button--loading) {
  opacity: 0.8;
  transform: translateY(-1px);
}

.vjs-button:active:not(.vjs-button--disabled):not(.vjs-button--loading) {
  transform: translateY(0);
}

.vjs-button--primary {
  background: var(--vjs-color-primary);
  color: white;
  border-color: var(--vjs-color-primary);
}

.vjs-button--disabled,
.vjs-button--loading {
  opacity: 0.6;
  cursor: not-allowed;
}

.vjs-button--block {
  width: 100%;
}

.vjs-button__spinner {
  display: inline-block;
  width: 1em;
  height: 1em;
  border: 2px solid currentColor;
  border-right-color: transparent;
  border-radius: 50%;
  animation: vjs-spin 0.6s linear infinite;
}

@keyframes vjs-spin {
  to { transform: rotate(360deg); }
}
</style>
```

```typescript
// src/components/Button/types.ts

export interface ButtonProps {
  /**
   * æŒ‰é’®ç±»å‹
   */
  type?: 'default' | 'primary' | 'success' | 'warning' | 'danger'
  
  /**
   * æŒ‰é’®å°ºå¯¸
   */
  size?: 'small' | 'medium' | 'large'
  
  /**
   * æŒ‰é’®æ–‡æœ¬
   */
  text?: string
  
  /**
   * å›¾æ ‡
   */
  icon?: any
  
  /**
   * æ˜¯å¦ç¦ç”¨
   */
  disabled?: boolean
  
  /**
   * æ˜¯å¦åŠ è½½ä¸­
   */
  loading?: boolean
  
  /**
   * æ˜¯å¦å—çº§æŒ‰é’®
   */
  block?: boolean
}

export interface ButtonEmits {
  (e: 'click', event: MouseEvent): void
}
```

### 3.2 ç»„ä»¶å¯¼å‡º

```typescript
// src/components/Button/index.ts

import Button from './Button.vue'
import { ButtonDSL } from './Button.dsl'
import type { ButtonProps, ButtonEmits } from './types'

export { Button, ButtonDSL }
export type { ButtonProps, ButtonEmits }

// å®‰è£…å‡½æ•°
export default {
  install(app: any) {
    app.component('VButton', Button)
  }
}
```

### 3.3 å…¶ä»–ç»„ä»¶ç»“æ„ï¼ˆç±»ä¼¼å®ç°ï¼‰

- **VInput**: è¾“å…¥æ¡†ç»„ä»¶ï¼Œæ”¯æŒv-model
- **VCard**: å¡ç‰‡å®¹å™¨ç»„ä»¶
- **VDialog**: å¯¹è¯æ¡†ç»„ä»¶ï¼Œæ”¯æŒç„¦ç‚¹é™·é˜±
- **VTable**: è¡¨æ ¼ç»„ä»¶ï¼Œæ”¯æŒæ’åºã€åˆ†é¡µ

---

## å››ã€åŒ…é…ç½®ä¸æ„å»º

```json
// packages/vue/package.json
{
  "name": "@vjs-ui/vue",
  "version": "0.1.0",
  "description": "VJS-UI Vue 3 Adapter",
  "type": "module",
  "main": "./dist/index.cjs.js",
  "module": "./dist/index.esm.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "import": "./dist/index.esm.js",
      "require": "./dist/index.cjs.js",
      "types": "./dist/index.d.ts"
    },
    "./style.css": "./dist/style.css",
    "./Button": "./dist/components/Button/index.js",
    "./Input": "./dist/components/Input/index.js"
  },
  "files": [
    "dist"
  ],
  "scripts": {
    "dev": "vite",
    "build": "vite build && vue-tsc --declaration --emitDeclarationOnly",
    "test": "vitest",
    "typecheck": "vue-tsc --noEmit"
  },
  "peerDependencies": {
    "vue": "^3.3.0"
  },
  "dependencies": {
    "@vjs-ui/core": "workspace:*"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.5.0",
    "@vue/test-utils": "^2.4.0",
    "vite": "^5.0.0",
    "vitest": "^1.0.0",
    "vue-tsc": "^1.8.0"
  }
}
```

---

## äº”ã€è´¨é‡ä¿è¯

### 5.1 æµ‹è¯•æ¸…å•

- [ ] å•å…ƒæµ‹è¯•ï¼ˆç»„ä»¶é€»è¾‘ï¼‰
- [ ] ç»„ä»¶æµ‹è¯•ï¼ˆæ¸²æŸ“ã€äº¤äº’ï¼‰
- [ ] å¿«ç…§æµ‹è¯•ï¼ˆUIä¸€è‡´æ€§ï¼‰
- [ ] a11yæµ‹è¯•ï¼ˆæ— éšœç¢ï¼‰

### 5.2 æ–‡æ¡£æ¸…å•

- [ ] æ¯ä¸ªç»„ä»¶çš„APIæ–‡æ¡£
- [ ] ä½¿ç”¨ç¤ºä¾‹ï¼ˆè‡³å°‘3ä¸ª/ç»„ä»¶ï¼‰
- [ ] æœ€ä½³å®è·µæŒ‡å—
- [ ] è¿ç§»æŒ‡å—ï¼ˆä»å…¶ä»–UIåº“ï¼‰

---

**ä¸‹ä¸€é˜¶æ®µ**: [03-PHASE-3-DEVTOOLS.md](./03-PHASE-3-DEVTOOLS.md)
# é˜¶æ®µ4è¯¦ç»†è®¡åˆ’ - Part 1: Week 1-2

> è¿™æ˜¯00-IMPLEMENTATION-GUIDE.mdé˜¶æ®µ4çš„è¯¦ç»†è¡¥å……æ–‡æ¡£  
> **å»ºè®®**: å°†æ­¤å†…å®¹æ•´åˆåˆ°ä¸»æ–‡æ¡£çš„é˜¶æ®µ4éƒ¨åˆ†

---

## ğŸ”¬ é˜¶æ®µ4ï¼šCoreå¼•æ“å®Œå–„é˜¶æ®µï¼ˆ6-8å‘¨ï¼‰- Week 1è¯¦ç»†

> **é‡è¦æ€§**: ğŸ”´ é¡¹ç›®æ ¸å¿ƒé˜¶æ®µ  
> **æµ‹è¯•è¦æ±‚**: Coreâ‰¥90%, å®‰å…¨100%

---

## ğŸ“¦ Week 1ï¼šå®Œæ•´Token + å“åº”å¼ç³»ç»Ÿï¼ˆDay 1-7ï¼‰

### Day 1-3ï¼šå®Œæ•´Tokenç³»ç»Ÿ

#### Tokenç³»ç»Ÿå®Œæ•´å®ç°ä»£ç 

è¯¦è§ MVP-PLAN.md ä¸­çš„åŸºç¡€å®ç°ï¼Œè¿™é‡Œæ‰©å±•ï¼š

**TokenCompilerå®Œæ•´ç‰ˆ**ï¼ˆæ ¸å¿ƒä»£ç ï¼‰ï¼š
```typescript
// packages/core/src/token/compiler.ts
export class TokenCompiler {
  private flatTokens: Record<string, string> = {}
  private visitedKeys = new Set<string>()

  constructor(private tokens: TokenMap) {
    this.flatten()
  }

  private flatten(): void {
    for (const key in this.tokens) {
      this.flatTokens[key] = this.resolveToken(key)
    }
  }

  private resolveToken(key: string): string {
    const token = this.tokens[key]
    if (!token) throw new Error(`Tokenä¸å­˜åœ¨: ${key}`)

    if (this.visitedKeys.has(key)) {
      throw new Error(`æ£€æµ‹åˆ°å¾ªç¯å¼•ç”¨: ${key}`)
    }
    this.visitedKeys.add(key)

    if (token.reference) {
      const refValue = this.resolveToken(token.reference)
      this.visitedKeys.delete(key)
      
      if (token.alpha !== undefined && token.type === 'color') {
        return this.applyAlpha(refValue, token.alpha)
      }
      return refValue
    }

    this.visitedKeys.delete(key)
    return String(token.value)
  }

  // ... å…¶ä»–æ–¹æ³•è§å®Œæ•´æ–‡æ¡£
}
```

#### Tokenæµ‹è¯•ï¼ˆ20+ç”¨ä¾‹ï¼‰

```typescript
describe('TokenCompiler - åŸºç¡€åŠŸèƒ½', () => {
  test('1. ç¼–è¯‘ç®€å•Token', () => { /*...*/ })
  test('2. ç¼–è¯‘å¤šä¸ªToken', () => { /*...*/ })
  test('3. å¤„ç†ä¸åŒç±»å‹Token', () => { /*...*/ })
})

describe('TokenCompiler - Tokenå¼•ç”¨', () => {
  test('4. è§£æç®€å•å¼•ç”¨', () => { /*...*/ })
  test('5. è§£æå¤šå±‚å¼•ç”¨', () => { /*...*/ })
  test('6. æ£€æµ‹å¾ªç¯å¼•ç”¨', () => { /*...*/ })
  test('7. æ£€æµ‹è‡ªå¼•ç”¨', () => { /*...*/ })
  test('8. å¼•ç”¨ä¸å­˜åœ¨çš„Tokenåº”æŠ¥é”™', () => { /*...*/ })
})

describe('TokenCompiler - é¢œè‰²é€æ˜åº¦', () => {
  test('9. åº”ç”¨alphaåˆ°hexé¢œè‰²', () => { /*...*/ })
  test('10. alphaå€¼è¾¹ç•Œæµ‹è¯•(0)', () => { /*...*/ })
  test('11. alphaå€¼è¾¹ç•Œæµ‹è¯•(1)', () => { /*...*/ })
  test('12. alphaå€¼è¾¹ç•Œæµ‹è¯•(0.5)', () => { /*...*/ })
})

describe('TokenCompiler - CSSç”Ÿæˆ', () => {
  test('13. ç”Ÿæˆæ ‡å‡†CSS', () => { /*...*/ })
  test('14. è‡ªå®šä¹‰å‰ç¼€', () => { /*...*/ })
  test('15. å‹ç¼©æ¨¡å¼', () => { /*...*/ })
  test('16. ç©ºTokenå¤„ç†', () => { /*...*/ })
})

describe('TokenCompiler - TypeScriptç”Ÿæˆ', () => {
  test('17. ç”Ÿæˆç±»å‹å®šä¹‰', () => { /*...*/ })
  test('18. å¤„ç†ç‰¹æ®Šå­—ç¬¦', () => { /*...*/ })
})

describe('TokenCompiler - SCSSç”Ÿæˆ', () => {
  test('19. ç”ŸæˆSCSSå˜é‡', () => { /*...*/ })
  test('20. å¤„ç†åµŒå¥—key', () => { /*...*/ })
})

describe('TokenRuntime - åŠ¨æ€åˆ‡æ¢', () => {
  test('21. æ³¨å†Œä¸»é¢˜', () => { /*...*/ })
  test('22. åº”ç”¨ä¸»é¢˜åˆ°DOM', () => { /*...*/ })
  test('23. åˆ‡æ¢ä¸»é¢˜', () => { /*...*/ })
  test('24. è·å–Tokenå€¼', () => { /*...*/ })
  test('25. æ¸…ç†DOM', () => { /*...*/ })
})
```

**Day 1-3 éªŒæ”¶**ï¼š
- [ ] 20+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] è¦†ç›–ç‡>90%
- [ ] å¾ªç¯å¼•ç”¨æ£€æµ‹æ­£ç¡®
- [ ] åŠ¨æ€åˆ‡æ¢æ— å†…å­˜æ³„æ¼

---

### Day 4-7ï¼šå®Œæ•´å“åº”å¼ç³»ç»Ÿ

#### computed + watch å®ç°

**computedæµ‹è¯•ï¼ˆ15+ç”¨ä¾‹ï¼‰**ï¼š
```typescript
describe('computed', () => {
  test('1. åŸºç¡€è®¡ç®—', () => { /*...*/ })
  test('2. ç¼“å­˜æœºåˆ¶', () => { /*...*/ })
  test('3. é“¾å¼computed', () => { /*...*/ })
  test('4. ä¾èµ–å¤šä¸ªreactive', () => { /*...*/ })
  test('5. åµŒå¥—å¯¹è±¡ä¾èµ–', () => { /*...*/ })
  test('6. æ•°ç»„ä¾èµ–', () => { /*...*/ })
  test('7. æ¡ä»¶è®¡ç®—', () => { /*...*/ })
  test('8. å¼‚å¸¸å¤„ç†', () => { /*...*/ })
  test('9. æ€§èƒ½ï¼šä¸é‡å¤è®¡ç®—', () => { /*...*/ })
  test('10. æ€§èƒ½ï¼šæ‡’è®¡ç®—', () => { /*...*/ })
  test('11. computedä½œä¸ºeffectä¾èµ–', () => { /*...*/ })
  test('12. å¤šä¸ªcomputedäº’ç›¸ä¾èµ–', () => { /*...*/ })
  test('13. computed + watchç»„åˆ', () => { /*...*/ })
  test('14. å†…å­˜æ³„æ¼æ£€æµ‹', () => { /*...*/ })
  test('15. è¾¹ç•Œå€¼æµ‹è¯•', () => { /*...*/ })
})
```

**watchæµ‹è¯•ï¼ˆ15+ç”¨ä¾‹ï¼‰**ï¼š
```typescript
describe('watch', () => {
  test('1. åŸºç¡€ç›‘å¬', () => { /*...*/ })
  test('2. immediateé€‰é¡¹', () => { /*...*/ })
  test('3. cleanupå‡½æ•°', () => { /*...*/ })
  test('4. åœæ­¢ç›‘å¬', () => { /*...*/ })
  test('5. ç›‘å¬å¤šä¸ªå±æ€§', () => { /*...*/ })
  test('6. ç›‘å¬computed', () => { /*...*/ })
  test('7. ç›‘å¬åµŒå¥—å¯¹è±¡', () => { /*...*/ })
  test('8. ç›‘å¬æ•°ç»„å˜åŒ–', () => { /*...*/ })
  test('9. deepé€‰é¡¹', () => { /*...*/ })
  test('10. å¼‚æ­¥cleanup', () => { /*...*/ })
  test('11. ç›‘å¬æ¡ä»¶è¡¨è¾¾å¼', () => { /*...*/ })
  test('12. å¤šä¸ªwatchåŒä¸€å±æ€§', () => { /*...*/ })
  test('13. watchåµŒå¥—', () => { /*...*/ })
  test('14. å†…å­˜æ³„æ¼æ£€æµ‹', () => { /*...*/ })
  test('15. è¾¹ç•Œå€¼æµ‹è¯•', () => { /*...*/ })
})
```

**Day 4-7 éªŒæ”¶**ï¼š
- [ ] 30+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] è¦†ç›–ç‡>95%
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] æ€§èƒ½åŸºå‡†è¾¾æ ‡

---

**Week 1å®Œæˆæ ‡å¿—**ï¼š
âœ… Tokenç³»ç»Ÿç”Ÿäº§å°±ç»ª  
âœ… å“åº”å¼ç³»ç»Ÿå®Œæ•´  
âœ… æµ‹è¯•è¦†ç›–ç‡>90%  
âœ… ä»£ç reviewé€šè¿‡  

---

## ğŸ” Week 2ï¼šDSL + è¡¨è¾¾å¼ + å®‰å…¨æ²™ç®±ï¼ˆDay 8-14ï¼‰ğŸ”´

> **âš ï¸ æœ¬å‘¨æœ€å…³é”®** - æ¶‰åŠå®‰å…¨æ€§ï¼Œå¿…é¡»100%æµ‹è¯•è¦†ç›–

### Day 8-9ï¼šå®Œæ•´DSLè§£æå™¨

#### å®Œæ•´DSLç±»å‹å®šä¹‰

```typescript
// packages/core/src/dsl/types.ts
export interface DSLNode {
  type: string
  props?: Record<string, any>
  style?: Record<string, string>
  
  // æ¡ä»¶æ¸²æŸ“
  if?: string          // è¡¨è¾¾å¼: "$state.count > 0"
  elseIf?: string      
  else?: boolean
  
  // åˆ—è¡¨æ¸²æŸ“
  for?: {
    item: string       // è¿­ä»£å˜é‡å
    index?: string     
    source: string     // æ•°æ®æºè¡¨è¾¾å¼: "$state.list"
  }
  
  // äº‹ä»¶
  events?: Record<string, string>  // { onClick: "$handlers.handleClick" }
  
  // æ’æ§½
  slots?: Record<string, DSLNode[]>
  
  // å­èŠ‚ç‚¹
  children?: DSLNode[]
}
```

#### DSLè§£æå™¨æµ‹è¯•ï¼ˆ20+ç”¨ä¾‹ï¼‰

```typescript
describe('DSLParser - æ¡ä»¶æ¸²æŸ“', () => {
  test('1. è§£æifæ¡ä»¶', () => { /*...*/ })
  test('2. è§£æif-else', () => { /*...*/ })
  test('3. è§£æif-elseif-else', () => { /*...*/ })
  test('4. åµŒå¥—æ¡ä»¶', () => { /*...*/ })
})

describe('DSLParser - åˆ—è¡¨æ¸²æŸ“', () => {
  test('5. è§£æforå¾ªç¯', () => { /*...*/ })
  test('6. è§£æfor with index', () => { /*...*/ })
  test('7. åµŒå¥—for', () => { /*...*/ })
  test('8. for + ifç»„åˆ', () => { /*...*/ })
})

describe('DSLParser - äº‹ä»¶ç»‘å®š', () => {
  test('9. è§£æclickäº‹ä»¶', () => { /*...*/ })
  test('10. è§£æå¤šä¸ªäº‹ä»¶', () => { /*...*/ })
  test('11. äº‹ä»¶è¡¨è¾¾å¼', () => { /*...*/ })
})

describe('DSLParser - æ’æ§½', () => {
  test('12. è§£æé»˜è®¤æ’æ§½', () => { /*...*/ })
  test('13. è§£æå…·åæ’æ§½', () => { /*...*/ })
  test('14. å¤šä¸ªæ’æ§½', () => { /*...*/ })
})

describe('DSLParser - éªŒè¯', () => {
  test('15. ç¼ºå°‘typeåº”æŠ¥é”™', () => { /*...*/ })
  test('16. éæ³•typeåº”æŠ¥é”™', () => { /*...*/ })
  test('17. å¾ªç¯å¼•ç”¨æ£€æµ‹', () => { /*...*/ })
  test('18. æ·±åº¦é™åˆ¶', () => { /*...*/ })
  test('19. èŠ‚ç‚¹æ•°é‡é™åˆ¶', () => { /*...*/ })
  test('20. æ ¼å¼éªŒè¯', () => { /*...*/ })
})
```

**Day 8-9 éªŒæ”¶**ï¼š
- [ ] 20+æµ‹è¯•é€šè¿‡
- [ ] æ”¯æŒæ¡ä»¶æ¸²æŸ“
- [ ] æ”¯æŒåˆ—è¡¨æ¸²æŸ“
- [ ] æ”¯æŒäº‹ä»¶ç»‘å®š
- [ ] DSLéªŒè¯æ­£ç¡®

---

### Day 10-12ï¼šè¡¨è¾¾å¼å¼•æ“ + äº”å±‚å®‰å…¨æ²™ç®± ğŸ”´

#### äº”å±‚å®‰å…¨é˜²æŠ¤æ¶æ„

```
ç”¨æˆ·è¡¨è¾¾å¼: "$state.count + 1"
    â†“
ã€ç¬¬1å±‚ã€‘è¡¨è¾¾å¼é™æ€åˆ†æ - æ£€æµ‹å±é™©æ¨¡å¼
    â†“
ã€ç¬¬2å±‚ã€‘jsepè§£æä¸ºAST
    â†“
ã€ç¬¬3å±‚ã€‘ASTç™½åå•éªŒè¯ - åªå…è®¸å®‰å…¨èŠ‚ç‚¹
    â†“
ã€ç¬¬4å±‚ã€‘å®‰å…¨ä¸Šä¸‹æ–‡éš”ç¦» - çº¯å‡€å¯¹è±¡
    â†“
ã€ç¬¬5å±‚ã€‘èµ„æºé™åˆ¶æ‰§è¡Œ - è¶…æ—¶+æ¬¡æ•°é™åˆ¶
    â†“
å®‰å…¨çš„æ±‚å€¼ç»“æœ
```

#### ç¬¬1å±‚ï¼šè¡¨è¾¾å¼é™æ€åˆ†æ

```typescript
// packages/core/src/evaluator/auditor.ts
export class ExpressionAuditor {
  private readonly dangerousPatterns = [
    /constructor/i,
    /__proto__/i,
    /prototype/i,
    /\beval\b/i,
    /Function\s*\(/i,
    /import\s*\(/i,
    /require\s*\(/i,
    /document\./i,
    /window\./i,
    /global\./i,
    /process\./i,
    /\[\s*['"]constructor['"]\s*\]/,
    /\[\s*['"]__proto__['"]\s*\]/
  ]

  audit(expression: string): { safe: boolean; errors: string[] } {
    const errors: string[] = []
    
    for (const pattern of this.dangerousPatterns) {
      if (pattern.test(expression)) {
        errors.push(`æ£€æµ‹åˆ°å±é™©æ¨¡å¼: ${pattern.source}`)
      }
    }
    
    return {
      safe: errors.length === 0,
      errors
    }
  }
}
```

#### ç¬¬2-3å±‚ï¼šASTè§£æ + ç™½åå•éªŒè¯

```typescript
// packages/core/src/evaluator/validator.ts
import jsep from 'jsep'

export class ASTValidator {
  private readonly allowedTypes = new Set([
    'Literal',          // å­—é¢é‡: 1, "hello", true
    'Identifier',       // æ ‡è¯†ç¬¦: count, name
    'MemberExpression', // æˆå‘˜è®¿é—®: obj.prop
    'BinaryExpression', // äºŒå…ƒè¿ç®—: a + b
    'UnaryExpression',  // ä¸€å…ƒè¿ç®—: !flag
    'ConditionalExpression', // ä¸‰å…ƒ: a ? b : c
    'ArrayExpression',  // æ•°ç»„: [1, 2, 3]
    'CallExpression',   // å‡½æ•°è°ƒç”¨: Math.max(a, b)
    'LogicalExpression' // é€»è¾‘: a && b
  ])

  private readonly allowedOperators = new Set([
    '+', '-', '*', '/', '%',
    '>', '<', '>=', '<=', '==', '!=', '===', '!==',
    '&&', '||', '!',
    '?', ':'
  ])

  private readonly allowedFunctions = new Set([
    'Math.max', 'Math.min', 'Math.abs',
    'Math.floor', 'Math.ceil', 'Math.round',
    'Number', 'String', 'Boolean',
    'Array.isArray'
  ])

  validate(expression: string): { valid: boolean; errors: string[] } {
    const errors: string[] = []
    
    try {
      const ast = jsep(expression)
      this.validateNode(ast, errors)
    } catch (e) {
      errors.push(`è§£æå¤±è´¥: ${e.message}`)
    }
    
    return {
      valid: errors.length === 0,
      errors
    }
  }

  private validateNode(node: any, errors: string[]): void {
    // æ£€æŸ¥èŠ‚ç‚¹ç±»å‹
    if (!this.allowedTypes.has(node.type)) {
      errors.push(`ä¸å…è®¸çš„èŠ‚ç‚¹ç±»å‹: ${node.type}`)
      return
    }

    // æ£€æŸ¥è¿ç®—ç¬¦
    if (node.operator && !this.allowedOperators.has(node.operator)) {
      errors.push(`ä¸å…è®¸çš„è¿ç®—ç¬¦: ${node.operator}`)
    }

    // æ£€æŸ¥å‡½æ•°è°ƒç”¨
    if (node.type === 'CallExpression') {
      const funcName = this.getFunctionName(node.callee)
      if (!this.allowedFunctions.has(funcName)) {
        errors.push(`ä¸å…è®¸çš„å‡½æ•°: ${funcName}`)
      }
    }

    // é€’å½’æ£€æŸ¥å­èŠ‚ç‚¹
    if (node.argument) this.validateNode(node.argument, errors)
    if (node.left) this.validateNode(node.left, errors)
    if (node.right) this.validateNode(node.right, errors)
    if (node.test) this.validateNode(node.test, errors)
    if (node.consequent) this.validateNode(node.consequent, errors)
    if (node.alternate) this.validateNode(node.alternate, errors)
    if (node.elements) node.elements.forEach((el: any) => this.validateNode(el, errors))
    if (node.arguments) node.arguments.forEach((arg: any) => this.validateNode(arg, errors))
  }

  private getFunctionName(node: any): string {
    if (node.type === 'Identifier') return node.name
    if (node.type === 'MemberExpression') {
      return `${this.getFunctionName(node.object)}.${node.property.name}`
    }
    return 'unknown'
  }
}
```

#### ç¬¬4å±‚ï¼šå®‰å…¨ä¸Šä¸‹æ–‡éš”ç¦»

```typescript
// packages/core/src/evaluator/context.ts
export class SafeContext {
  createContext(data: any): any {
    // åˆ›å»ºçº¯å‡€å¯¹è±¡ï¼Œæ— åŸå‹é“¾
    const context = Object.create(null)
    
    // å®‰å…¨å¤åˆ¶æ•°æ®
    for (const key in data) {
      if (Object.prototype.hasOwnProperty.call(data, key)) {
        context[key] = this.sanitizeValue(data[key])
      }
    }
    
    // æä¾›å®‰å…¨çš„å…¨å±€å‡½æ•°
    context.Math = {
      max: Math.max,
      min: Math.min,
      abs: Math.abs,
      floor: Math.floor,
      ceil: Math.ceil,
      round: Math.round
    }
    
    return context
  }

  private sanitizeValue(value: any): any {
    if (value === null || value === undefined) return value
    if (typeof value !== 'object') return value
    
    // ç§»é™¤åŸå‹é“¾
    if (Array.isArray(value)) {
      return value.map(v => this.sanitizeValue(v))
    }
    
    const sanitized = Object.create(null)
    for (const key in value) {
      if (Object.prototype.hasOwnProperty.call(value, key)) {
        sanitized[key] = this.sanitizeValue(value[key])
      }
    }
    return sanitized
  }
}
```

#### ç¬¬5å±‚ï¼šèµ„æºé™åˆ¶æ‰§è¡Œå™¨

```typescript
// packages/core/src/evaluator/limiter.ts
export class ResourceLimiter {
  private maxExecutionTime = 100 // ms
  private maxOperations = 1000

  async executeWithLimits<T>(
    fn: () => T,
    options?: { timeout?: number; maxOps?: number }
  ): Promise<T> {
    const timeout = options?.timeout || this.maxExecutionTime
    const maxOps = options?.maxOps || this.maxOperations
    
    let operations = 0
    const startTime = Date.now()
    
    // æ“ä½œè®¡æ•°å™¨
    const checkLimits = () => {
      operations++
      if (operations > maxOps) {
        throw new Error(`æ“ä½œæ¬¡æ•°è¶…é™: ${operations} > ${maxOps}`)
      }
      if (Date.now() - startTime > timeout) {
        throw new Error(`æ‰§è¡Œè¶…æ—¶: ${Date.now() - startTime}ms > ${timeout}ms`)
      }
    }

    // ä½¿ç”¨Promise.raceå®ç°è¶…æ—¶
    return Promise.race([
      Promise.resolve(fn()),
      new Promise<T>((_, reject) => {
        setTimeout(() => reject(new Error('æ‰§è¡Œè¶…æ—¶')), timeout)
      })
    ])
  }
}
```

#### å®Œæ•´å®‰å…¨æ±‚å€¼å™¨ï¼ˆé›†æˆæ‰€æœ‰å±‚ï¼‰

```typescript
// packages/core/src/evaluator/index.ts
export class SecureEvaluator {
  private auditor = new ExpressionAuditor()
  private validator = new ASTValidator()
  private contextBuilder = new SafeContext()
  private limiter = new ResourceLimiter()

  async evaluate(expression: string, data: any): Promise<any> {
    // ç¬¬1å±‚ï¼šé™æ€åˆ†æ
    const auditResult = this.auditor.audit(expression)
    if (!auditResult.safe) {
      throw new Error(`è¡¨è¾¾å¼ä¸å®‰å…¨: ${auditResult.errors.join(', ')}`)
    }

    // ç¬¬2-3å±‚ï¼šASTéªŒè¯
    const validationResult = this.validator.validate(expression)
    if (!validationResult.valid) {
      throw new Error(`è¡¨è¾¾å¼éªŒè¯å¤±è´¥: ${validationResult.errors.join(', ')}`)
    }

    // ç¬¬4å±‚ï¼šå®‰å…¨ä¸Šä¸‹æ–‡
    const context = this.contextBuilder.createContext(data)

    // ç¬¬5å±‚ï¼šèµ„æºé™åˆ¶æ‰§è¡Œ
    return this.limiter.executeWithLimits(() => {
      const ast = jsep(expression)
      return this.evaluateNode(ast, context)
    })
  }

  private evaluateNode(node: any, context: any): any {
    switch (node.type) {
      case 'Literal':
        return node.value
      
      case 'Identifier':
        return context[node.name]
      
      case 'MemberExpression':
        const obj = this.evaluateNode(node.object, context)
        const prop = node.computed 
          ? this.evaluateNode(node.property, context)
          : node.property.name
        return obj?.[prop]
      
      case 'BinaryExpression':
        const left = this.evaluateNode(node.left, context)
        const right = this.evaluateNode(node.right, context)
        return this.evalBinaryOp(node.operator, left, right)
      
      case 'UnaryExpression':
        const arg = this.evaluateNode(node.argument, context)
        return this.evalUnaryOp(node.operator, arg)
      
      case 'ConditionalExpression':
        const test = this.evaluateNode(node.test, context)
        return test 
          ? this.evaluateNode(node.consequent, context)
          : this.evaluateNode(node.alternate, context)
      
      case 'ArrayExpression':
        return node.elements.map((el: any) => this.evaluateNode(el, context))
      
      case 'CallExpression':
        return this.evaluateCall(node, context)
      
      case 'LogicalExpression':
        const leftVal = this.evaluateNode(node.left, context)
        if (node.operator === '&&') return leftVal && this.evaluateNode(node.right, context)
        if (node.operator === '||') return leftVal || this.evaluateNode(node.right, context)
        throw new Error(`ä¸æ”¯æŒçš„é€»è¾‘è¿ç®—ç¬¦: ${node.operator}`)
      
      default:
        throw new Error(`ä¸æ”¯æŒçš„èŠ‚ç‚¹ç±»å‹: ${node.type}`)
    }
  }

  private evalBinaryOp(op: string, left: any, right: any): any {
    switch (op) {
      case '+': return left + right
      case '-': return left - right
      case '*': return left * right
      case '/': return left / right
      case '%': return left % right
      case '>': return left > right
      case '<': return left < right
      case '>=': return left >= right
      case '<=': return left <= right
      case '==': return left == right
      case '!=': return left != right
      case '===': return left === right
      case '!==': return left !== right
      default: throw new Error(`ä¸æ”¯æŒçš„è¿ç®—ç¬¦: ${op}`)
    }
  }

  private evalUnaryOp(op: string, arg: any): any {
    switch (op) {
      case '!': return !arg
      case '-': return -arg
      case '+': return +arg
      default: throw new Error(`ä¸æ”¯æŒçš„ä¸€å…ƒè¿ç®—ç¬¦: ${op}`)
    }
  }

  private evaluateCall(node: any, context: any): any {
    const funcName = this.validator['getFunctionName'](node.callee)
    const args = node.arguments.map((arg: any) => this.evaluateNode(arg, context))
    
    // å®‰å…¨çš„å‡½æ•°è°ƒç”¨
    if (funcName.startsWith('Math.')) {
      const method = funcName.split('.')[1]
      return (Math as any)[method](...args)
    }
    
    if (funcName === 'Number') return Number(...args)
    if (funcName === 'String') return String(...args)
    if (funcName === 'Boolean') return Boolean(...args)
    if (funcName === 'Array.isArray') return Array.isArray(...args)
    
    throw new Error(`ä¸å…è®¸çš„å‡½æ•°è°ƒç”¨: ${funcName}`)
  }
}
```

---

### å®‰å…¨æµ‹è¯•ï¼ˆ50+ç”¨ä¾‹ï¼Œ100%è¦†ç›–ï¼‰ğŸ”´

```typescript
describe('SecureEvaluator - ç¬¬1å±‚ï¼šé™æ€åˆ†æ', () => {
  test('1. é˜»æ­¢constructorè®¿é—®', async () => {
    await expect(
      evaluator.evaluate('obj.constructor', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('2. é˜»æ­¢__proto__è®¿é—®', async () => {
    await expect(
      evaluator.evaluate('obj.__proto__', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('3. é˜»æ­¢prototypeè®¿é—®', async () => {
    await expect(
      evaluator.evaluate('obj.prototype', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('4. é˜»æ­¢evalè°ƒç”¨', async () => {
    await expect(
      evaluator.evaluate('eval("alert(1)")', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('5. é˜»æ­¢Functionæ„é€ ', async () => {
    await expect(
      evaluator.evaluate('Function("return 1")()', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('6. é˜»æ­¢importåŠ¨æ€å¯¼å…¥', async () => {
    await expect(
      evaluator.evaluate('import("./hack")', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('7. é˜»æ­¢require', async () => {
    await expect(
      evaluator.evaluate('require("fs")', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('8. é˜»æ­¢documentè®¿é—®', async () => {
    await expect(
      evaluator.evaluate('document.cookie', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('9. é˜»æ­¢windowè®¿é—®', async () => {
    await expect(
      evaluator.evaluate('window.location', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })

  test('10. é˜»æ­¢é€šè¿‡æ–¹æ‹¬å·è®¿é—®constructor', async () => {
    await expect(
      evaluator.evaluate('obj["constructor"]', {})
    ).rejects.toThrow('ä¸å®‰å…¨')
  })
})

describe('SecureEvaluator - ç¬¬2-3å±‚ï¼šASTéªŒè¯', () => {
  test('11. å…è®¸åŸºç¡€ç®—æœ¯', async () => {
    const result = await evaluator.evaluate('1 + 2 * 3', {})
    expect(result).toBe(7)
  })

  test('12. å…è®¸æˆå‘˜è®¿é—®', async () => {
    const result = await evaluator.evaluate('obj.count', { obj: { count: 10 } })
    expect(result).toBe(10)
  })

  test('13. å…è®¸ä¸‰å…ƒè¿ç®—', async () => {
    const result = await evaluator.evaluate('count > 0 ? "yes" : "no"', { count: 1 })
    expect(result).toBe('yes')
  })

  test('14. å…è®¸å®‰å…¨å‡½æ•°Math.max', async () => {
    const result = await evaluator.evaluate('Math.max(1, 2, 3)', {})
    expect(result).toBe(3)
  })

  test('15. é˜»æ­¢æœªçŸ¥å‡½æ•°', async () => {
    await expect(
      evaluator.evaluate('alert("hack")', {})
    ).rejects.toThrow('ä¸å…è®¸çš„å‡½æ•°')
  })

  test('16. é˜»æ­¢æœªçŸ¥è¿ç®—ç¬¦', async () => {
    await expect(
      evaluator.evaluate('a ** b', { a: 2, b: 3 })
    ).rejects.toThrow('ä¸å…è®¸çš„è¿ç®—ç¬¦')
  })
})

describe('SecureEvaluator - ç¬¬4å±‚ï¼šä¸Šä¸‹æ–‡éš”ç¦»', () => {
  test('17. æ— æ³•è®¿é—®Object.prototype', async () => {
    const result = await evaluator.evaluate('obj.toString', { obj: {} })
    expect(result).toBeUndefined()
  })

  test('18. æ— æ³•é€šè¿‡__proto__æ±¡æŸ“', async () => {
    // å³ä½¿æ•°æ®ä¸­æœ‰__proto__ï¼Œä¹Ÿåº”è¢«ç§»é™¤
    const result = await evaluator.evaluate('count', { 
      count: 1,
      __proto__: { hacked: true }
    })
    expect(result).toBe(1)
  })

  test('19. æ•°ç»„å€¼æ­£ç¡®éš”ç¦»', async () => {
    const result = await evaluator.evaluate('arr[0]', { arr: [1, 2, 3] })
    expect(result).toBe(1)
  })

  test('20. åµŒå¥—å¯¹è±¡æ­£ç¡®éš”ç¦»', async () => {
    const result = await evaluator.evaluate('user.name', { 
      user: { name: 'Alice' }
    })
    expect(result).toBe('Alice')
  })
})

describe('SecureEvaluator - ç¬¬5å±‚ï¼šèµ„æºé™åˆ¶', () => {
  test('21. ç®€å•è¡¨è¾¾å¼å¿«é€Ÿæ‰§è¡Œ', async () => {
    const start = Date.now()
    await evaluator.evaluate('1 + 1', {})
    const duration = Date.now() - start
    expect(duration).toBeLessThan(10)
  })

  test('22. è¶…æ—¶ä¿æŠ¤', async () => {
    // æ¨¡æ‹Ÿè¶…æ—¶åœºæ™¯ï¼ˆéœ€è¦ç‰¹æ®Šæ„é€ ï¼‰
    await expect(
      evaluator.evaluate('1', {}, { timeout: 1 })
    ).rejects.toThrow('è¶…æ—¶')
  })

  test('23. æ“ä½œæ¬¡æ•°é™åˆ¶', async () => {
    // å¤§é‡åµŒå¥—è¿ç®—
    const expr = '1' + '+1'.repeat(2000)
    await expect(
      evaluator.evaluate(expr, {})
    ).rejects.toThrow('æ“ä½œæ¬¡æ•°è¶…é™')
  })
})

describe('SecureEvaluator - ç»¼åˆæµ‹è¯•', () => {
  test('24. å¤æ‚å®‰å…¨è¡¨è¾¾å¼', async () => {
    const result = await evaluator.evaluate(
      'user.age > 18 ? Math.max(score, 60) : score',
      { user: { age: 20 }, score: 85 }
    )
    expect(result).toBe(85)
  })

  test('25. æ•°ç»„æ“ä½œ', async () => {
    const result = await evaluator.evaluate(
      'arr[0] + arr[1]',
      { arr: [10, 20] }
    )
    expect(result).toBe(30)
  })

  // ... ç»§ç»­åˆ°50+æµ‹è¯•
})
```

**Day 10-12 éªŒæ”¶æ ‡å‡†**ï¼ˆä¸¥æ ¼ï¼‰ï¼š
- [ ] 50+å®‰å…¨æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] äº”å±‚é˜²æŠ¤å…¨éƒ¨ç”Ÿæ•ˆ
- [ ] æ‰€æœ‰å±é™©æ“ä½œè¢«é˜»æ­¢
- [ ] å®‰å…¨æµ‹è¯•è¦†ç›–ç‡100%
- [ ] æ€§èƒ½æŸè€—<10%
- [ ] æ— ä»»ä½•å·²çŸ¥ç»•è¿‡æ–¹å¼

---

### Day 13-14ï¼šé›†æˆæµ‹è¯•

#### å®Œæ•´æµç¨‹é›†æˆæµ‹è¯•ï¼ˆ30+ç”¨ä¾‹ï¼‰

```typescript
describe('Core Integration - Token + DSL + Expression', () => {
  test('1. TokenåŠ¨æ€å€¼ + è¡¨è¾¾å¼', async () => { /*...*/ })
  test('2. æ¡ä»¶æ¸²æŸ“ + è¡¨è¾¾å¼', async () => { /*...*/ })
  test('3. åˆ—è¡¨æ¸²æŸ“ + è¡¨è¾¾å¼', async () => { /*...*/ })
  test('4. äº‹ä»¶å¤„ç† + è¡¨è¾¾å¼', async () => { /*...*/ })
  test('5. å¤æ‚åµŒå¥—åœºæ™¯', async () => { /*...*/ })
  // ... 30ä¸ªæµ‹è¯•
})
```

**Week 2 å®Œæˆæ ‡å¿—**ï¼š
- ğŸ‰ è¡¨è¾¾å¼å¼•æ“ç”Ÿäº§å°±ç»ª
- ğŸ‰ äº”å±‚å®‰å…¨é˜²æŠ¤å…¨éƒ¨å®ç°
- ğŸ‰ å®‰å…¨æµ‹è¯•100%è¦†ç›–
- ğŸ‰ 100+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- ğŸ‰ ä¸ºCoreé›†æˆåšå¥½å‡†å¤‡

---

**æ¥ä¸‹æ¥è¯·æŸ¥çœ‹**ï¼š
- Part 2: Week 3-4ï¼ˆBinder + Coreé›†æˆï¼‰
- Part 3: Week 5-8ï¼ˆæµ‹è¯• + ä¼˜åŒ– + å‘å¸ƒï¼‰
# é˜¶æ®µ4è¯¦ç»†è®¡åˆ’ - Part 2: Week 3-4

> è¿™æ˜¯00-IMPLEMENTATION-GUIDE.mdé˜¶æ®µ4çš„è¯¦ç»†è¡¥å……æ–‡æ¡£  
> **å‰ç½®**: éœ€å…ˆå®ŒæˆPart 1ï¼ˆWeek 1-2ï¼‰

---

## ğŸ”— Week 3ï¼šBinderï¼ˆæ•°æ®ç»‘å®šå™¨ï¼‰+ Coreé›†æˆï¼ˆDay 15-21ï¼‰

### å‰ç½®æ¡ä»¶éªŒæ”¶
- âœ… Tokenç³»ç»Ÿå®Œæ•´
- âœ… å“åº”å¼ç³»ç»Ÿå®Œæ•´
- âœ… DSLè§£æå™¨å®Œæ•´
- âœ… è¡¨è¾¾å¼å¼•æ“ + å®‰å…¨æ²™ç®±å®Œæ•´

---

### Day 15-17ï¼šBinderå®ç°

#### BinderèŒè´£

```
Binderçš„ä½œç”¨ï¼š
1. ç›‘å¬æ•°æ®å˜åŒ–
2. é‡æ–°æ±‚å€¼è¡¨è¾¾å¼
3. æ›´æ–°UI
4. ç®¡ç†ä¾èµ–å…³ç³»
5. æ¸…ç†èµ„æº
```

#### Binderæ ¸å¿ƒå®ç°

```typescript
// packages/core/src/binder/index.ts
import { reactive, effect } from '../reactive'
import { SecureEvaluator } from '../evaluator'

export interface Binding {
  expression: string
  context: any
  callback: (value: any) => void
  cleanup?: () => void
}

export class Binder {
  private evaluator = new SecureEvaluator()
  private bindings = new Map<string, Binding>()
  private effects = new Map<string, Function>()

  /**
   * åˆ›å»ºå“åº”å¼ç»‘å®š
   */
  bind(
    id: string,
    expression: string,
    context: any,
    callback: (value: any) => void
  ): void {
    // ä¿å­˜ç»‘å®šä¿¡æ¯
    this.bindings.set(id, { expression, context, callback })

    // åˆ›å»ºå“åº”å¼effect
    const effectFn = effect(async () => {
      try {
        // æ±‚å€¼è¡¨è¾¾å¼
        const value = await this.evaluator.evaluate(expression, context)
        // è°ƒç”¨å›è°ƒæ›´æ–°UI
        callback(value)
      } catch (error) {
        console.error(`ç»‘å®šæ±‚å€¼å¤±è´¥ [${id}]:`, error)
      }
    })

    this.effects.set(id, effectFn)
  }

  /**
   * æ›´æ–°ç»‘å®šä¸Šä¸‹æ–‡
   */
  updateContext(id: string, newContext: any): void {
    const binding = this.bindings.get(id)
    if (!binding) return

    binding.context = newContext
    
    // é‡æ–°ç»‘å®š
    this.unbind(id)
    this.bind(id, binding.expression, newContext, binding.callback)
  }

  /**
   * è§£é™¤ç»‘å®š
   */
  unbind(id: string): void {
    const effectFn = this.effects.get(id)
    if (effectFn) {
      // åœæ­¢effect
      effectFn()
      this.effects.delete(id)
    }

    const binding = this.bindings.get(id)
    if (binding?.cleanup) {
      binding.cleanup()
    }

    this.bindings.delete(id)
  }

  /**
   * è§£é™¤æ‰€æœ‰ç»‘å®š
   */
  unbindAll(): void {
    for (const id of this.bindings.keys()) {
      this.unbind(id)
    }
  }

  /**
   * è·å–ç»‘å®šæ•°é‡
   */
  getBindingCount(): number {
    return this.bindings.size
  }
}
```

#### Binderé«˜çº§åŠŸèƒ½

```typescript
// packages/core/src/binder/advanced.ts
export class AdvancedBinder extends Binder {
  /**
   * æ‰¹é‡ç»‘å®š
   */
  bindBatch(bindings: Array<{
    id: string
    expression: string
    context: any
    callback: (value: any) => void
  }>): void {
    for (const binding of bindings) {
      this.bind(binding.id, binding.expression, binding.context, binding.callback)
    }
  }

  /**
   * æ¡ä»¶ç»‘å®šï¼ˆä»…å½“æ¡ä»¶ä¸ºçœŸæ—¶ç»‘å®šï¼‰
   */
  bindConditional(
    id: string,
    condition: () => boolean,
    expression: string,
    context: any,
    callback: (value: any) => void
  ): void {
    if (condition()) {
      this.bind(id, expression, context, callback)
    }
  }

  /**
   * å»¶è¿Ÿç»‘å®šï¼ˆé˜²æŠ–ï¼‰
   */
  bindDebounced(
    id: string,
    expression: string,
    context: any,
    callback: (value: any) => void,
    delay: number = 300
  ): void {
    let timeoutId: any

    this.bind(id, expression, context, (value) => {
      clearTimeout(timeoutId)
      timeoutId = setTimeout(() => callback(value), delay)
    })
  }

  /**
   * èŠ‚æµç»‘å®š
   */
  bindThrottled(
    id: string,
    expression: string,
    context: any,
    callback: (value: any) => void,
    interval: number = 300
  ): void {
    let lastTime = 0

    this.bind(id, expression, context, (value) => {
      const now = Date.now()
      if (now - lastTime >= interval) {
        callback(value)
        lastTime = now
      }
    })
  }
}
```

#### Binderæµ‹è¯•ï¼ˆ30+ç”¨ä¾‹ï¼‰

```typescript
describe('Binder - åŸºç¡€åŠŸèƒ½', () => {
  test('1. åˆ›å»ºç®€å•ç»‘å®š', () => { /*...*/ })
  test('2. å“åº”å¼æ›´æ–°', () => { /*...*/ })
  test('3. è§£é™¤ç»‘å®š', () => { /*...*/ })
  test('4. é‡æ–°ç»‘å®š', () => { /*...*/ })
  test('5. å¤šä¸ªç»‘å®š', () => { /*...*/ })
})

describe('Binder - è¡¨è¾¾å¼ç»‘å®š', () => {
  test('6. ç»‘å®šç®—æœ¯è¡¨è¾¾å¼', () => { /*...*/ })
  test('7. ç»‘å®šæ¡ä»¶è¡¨è¾¾å¼', () => { /*...*/ })
  test('8. ç»‘å®šæˆå‘˜è®¿é—®', () => { /*...*/ })
  test('9. ç»‘å®šå‡½æ•°è°ƒç”¨', () => { /*...*/ })
  test('10. è¡¨è¾¾å¼é”™è¯¯å¤„ç†', () => { /*...*/ })
})

describe('Binder - é«˜çº§åŠŸèƒ½', () => {
  test('11. æ‰¹é‡ç»‘å®š', () => { /*...*/ })
  test('12. æ¡ä»¶ç»‘å®š', () => { /*...*/ })
  test('13. å»¶è¿Ÿç»‘å®šï¼ˆé˜²æŠ–ï¼‰', () => { /*...*/ })
  test('14. èŠ‚æµç»‘å®š', () => { /*...*/ })
  test('15. æ›´æ–°ä¸Šä¸‹æ–‡', () => { /*...*/ })
})

describe('Binder - èµ„æºç®¡ç†', () => {
  test('16. å†…å­˜æ³„æ¼æ£€æµ‹', () => { /*...*/ })
  test('17. cleanupæ­£ç¡®æ‰§è¡Œ', () => { /*...*/ })
  test('18. è§£é™¤æ‰€æœ‰ç»‘å®š', () => { /*...*/ })
  test('19. é‡å¤ç»‘å®šåŒä¸€ID', () => { /*...*/ })
  test('20. å¤§é‡ç»‘å®šæ€§èƒ½', () => { /*...*/ })
})

describe('Binder - é›†æˆæµ‹è¯•', () => {
  test('21. ä¸Tokené›†æˆ', () => { /*...*/ })
  test('22. ä¸DSLé›†æˆ', () => { /*...*/ })
  test('23. ä¸å“åº”å¼é›†æˆ', () => { /*...*/ })
  test('24. å®Œæ•´æ•°æ®æµ', () => { /*...*/ })
  test('25. åµŒå¥—ç»‘å®š', () => { /*...*/ })
})
```

**Day 15-17 éªŒæ”¶**ï¼š
- [ ] 30+æµ‹è¯•é€šè¿‡
- [ ] BinderåŠŸèƒ½å®Œæ•´
- [ ] æ”¯æŒé«˜çº§åŠŸèƒ½
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] ä¸å…¶ä»–æ¨¡å—é›†æˆæ­£å¸¸

---

### Day 18-21ï¼šCoreå¼•æ“é›†æˆ

#### Coreå¼•æ“æ¶æ„ï¼ˆèŒè´£åˆ†ç¦»ï¼‰

```typescript
// packages/core/src/core/index.ts
import { TokenRuntime } from '../token'
import { reactive, computed, watch } from '../reactive'
import { DSLParser } from '../dsl'
import { SecureEvaluator } from '../evaluator'
import { Binder } from '../binder'

export interface CoreConfig {
  tokens?: any
  initialState?: any
  handlers?: Record<string, Function>
}

export class Core {
  // å­ç³»ç»Ÿ
  private tokenRuntime: TokenRuntime
  private parser: DSLParser
  private evaluator: SecureEvaluator
  private binder: Binder
  
  // çŠ¶æ€ç®¡ç†
  private state: any
  private handlers: Record<string, Function>
  
  // æ¸²æŸ“å™¨æ¥å£
  private renderer: Renderer | null = null

  constructor(config: CoreConfig = {}) {
    this.tokenRuntime = new TokenRuntime()
    this.parser = new DSLParser()
    this.evaluator = new SecureEvaluator()
    this.binder = new Binder()
    
    // åˆå§‹åŒ–çŠ¶æ€ï¼ˆå“åº”å¼ï¼‰
    this.state = reactive(config.initialState || {})
    this.handlers = config.handlers || {}
    
    // æ³¨å†Œé»˜è®¤Token
    if (config.tokens) {
      this.tokenRuntime.registerTheme('default', config.tokens)
      this.tokenRuntime.apply('default')
    }
  }

  /**
   * æ³¨å†Œæ¸²æŸ“å™¨
   */
  setRenderer(renderer: Renderer): void {
    this.renderer = renderer
  }

  /**
   * æ¸²æŸ“DSL
   */
  render(dsl: any, container?: any): RenderInstance {
    if (!this.renderer) {
      throw new Error('æ¸²æŸ“å™¨æœªæ³¨å†Œ')
    }

    // 1. è§£æDSL
    const parsedDSL = this.parser.parse(dsl)

    // 2. åˆ›å»ºæ¸²æŸ“å®ä¾‹
    const instance = this.renderer.render(parsedDSL, container)

    // 3. å»ºç«‹æ•°æ®ç»‘å®š
    this.setupBindings(instance, parsedDSL)

    return instance
  }

  /**
   * å»ºç«‹æ•°æ®ç»‘å®š
   */
  private setupBindings(instance: any, dsl: any): void {
    // Propsç»‘å®š
    if (dsl.props) {
      for (const [key, value] of Object.entries(dsl.props)) {
        if (typeof value === 'string' && value.startsWith('$')) {
          this.binder.bind(
            `${instance.id}-prop-${key}`,
            value.slice(1), // å»æ‰$å‰ç¼€
            { state: this.state },
            (newValue) => {
              instance.updateProp(key, newValue)
            }
          )
        }
      }
    }

    // Styleç»‘å®š
    if (dsl.style) {
      for (const [key, value] of Object.entries(dsl.style)) {
        if (typeof value === 'string' && value.startsWith('$')) {
          this.binder.bind(
            `${instance.id}-style-${key}`,
            value.slice(1),
            { state: this.state },
            (newValue) => {
              instance.updateStyle(key, newValue)
            }
          )
        }
      }
    }

    // äº‹ä»¶ç»‘å®š
    if (dsl.events) {
      for (const [event, handlerName] of Object.entries(dsl.events)) {
        const handler = this.handlers[handlerName]
        if (handler) {
          instance.on(event, handler)
        }
      }
    }

    // é€’å½’å¤„ç†å­èŠ‚ç‚¹
    if (dsl.children) {
      for (const child of dsl.children) {
        this.setupBindings(child, child)
      }
    }
  }

  /**
   * æ›´æ–°çŠ¶æ€
   */
  setState(updates: any): void {
    Object.assign(this.state, updates)
  }

  /**
   * è·å–çŠ¶æ€
   */
  getState(): any {
    return this.state
  }

  /**
   * åˆ‡æ¢ä¸»é¢˜
   */
  setTheme(themeName: string): void {
    this.tokenRuntime.switchTheme(themeName)
  }

  /**
   * é”€æ¯å®ä¾‹
   */
  destroy(): void {
    this.binder.unbindAll()
    this.tokenRuntime.destroy()
  }
}

// æ¸²æŸ“å™¨æ¥å£
export interface Renderer {
  render(dsl: any, container: any): RenderInstance
}

export interface RenderInstance {
  id: string
  updateProp(key: string, value: any): void
  updateStyle(key: string, value: any): void
  on(event: string, handler: Function): void
  destroy(): void
}
```

#### Coreé›†æˆæµ‹è¯•ï¼ˆ40+ç”¨ä¾‹ï¼‰

```typescript
describe('Core - åˆå§‹åŒ–', () => {
  test('1. é»˜è®¤é…ç½®åˆå§‹åŒ–', () => { /*...*/ })
  test('2. è‡ªå®šä¹‰çŠ¶æ€åˆå§‹åŒ–', () => { /*...*/ })
  test('3. Tokenåˆå§‹åŒ–', () => { /*...*/ })
  test('4. handlersåˆå§‹åŒ–', () => { /*...*/ })
})

describe('Core - æ¸²æŸ“æµç¨‹', () => {
  test('5. æ³¨å†Œæ¸²æŸ“å™¨', () => { /*...*/ })
  test('6. æ¸²æŸ“ç®€å•DSL', () => { /*...*/ })
  test('7. æ¸²æŸ“åµŒå¥—DSL', () => { /*...*/ })
  test('8. Propsç»‘å®š', () => { /*...*/ })
  test('9. Styleç»‘å®š', () => { /*...*/ })
  test('10. äº‹ä»¶ç»‘å®š', () => { /*...*/ })
})

describe('Core - çŠ¶æ€ç®¡ç†', () => {
  test('11. æ›´æ–°çŠ¶æ€', () => { /*...*/ })
  test('12. çŠ¶æ€å“åº”å¼æ›´æ–°UI', () => { /*...*/ })
  test('13. å¤æ‚çŠ¶æ€æ›´æ–°', () => { /*...*/ })
  test('14. æ‰¹é‡çŠ¶æ€æ›´æ–°', () => { /*...*/ })
})

describe('Core - ä¸»é¢˜åˆ‡æ¢', () => {
  test('15. åˆ‡æ¢ä¸»é¢˜', () => { /*...*/ })
  test('16. ä¸»é¢˜åˆ‡æ¢åUIæ›´æ–°', () => { /*...*/ })
})

describe('Core - å®Œæ•´æ•°æ®æµ', () => {
  test('17. Token â†’ DSL â†’ Render', () => { /*...*/ })
  test('18. State â†’ Expression â†’ Binding â†’ UI', () => { /*...*/ })
  test('19. Event â†’ Handler â†’ State â†’ UI', () => { /*...*/ })
  test('20. å¤æ‚äº¤äº’æµç¨‹', () => { /*...*/ })
})

describe('Core - æ€§èƒ½æµ‹è¯•', () => {
  test('21. æ¸²æŸ“1000ä¸ªèŠ‚ç‚¹ < 200ms', () => { /*...*/ })
  test('22. æ›´æ–°100ä¸ªç»‘å®š < 50ms', () => { /*...*/ })
  test('23. åˆ‡æ¢ä¸»é¢˜ < 100ms', () => { /*...*/ })
})

describe('Core - èµ„æºæ¸…ç†', () => {
  test('24. destroyæ¸…ç†æ‰€æœ‰èµ„æº', () => { /*...*/ })
  test('25. æ— å†…å­˜æ³„æ¼', () => { /*...*/ })
})
```

**Day 18-21 éªŒæ”¶**ï¼š
- [ ] 40+æµ‹è¯•é€šè¿‡
- [ ] Coreå¼•æ“å®Œæ•´é›†æˆ
- [ ] èŒè´£åˆ†ç¦»æ¸…æ™°
- [ ] å®Œæ•´æ•°æ®æµæ­£å¸¸
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] æ— å†…å­˜æ³„æ¼

---

## Week 3-4 æ€»ä½“éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
```
âœ“ Binderå®ç°å®Œæ•´
âœ“ Coreå¼•æ“é›†æˆå®Œæˆ
âœ“ æ‰€æœ‰å­ç³»ç»ŸååŒå·¥ä½œ
âœ“ å®Œæ•´æ•°æ®æµæ‰“é€š
```

### è´¨é‡æ ‡å‡†
```
âœ“ æµ‹è¯•è¦†ç›–ç‡>90%
âœ“ 70+æµ‹è¯•å…¨éƒ¨é€šè¿‡
âœ“ æ— å·²çŸ¥bug
âœ“ ä»£ç reviewé€šè¿‡
```

### æ€§èƒ½æ ‡å‡†
```
âœ“ æ¸²æŸ“1000èŠ‚ç‚¹ < 200ms
âœ“ æ›´æ–°æ€§èƒ½ < 50ms
âœ“ ä¸»é¢˜åˆ‡æ¢ < 100ms
âœ“ æ— å†…å­˜æ³„æ¼
```

### æ–‡æ¡£æ ‡å‡†
```
âœ“ APIæ–‡æ¡£å®Œæ•´
âœ“ æ¶æ„æ–‡æ¡£æ¸…æ™°
âœ“ ä½¿ç”¨ç¤ºä¾‹å®Œæ•´
```

---

**Week 3-4å®Œæˆæ ‡å¿—**ï¼š
- ğŸ‰ Binderç”Ÿäº§å°±ç»ª
- ğŸ‰ Coreå¼•æ“å®Œæ•´é›†æˆ
- ğŸ‰ æ‰€æœ‰å­ç³»ç»ŸååŒå·¥ä½œ
- ğŸ‰ ä¸ºVueé€‚é…åšå¥½å‡†å¤‡
- ğŸ‰ å¯ä»¥è¿›å…¥æµ‹è¯•ä¼˜åŒ–é˜¶æ®µ

---

**æ¥ä¸‹æ¥è¯·æŸ¥çœ‹**ï¼š
- Part 3: Week 5-8ï¼ˆå®Œå–„æµ‹è¯• + æ€§èƒ½ä¼˜åŒ– + æ–‡æ¡£ + å‘å¸ƒv0.2.0ï¼‰
# é˜¶æ®µ4è¯¦ç»†è®¡åˆ’ - Part 3: Week 5-8

> è¿™æ˜¯00-IMPLEMENTATION-GUIDE.mdé˜¶æ®µ4çš„è¯¦ç»†è¡¥å……æ–‡æ¡£  
> **å‰ç½®**: éœ€å…ˆå®ŒæˆPart 1-2ï¼ˆWeek 1-4ï¼‰

---

## âœ… Week 5-6ï¼šå®Œå–„æµ‹è¯• + æ€§èƒ½ä¼˜åŒ–ï¼ˆDay 22-35ï¼‰

### å‰ç½®æ¡ä»¶éªŒæ”¶
- âœ… Coreå¼•æ“æ‰€æœ‰å­ç³»ç»Ÿå®Œæˆ
- âœ… Binderå®ç°å®Œæˆ
- âœ… åŸºç¡€æµ‹è¯•é€šè¿‡

---

### Day 22-25ï¼šå®Œå–„å•å…ƒæµ‹è¯•ï¼ˆè¡¥é½åˆ°>90%ï¼‰

#### æµ‹è¯•è¦†ç›–ç‡ç°çŠ¶æ£€æŸ¥

```bash
pnpm test:coverage

# æ£€æŸ¥å„æ¨¡å—è¦†ç›–ç‡
packages/core/src/token        - ç›®æ ‡: >90%
packages/core/src/reactive     - ç›®æ ‡: >95%
packages/core/src/dsl          - ç›®æ ‡: >90%
packages/core/src/evaluator    - ç›®æ ‡: 100% (å®‰å…¨å…³é”®)
packages/core/src/binder       - ç›®æ ‡: >90%
packages/core/src/core         - ç›®æ ‡: >90%
```

#### è¡¥å……ç¼ºå¤±çš„æµ‹è¯•ç”¨ä¾‹

**Tokenç³»ç»Ÿè¡¥å……æµ‹è¯•**ï¼š
```typescript
describe('TokenCompiler - è¾¹ç•Œæµ‹è¯•', () => {
  test('ç©ºTokenå¯¹è±¡', () => { /*...*/ })
  test('æå¤§Tokenæ•°é‡ï¼ˆ1000+ï¼‰', () => { /*...*/ })
  test('ææ·±åµŒå¥—å¼•ç”¨ï¼ˆ10å±‚ï¼‰', () => { /*...*/ })
  test('ç‰¹æ®Šå­—ç¬¦å¤„ç†', () => { /*...*/ })
  test('Unicodeå­—ç¬¦', () => { /*...*/ })
  test('å¹¶å‘ç¼–è¯‘', () => { /*...*/ })
})

describe('TokenRuntime - è¾¹ç•Œæµ‹è¯•', () => {
  test('å¿«é€Ÿåˆ‡æ¢ä¸»é¢˜ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰', () => { /*...*/ })
  test('å†…å­˜æ³„æ¼æ£€æµ‹ï¼ˆé•¿æ—¶é—´è¿è¡Œï¼‰', () => { /*...*/ })
  test('å¤šå®ä¾‹éš”ç¦»', () => { /*...*/ })
})
```

**å“åº”å¼ç³»ç»Ÿè¡¥å……æµ‹è¯•**ï¼š
```typescript
describe('Reactive - å¤æ‚åœºæ™¯', () => {
  test('æ·±åº¦åµŒå¥—å¯¹è±¡ï¼ˆ20å±‚ï¼‰', () => { /*...*/ })
  test('å¤§æ•°ç»„ï¼ˆ10000é¡¹ï¼‰', () => { /*...*/ })
  test('å¾ªç¯å¼•ç”¨å¯¹è±¡', () => { /*...*/ })
  test('Map/Setæ”¯æŒ', () => { /*...*/ })
  test('WeakMap/WeakSetæ”¯æŒ', () => { /*...*/ })
})

describe('Computed - å¤æ‚ä¾èµ–', () => {
  test('å¤æ‚ä¾èµ–é“¾ï¼ˆAâ†’Bâ†’Câ†’Dï¼‰', () => { /*...*/ })
  test('è±å½¢ä¾èµ–ï¼ˆAâ†’B,Câ†’Dï¼‰', () => { /*...*/ })
  test('åŠ¨æ€ä¾èµ–', () => { /*...*/ })
})

describe('Watch - å¤æ‚åœºæ™¯', () => {
  test('watchæ·±åº¦å¯¹è±¡', () => { /*...*/ })
  test('å¤šä¸ªwatcheråŒä¸€å±æ€§', () => { /*...*/ })
  test('å¼‚æ­¥watcher', () => { /*...*/ })
})
```

**è¡¨è¾¾å¼+å®‰å…¨ç³»ç»Ÿè¡¥å……æµ‹è¯•**ï¼š
```typescript
describe('SecureEvaluator - æ¸—é€æµ‹è¯•', () => {
  test('å°è¯•ç»•è¿‡1: æ³¨é‡Šç»•è¿‡', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡2: Unicodeç»•è¿‡', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡3: å­—ç¬¦ä¸²æ‹¼æ¥', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡4: æ¨¡æ¿å­—ç¬¦ä¸²', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡5: é—´æ¥è®¿é—®', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡6: åŸå‹é“¾æ±¡æŸ“', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡7: Symbolè®¿é—®', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡8: Proxyç»•è¿‡', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡9: Reflectç»•è¿‡', () => { /*...*/ })
  test('å°è¯•ç»•è¿‡10: å¼‚æ­¥ç»•è¿‡', () => { /*...*/ })
})
```

**Day 22-25 éªŒæ”¶**ï¼š
- [ ] æ‰€æœ‰æ¨¡å—è¦†ç›–ç‡è¾¾æ ‡
- [ ] Coreæ¨¡å— >90%
- [ ] å®‰å…¨æ¨¡å— 100%
- [ ] è¾¹ç•Œæµ‹è¯•å®Œæ•´
- [ ] æ¸—é€æµ‹è¯•å…¨éƒ¨é€šè¿‡

---

### Day 26-28ï¼šé›†æˆæµ‹è¯•å®Œå–„

#### E2Eæµ‹è¯•åœºæ™¯

```typescript
describe('E2E - å®Œæ•´ç”¨æˆ·åœºæ™¯', () => {
  test('åœºæ™¯1: ç®€å•è®¡æ•°å™¨', async () => {
    // 1. åˆ›å»ºCoreå®ä¾‹
    const core = new Core({
      initialState: { count: 0 },
      handlers: {
        increment: (state) => state.count++
      }
    })
    
    // 2. å®šä¹‰DSL
    const dsl = {
      type: 'div',
      children: [
        {
          type: 'p',
          props: { text: '$state.count' }
        },
        {
          type: 'button',
          props: { text: 'Add' },
          events: { click: 'increment' }
        }
      ]
    }
    
    // 3. æ¸²æŸ“
    const instance = core.render(dsl, container)
    
    // 4. éªŒè¯åˆå§‹çŠ¶æ€
    expect(container.querySelector('p').textContent).toBe('0')
    
    // 5. æ¨¡æ‹Ÿç‚¹å‡»
    container.querySelector('button').click()
    await nextTick()
    
    // 6. éªŒè¯æ›´æ–°
    expect(container.querySelector('p').textContent).toBe('1')
    
    // 7. æ¸…ç†
    core.destroy()
  })

  test('åœºæ™¯2: æ¡ä»¶æ¸²æŸ“', () => { /*...*/ })
  test('åœºæ™¯3: åˆ—è¡¨æ¸²æŸ“', () => { /*...*/ })
  test('åœºæ™¯4: è¡¨å•è¾“å…¥', () => { /*...*/ })
  test('åœºæ™¯5: ä¸»é¢˜åˆ‡æ¢', () => { /*...*/ })
  test('åœºæ™¯6: å¤æ‚åµŒå¥—', () => { /*...*/ })
})
```

#### å‹åŠ›æµ‹è¯•

```typescript
describe('å‹åŠ›æµ‹è¯•', () => {
  test('æ¸²æŸ“1000ä¸ªèŠ‚ç‚¹', async () => {
    const start = Date.now()
    // ... æ¸²æŸ“é€»è¾‘
    const duration = Date.now() - start
    expect(duration).toBeLessThan(200)
  })

  test('10000æ¬¡çŠ¶æ€æ›´æ–°', async () => {
    const start = Date.now()
    for (let i = 0; i < 10000; i++) {
      core.setState({ count: i })
    }
    const duration = Date.now() - start
    expect(duration).toBeLessThan(1000)
  })

  test('å†…å­˜æ³„æ¼æ£€æµ‹ï¼ˆåˆ›å»ºé”€æ¯1000æ¬¡ï¼‰', () => {
    const memBefore = process.memoryUsage().heapUsed
    
    for (let i = 0; i < 1000; i++) {
      const core = new Core()
      core.render(simpleDSL)
      core.destroy()
    }
    
    global.gc() // éœ€è¦--expose-gc
    const memAfter = process.memoryUsage().heapUsed
    const leak = memAfter - memBefore
    
    expect(leak).toBeLessThan(10 * 1024 * 1024) // 10MB
  })
})
```

**Day 26-28 éªŒæ”¶**ï¼š
- [ ] E2Eæµ‹è¯•è¦†ç›–ä¸»è¦åœºæ™¯
- [ ] å‹åŠ›æµ‹è¯•é€šè¿‡
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] æ€§èƒ½è¾¾æ ‡

---

### Day 29-32ï¼šæ€§èƒ½ä¼˜åŒ–

#### æ€§èƒ½åŸºå‡†æµ‹è¯•

```typescript
// packages/core/test/benchmarks/suite.bench.ts
import { bench, describe } from 'vitest'

describe('Tokenæ€§èƒ½', () => {
  bench('ç¼–è¯‘100ä¸ªToken', () => {
    const compiler = new TokenCompiler(tokens100)
    compiler.toCSSVariables()
  })

  bench('ç¼–è¯‘1000ä¸ªToken', () => {
    const compiler = new TokenCompiler(tokens1000)
    compiler.toCSSVariables()
  })

  bench('ä¸»é¢˜åˆ‡æ¢', () => {
    runtime.switchTheme('dark')
  })
})

describe('å“åº”å¼æ€§èƒ½', () => {
  bench('åˆ›å»ºreactiveå¯¹è±¡', () => {
    reactive({ count: 0, name: 'test', nested: { value: 1 } })
  })

  bench('reactiveè¯»å–', () => {
    const obj = reactive({ count: 0 })
    effect(() => obj.count)
  })

  bench('reactiveæ›´æ–°', () => {
    const obj = reactive({ count: 0 })
    obj.count = 1
  })

  bench('computedè®¡ç®—', () => {
    const obj = reactive({ count: 0 })
    const double = computed(() => obj.count * 2)
    double.value
  })
})

describe('è¡¨è¾¾å¼æ€§èƒ½', () => {
  bench('ç®€å•è¡¨è¾¾å¼', async () => {
    await evaluator.evaluate('1 + 2', {})
  })

  bench('å¤æ‚è¡¨è¾¾å¼', async () => {
    await evaluator.evaluate(
      'user.age > 18 ? Math.max(score, 60) : score',
      { user: { age: 20 }, score: 85 }
    )
  })
})

describe('æ¸²æŸ“æ€§èƒ½', () => {
  bench('æ¸²æŸ“100ä¸ªèŠ‚ç‚¹', () => {
    core.render(dsl100, container)
  })

  bench('æ›´æ–°100ä¸ªèŠ‚ç‚¹', () => {
    core.setState({ count: Math.random() })
  })
})
```

#### ä¼˜åŒ–ç›®æ ‡å’Œæªæ–½

**ä¼˜åŒ–1: Tokenç¼–è¯‘ç¼“å­˜**
```typescript
class TokenCompiler {
  private cache = new Map<string, string>()

  compile(tokens: TokenMap): string {
    const cacheKey = JSON.stringify(tokens)
    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey)!
    }
    
    const result = this.doCompile(tokens)
    this.cache.set(cacheKey, result)
    return result
  }
}
```

**ä¼˜åŒ–2: è¡¨è¾¾å¼ASTç¼“å­˜**
```typescript
class SecureEvaluator {
  private astCache = new Map<string, any>()

  async evaluate(expr: string, context: any): Promise<any> {
    let ast = this.astCache.get(expr)
    if (!ast) {
      ast = jsep(expr)
      this.astCache.set(expr, ast)
    }
    return this.evaluateNode(ast, context)
  }
}
```

**ä¼˜åŒ–3: æ‰¹é‡æ›´æ–°**
```typescript
class Core {
  private pendingUpdates: any[] = []
  private updateScheduled = false

  setState(updates: any): void {
    this.pendingUpdates.push(updates)
    
    if (!this.updateScheduled) {
      this.updateScheduled = true
      Promise.resolve().then(() => {
        this.flushUpdates()
      })
    }
  }

  private flushUpdates(): void {
    const merged = Object.assign({}, ...this.pendingUpdates)
    Object.assign(this.state, merged)
    this.pendingUpdates = []
    this.updateScheduled = false
  }
}
```

**ä¼˜åŒ–4: è™šæ‹Ÿæ»šåŠ¨ï¼ˆforå¤§åˆ—è¡¨ï¼‰**
```typescript
// ä»…æ¸²æŸ“å¯è§åŒºåŸŸçš„èŠ‚ç‚¹
class VirtualScroller {
  render(items: any[], viewport: { start: number; end: number }) {
    const visible = items.slice(viewport.start, viewport.end)
    return visible.map(item => this.renderItem(item))
  }
}
```

**Day 29-32 éªŒæ”¶**ï¼š
- [ ] åŸºå‡†æµ‹è¯•å®Œæˆ
- [ ] å…³é”®è·¯å¾„ä¼˜åŒ–
- [ ] æ€§èƒ½æå‡>20%
- [ ] æ— æ€§èƒ½é€€åŒ–

---

### Day 33-35ï¼šä»£ç å®¡æŸ¥ + é‡æ„

#### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# 1. Lintæ£€æŸ¥
pnpm lint

# 2. ç±»å‹æ£€æŸ¥
pnpm type-check

# 3. å¾ªç¯å¤æ‚åº¦æ£€æŸ¥
npx complexity-report src/**/*.ts

# 4. ä»£ç é‡å¤æ£€æŸ¥
npx jscpd src

# 5. ä¾èµ–åˆ†æ
npx depcheck
```

#### é‡æ„æ¸…å•

- [ ] ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
- [ ] ç»Ÿä¸€å‘½åè§„èŒƒ
- [ ] æå–é‡å¤ä»£ç 
- [ ] ä¼˜åŒ–å‡½æ•°å¤æ‚åº¦ï¼ˆ<10ï¼‰
- [ ] ä¼˜åŒ–æ–‡ä»¶å¤§å°ï¼ˆ<500è¡Œï¼‰
- [ ] æ·»åŠ å¿…è¦æ³¨é‡Š
- [ ] ä¼˜åŒ–importé¡ºåº

**Day 33-35 éªŒæ”¶**ï¼š
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
- [ ] æ— ä¸¥é‡ä»£ç å¼‚å‘³
- [ ] æŠ€æœ¯å€ºåŠ¡æ¸…ç†
- [ ] ä»£ç å¯ç»´æŠ¤æ€§æå‡

---

## ğŸ“š Week 7ï¼šæ–‡æ¡£å®Œå–„ï¼ˆDay 36-42ï¼‰

### Day 36-38ï¼šAPIæ–‡æ¡£

#### å„æ¨¡å—APIæ–‡æ¡£

**Tokenç³»ç»ŸAPI**ï¼š
```markdown
# Token API

## TokenCompiler

### constructor(tokens: TokenMap)
åˆ›å»ºTokenç¼–è¯‘å™¨å®ä¾‹

**å‚æ•°**ï¼š
- `tokens`: Tokenå®šä¹‰å¯¹è±¡

**ç¤ºä¾‹**ï¼š
\`\`\`typescript
const compiler = new TokenCompiler({
  'color.primary': { value: '#1677ff', type: 'color' }
})
\`\`\`

### toCSSVariables(options?: CompileOptions): string
ç”ŸæˆCSS Variables

**è¿”å›**: CSSå­—ç¬¦ä¸²

### toTypeScript(): string
ç”ŸæˆTypeScriptç±»å‹å®šä¹‰

...
```

**å“åº”å¼API**ï¼š
```markdown
# Reactive API

## reactive<T>(target: T): T
åˆ›å»ºå“åº”å¼å¯¹è±¡

**å‚æ•°**ï¼š
- `target`: è¦å˜ä¸ºå“åº”å¼çš„å¯¹è±¡

**è¿”å›**: å“åº”å¼ä»£ç†å¯¹è±¡

**ç¤ºä¾‹**ï¼š
\`\`\`typescript
const state = reactive({ count: 0 })
\`\`\`

## computed<T>(getter: () => T): ComputedRef<T>
åˆ›å»ºè®¡ç®—å±æ€§

...
```

### Day 39-41ï¼šä½¿ç”¨æŒ‡å—

#### å¿«é€Ÿå¼€å§‹

```markdown
# VJS-UI Core å¿«é€Ÿå¼€å§‹

## å®‰è£…

\`\`\`bash
pnpm add @vjs-ui/core
\`\`\`

## åŸºç¡€ä½¿ç”¨

\`\`\`typescript
import { Core } from '@vjs-ui/core'

// 1. åˆ›å»ºCoreå®ä¾‹
const core = new Core({
  initialState: { count: 0 },
  handlers: {
    increment: (state) => state.count++
  }
})

// 2. å®šä¹‰DSL
const dsl = {
  type: 'button',
  props: { text: '$state.count' },
  events: { click: 'increment' }
}

// 3. æ³¨å†Œæ¸²æŸ“å™¨ï¼ˆVue/Reactï¼‰
core.setRenderer(vueRenderer)

// 4. æ¸²æŸ“
core.render(dsl, container)
\`\`\`

## è¿›é˜¶ä½¿ç”¨

### Tokenç³»ç»Ÿ
### å“åº”å¼ç³»ç»Ÿ
### è¡¨è¾¾å¼ç³»ç»Ÿ
### å®‰å…¨é…ç½®
...
```

### Day 42ï¼šæ•…éšœæ’æŸ¥æŒ‡å—

```markdown
# æ•…éšœæ’æŸ¥æŒ‡å—

## å¸¸è§é—®é¢˜

### Q1: è¡¨è¾¾å¼ä¸ç”Ÿæ•ˆ
**ç—‡çŠ¶**: DSLä¸­çš„è¡¨è¾¾å¼æ²¡æœ‰æ±‚å€¼
**åŸå› **: è¡¨è¾¾å¼æ ¼å¼é”™è¯¯æˆ–è¢«å®‰å…¨æ£€æŸ¥æ‹¦æˆª
**è§£å†³**: 
1. æ£€æŸ¥è¡¨è¾¾å¼æ˜¯å¦ä»¥`$`å¼€å¤´
2. æŸ¥çœ‹æ§åˆ¶å°å®‰å…¨é”™è¯¯
3. ç¡®è®¤è¡¨è¾¾å¼åœ¨ç™½åå•ä¸­

### Q2: å†…å­˜æ³„æ¼
**ç—‡çŠ¶**: é•¿æ—¶é—´è¿è¡Œåå†…å­˜æŒç»­å¢é•¿
**åŸå› **: æœªæ­£ç¡®æ¸…ç†ç»‘å®š
**è§£å†³**:
1. ç¡®ä¿è°ƒç”¨`core.destroy()`
2. æ£€æŸ¥æ˜¯å¦æœ‰å¾ªç¯å¼•ç”¨
3. ä½¿ç”¨DevToolsåˆ†æå†…å­˜

### Q3: æ€§èƒ½é—®é¢˜
**ç—‡çŠ¶**: æ¸²æŸ“æˆ–æ›´æ–°ç¼“æ…¢
**åŸå› **: èŠ‚ç‚¹è¿‡å¤šæˆ–è¡¨è¾¾å¼å¤æ‚
**è§£å†³**:
1. ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
2. ç®€åŒ–è¡¨è¾¾å¼
3. å¼€å¯ç”Ÿäº§æ¨¡å¼
...
```

**Day 36-42 éªŒæ”¶**ï¼š
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ä½¿ç”¨æŒ‡å—æ¸…æ™°
- [ ] æ•…éšœæ’æŸ¥å®Œå–„
- [ ] ç¤ºä¾‹ä»£ç å¯è¿è¡Œ

---

## ğŸš€ Week 8ï¼šå‘å¸ƒv0.2.0ï¼ˆDay 43-49ï¼‰

### Day 43-45ï¼šå‘å¸ƒå‰æ£€æŸ¥

#### æœ€ç»ˆæ£€æŸ¥æ¸…å•

```markdown
## åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰è®¡åˆ’åŠŸèƒ½å·²å®ç°
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ— å·²çŸ¥bug

## è´¨é‡æ ‡å‡†
- [ ] æµ‹è¯•è¦†ç›–ç‡Core>90%
- [ ] å®‰å…¨æµ‹è¯•100%
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] ä»£ç reviewé€šè¿‡

## æ–‡æ¡£å®Œæ•´æ€§
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ä½¿ç”¨æŒ‡å—å®Œæ•´
- [ ] CHANGELOGæ›´æ–°
- [ ] READMEæ›´æ–°

## å‘å¸ƒå‡†å¤‡
- [ ] ç‰ˆæœ¬å·æ›´æ–°ï¼ˆv0.2.0ï¼‰
- [ ] package.jsonæ›´æ–°
- [ ] æ„å»ºé€šè¿‡
- [ ] npmåŒ…å¯å®‰è£…
```

### Day 46-47ï¼šå‘å¸ƒæµç¨‹

```bash
# 1. æœ€ç»ˆæµ‹è¯•
pnpm test:coverage
pnpm lint
pnpm type-check

# 2. æ„å»º
pnpm build

# 3. åˆ›å»ºchangeset
pnpm changeset
# é€‰æ‹©: minor (æ–°åŠŸèƒ½)
# åŒ…: @vjs-ui/core
# æè¿°: feat: Coreå¼•æ“v0.2.0å‘å¸ƒ
# - å®Œæ•´Tokenç³»ç»Ÿ
# - å®Œæ•´å“åº”å¼ç³»ç»Ÿ  
# - DSLè§£æå™¨
# - è¡¨è¾¾å¼å¼•æ“
# - äº”å±‚å®‰å…¨æ²™ç®±
# - Binderæ•°æ®ç»‘å®š
# - Coreå¼•æ“é›†æˆ

# 4. æ›´æ–°ç‰ˆæœ¬
pnpm changeset version

# 5. æäº¤ä»£ç 
git add .
git commit -m "chore: release v0.2.0"
git tag v0.2.0

# 6. æ¨é€
git push origin main --tags

# 7. å‘å¸ƒåˆ°npm
pnpm changeset publish

# 8. éªŒè¯
pnpm view @vjs-ui/core version
npm info @vjs-ui/core
```

### Day 48-49ï¼šå‘å¸ƒåå·¥ä½œ

#### åˆ›å»ºGitHub Release

```markdown
# v0.2.0 - Coreå¼•æ“å®Œæ•´ç‰ˆ

## ğŸ‰ ä¸»è¦ç‰¹æ€§

### å®Œæ•´Tokenç³»ç»Ÿ
- âœ… åŠ¨æ€Tokenåˆ‡æ¢
- âœ… Tokenå¼•ç”¨å’Œç»§æ‰¿
- âœ… é¢œè‰²é€æ˜åº¦æ”¯æŒ
- âœ… å¾ªç¯å¼•ç”¨æ£€æµ‹
- âœ… TypeScriptç±»å‹ç”Ÿæˆ

### å®Œæ•´å“åº”å¼ç³»ç»Ÿ
- âœ… reactiveå“åº”å¼å¯¹è±¡
- âœ… computedè®¡ç®—å±æ€§ï¼ˆç¼“å­˜ï¼‰
- âœ… watchç›‘å¬å™¨ï¼ˆimmediate/cleanupï¼‰
- âœ… effectè‡ªåŠ¨è¿½è¸ª
- âœ… æ·±åº¦å“åº”å¼æ”¯æŒ

### DSLè§£æå™¨
- âœ… æ¡ä»¶æ¸²æŸ“ï¼ˆif/elseï¼‰
- âœ… åˆ—è¡¨æ¸²æŸ“ï¼ˆforï¼‰
- âœ… äº‹ä»¶ç»‘å®š
- âœ… æ’æ§½æ”¯æŒ
- âœ… DSLéªŒè¯

### è¡¨è¾¾å¼å¼•æ“
- âœ… ç®—æœ¯/é€»è¾‘/æ¯”è¾ƒè¿ç®—
- âœ… æˆå‘˜è®¿é—®å’Œå‡½æ•°è°ƒç”¨
- âœ… ä¸‰å…ƒè¿ç®—ç¬¦
- âœ… å®‰å…¨çš„å‡½æ•°ç™½åå•

### ğŸ” äº”å±‚å®‰å…¨é˜²æŠ¤ï¼ˆ100%æµ‹è¯•è¦†ç›–ï¼‰
1. âœ… è¡¨è¾¾å¼é™æ€åˆ†æ
2. âœ… ASTç™½åå•éªŒè¯
3. âœ… å®‰å…¨ä¸Šä¸‹æ–‡éš”ç¦»
4. âœ… èµ„æºé™åˆ¶æ‰§è¡Œ
5. âœ… å®Œæ•´å®‰å…¨æ±‚å€¼å™¨

### Binderæ•°æ®ç»‘å®š
- âœ… å“åº”å¼ç»‘å®š
- âœ… è¡¨è¾¾å¼ç»‘å®š
- âœ… é˜²æŠ–/èŠ‚æµæ”¯æŒ
- âœ… èµ„æºç®¡ç†

### Coreå¼•æ“é›†æˆ
- âœ… èŒè´£åˆ†ç¦»æ¶æ„
- âœ… å®Œæ•´æ•°æ®æµ
- âœ… æ¸²æŸ“å™¨æ¥å£
- âœ… ä¸»é¢˜åˆ‡æ¢
- âœ… çŠ¶æ€ç®¡ç†

## ğŸ“Š è´¨é‡æŒ‡æ ‡

- æµ‹è¯•è¦†ç›–ç‡: 92%
- å®‰å…¨æµ‹è¯•è¦†ç›–ç‡: 100%
- æ€§èƒ½: 1000èŠ‚ç‚¹ < 200ms
- åŒ…å¤§å°: Core < 60KB (gzipped)

## ğŸ“– æ–‡æ¡£

- [APIæ–‡æ¡£](./docs/API.md)
- [ä½¿ç”¨æŒ‡å—](./docs/GUIDE.md)
- [æ¶æ„æ–‡æ¡£](./docs/ARCHITECTURE.md)
- [å®‰å…¨è¯´æ˜](./docs/SECURITY.md)

## â¬†ï¸ ä»v0.1.0å‡çº§

MVPç”¨æˆ·è¯·å‚è€ƒ[å‡çº§æŒ‡å—](./docs/UPGRADE.md)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œæµ‹è¯•äººå‘˜ï¼

## ğŸ”œ ä¸‹ä¸€æ­¥

v0.5.0å°†ä¸“æ³¨äºVueé€‚é…å±‚å’Œ10ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚
```

#### å‘å¸ƒé€šå‘Š

- [ ] æ›´æ–°é¡¹ç›®README
- [ ] å‘å¸ƒæŠ€æœ¯åšå®¢
- [ ] ç¤¾äº¤åª’ä½“é€šå‘Š
- [ ] é€šçŸ¥æ—©æœŸç”¨æˆ·

**Day 43-49 éªŒæ”¶**ï¼š
- [ ] v0.2.0æˆåŠŸå‘å¸ƒ
- [ ] npmåŒ…å¯å®‰è£…ä½¿ç”¨
- [ ] GitHub Releaseåˆ›å»º
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] é€šå‘Šå®Œæˆ

---

## ğŸ‰ é˜¶æ®µ4å®Œæˆæ ‡å¿—

### æ ¸å¿ƒæˆæœ
- âœ… Coreå¼•æ“ç”Ÿäº§å°±ç»ª
- âœ… äº”å±‚å®‰å…¨é˜²æŠ¤100%å®ç°
- âœ… æµ‹è¯•è¦†ç›–ç‡>90%
- âœ… æ€§èƒ½è¾¾åˆ°ç›®æ ‡
- âœ… æ–‡æ¡£å®Œæ•´
- âœ… v0.2.0æˆåŠŸå‘å¸ƒ

### æŠ€æœ¯æŒ‡æ ‡
```
åŠŸèƒ½å®Œæ•´åº¦: 100%
æµ‹è¯•è¦†ç›–ç‡: 92%
å®‰å…¨è¦†ç›–ç‡: 100%
æ€§èƒ½è¾¾æ ‡ç‡: 100%
æ–‡æ¡£å®Œæˆåº¦: 100%
```

### ä¸ºä¸‹ä¸€é˜¶æ®µåšå¥½å‡†å¤‡
- âœ… Coreå¼•æ“APIç¨³å®š
- âœ… æ¸²æŸ“å™¨æ¥å£å®šä¹‰æ¸…æ™°
- âœ… å®‰å…¨æœºåˆ¶éªŒè¯é€šè¿‡
- âœ… å¯ä»¥å¼€å§‹Vueé€‚é…å±‚å¼€å‘

---

**æ­å–œï¼é˜¶æ®µ4åœ†æ»¡å®Œæˆï¼** ğŸ‰

æ¥ä¸‹æ¥è¿›å…¥**é˜¶æ®µ5: Vueé€‚é…å±‚**ï¼ˆ6å‘¨ï¼‰ï¼Œå°†å¼€å‘10ä¸ªæ ¸å¿ƒç»„ä»¶å¹¶å‘å¸ƒv0.5.0ã€‚
# é˜¶æ®µ5è¯¦ç»†è®¡åˆ’ - Part 1: Week 1-3

> è¿™æ˜¯00-IMPLEMENTATION-GUIDE.mdé˜¶æ®µ5çš„è¯¦ç»†è¡¥å……æ–‡æ¡£  
> **å‰ç½®**: éœ€å…ˆå®Œæˆé˜¶æ®µ4ï¼ˆCoreå¼•æ“v0.2.0ï¼‰

---

## ğŸ¨ é˜¶æ®µ5ï¼šVueé€‚é…å±‚ï¼ˆ6å‘¨ï¼‰- Week 1-3è¯¦ç»†

> **é‡è¦æ€§**: ğŸ”´ ç¬¬ä¸€ä¸ªæ¡†æ¶é€‚é…  
> **æµ‹è¯•è¦æ±‚**: Vueæ¨¡å—â‰¥85%

---

## ğŸ“¦ Week 1ï¼šVueæ¸²æŸ“å™¨ + ç»„åˆå¼å‡½æ•°ï¼ˆDay 1-7ï¼‰

### å‰ç½®æ¡ä»¶éªŒæ”¶
- âœ… Coreå¼•æ“v0.2.0å®Œæˆ
- âœ… Rendereræ¥å£å®šä¹‰æ¸…æ™°
- âœ… æ‰€æœ‰Coreæµ‹è¯•é€šè¿‡

---

### Day 1-3ï¼šVueæ¸²æŸ“å™¨å®ç°

#### Vueæ¸²æŸ“å™¨æ ¸å¿ƒå®ç°

```typescript
// packages/vue/src/renderer/index.ts
import { h, createApp, VNode, Component } from 'vue'
import type { Renderer, RenderInstance } from '@vjs-ui/core'

export class VueRenderer implements Renderer {
  private componentRegistry = new Map<string, Component>()
  private instanceId = 0

  /**
   * æ³¨å†ŒVueç»„ä»¶
   */
  registerComponent(name: string, component: Component): void {
    this.componentRegistry.set(name, component)
  }

  /**
   * æ¸²æŸ“DSLä¸ºVueç»„ä»¶
   */
  render(dsl: any, container?: HTMLElement): RenderInstance {
    const instanceId = `vue-${++this.instanceId}`
    
    // åˆ›å»ºVueåº”ç”¨
    const app = createApp({
      render: () => this.renderNode(dsl)
    })

    // æŒ‚è½½
    if (container) {
      app.mount(container)
    }

    // è¿”å›å®ä¾‹
    return {
      id: instanceId,
      app,
      updateProp: (key: string, value: any) => {
        // æ›´æ–°propé€»è¾‘
      },
      updateStyle: (key: string, value: any) => {
        // æ›´æ–°styleé€»è¾‘
      },
      on: (event: string, handler: Function) => {
        // äº‹ä»¶ç»‘å®šé€»è¾‘
      },
      destroy: () => {
        app.unmount()
      }
    }
  }

  /**
   * é€’å½’æ¸²æŸ“èŠ‚ç‚¹
   */
  private renderNode(node: any): VNode | VNode[] {
    if (!node) return h('div')
    
    // è·å–ç»„ä»¶
    const component = this.componentRegistry.get(node.type)
    if (!component) {
      console.warn(`Component not found: ${node.type}`)
      return h('div', `[${node.type}]`)
    }

    // å¤„ç†children
    const children = node.children?.map((child: any) => 
      this.renderNode(child)
    )

    // æ¸²æŸ“ç»„ä»¶
    return h(component, {
      ...node.props,
      style: node.style
    }, children)
  }
}
```

#### Vueæ¸²æŸ“å™¨æµ‹è¯•ï¼ˆ20+ç”¨ä¾‹ï¼‰

```typescript
describe('VueRenderer', () => {
  let renderer: VueRenderer

  beforeEach(() => {
    renderer = new VueRenderer()
  })

  describe('ç»„ä»¶æ³¨å†Œ', () => {
    test('1. æ³¨å†Œå•ä¸ªç»„ä»¶', () => { /*...*/ })
    test('2. æ³¨å†Œå¤šä¸ªç»„ä»¶', () => { /*...*/ })
    test('3. é‡å¤æ³¨å†Œè¦†ç›–', () => { /*...*/ })
  })

  describe('DSLæ¸²æŸ“', () => {
    test('4. æ¸²æŸ“ç®€å•ç»„ä»¶', () => { /*...*/ })
    test('5. æ¸²æŸ“åµŒå¥—ç»„ä»¶', () => { /*...*/ })
    test('6. æ¸²æŸ“åˆ—è¡¨', () => { /*...*/ })
    test('7. Propsä¼ é€’', () => { /*...*/ })
    test('8. Styleä¼ é€’', () => { /*...*/ })
    test('9. äº‹ä»¶ç»‘å®š', () => { /*...*/ })
    test('10. æ’æ§½æ¸²æŸ“', () => { /*...*/ })
  })

  describe('å®ä¾‹ç®¡ç†', () => {
    test('11. åˆ›å»ºå®ä¾‹', () => { /*...*/ })
    test('12. æ›´æ–°Props', () => { /*...*/ })
    test('13. æ›´æ–°Style', () => { /*...*/ })
    test('14. é”€æ¯å®ä¾‹', () => { /*...*/ })
    test('15. å¤šä¸ªå®ä¾‹éš”ç¦»', () => { /*...*/ })
  })

  describe('è¾¹ç•Œæµ‹è¯•', () => {
    test('16. æœªæ³¨å†Œç»„ä»¶å¤„ç†', () => { /*...*/ })
    test('17. ç©ºDSLå¤„ç†', () => { /*...*/ })
    test('18. æ·±åº¦åµŒå¥—ï¼ˆ20å±‚ï¼‰', () => { /*...*/ })
    test('19. å¤§é‡èŠ‚ç‚¹ï¼ˆ1000+ï¼‰', () => { /*...*/ })
    test('20. å†…å­˜æ³„æ¼æ£€æµ‹', () => { /*...*/ })
  })
})
```

**Day 1-3 éªŒæ”¶**ï¼š
- [ ] 20+æµ‹è¯•é€šè¿‡
- [ ] å®ç°Rendereræ¥å£
- [ ] æ”¯æŒDSLæ¸²æŸ“
- [ ] æ— å†…å­˜æ³„æ¼

---

### Day 4-5ï¼šç»„åˆå¼å‡½æ•°

#### useCore ç»„åˆå¼å‡½æ•°

```typescript
// packages/vue/src/composables/useCore.ts
import { ref, onUnmounted, readonly } from 'vue'
import { Core } from '@vjs-ui/core'

export function useCore(config?: any) {
  const core = new Core(config)
  const state = ref(core.getState())

  // æ›´æ–°çŠ¶æ€
  const setState = (updates: any) => {
    core.setState(updates)
    state.value = core.getState()
  }

  // æ¸…ç†
  onUnmounted(() => {
    core.destroy()
  })

  return {
    core,
    state: readonly(state),
    setState
  }
}
```

#### useTheme ç»„åˆå¼å‡½æ•°

```typescript
// packages/vue/src/composables/useTheme.ts
import { ref, onMounted } from 'vue'

export function useTheme() {
  const currentTheme = ref('default')
  const themes = ref<string[]>([])

  const switchTheme = (themeName: string) => {
    // åˆ‡æ¢ä¸»é¢˜é€»è¾‘
    currentTheme.value = themeName
  }

  return {
    currentTheme,
    themes,
    switchTheme
  }
}
```

#### ç»„åˆå¼å‡½æ•°æµ‹è¯•ï¼ˆ15+ç”¨ä¾‹ï¼‰

```typescript
describe('Composables', () => {
  describe('useCore', () => {
    test('1. åˆå§‹åŒ–Core', () => { /*...*/ })
    test('2. çŠ¶æ€å“åº”å¼', () => { /*...*/ })
    test('3. setStateæ›´æ–°', () => { /*...*/ })
    test('4. è‡ªåŠ¨æ¸…ç†', () => { /*...*/ })
    test('5. å¤šä¸ªå®ä¾‹éš”ç¦»', () => { /*...*/ })
  })

  describe('useTheme', () => {
    test('6. è·å–å½“å‰ä¸»é¢˜', () => { /*...*/ })
    test('7. åˆ‡æ¢ä¸»é¢˜', () => { /*...*/ })
    test('8. ä¸»é¢˜åˆ—è¡¨', () => { /*...*/ })
    test('9. æ— æ•ˆä¸»é¢˜å¤„ç†', () => { /*...*/ })
  })

  describe('useToken', () => {
    test('10. è·å–Tokenå€¼', () => { /*...*/ })
    test('11. Tokenå“åº”å¼', () => { /*...*/ })
    test('12. Tokenä¸å­˜åœ¨å¤„ç†', () => { /*...*/ })
  })

  describe('é›†æˆæµ‹è¯•', () => {
    test('13. useCore + useTheme', () => { /*...*/ })
    test('14. useCore + useToken', () => { /*...*/ })
    test('15. å®Œæ•´æµç¨‹', () => { /*...*/ })
  })
})
```

**Day 4-5 éªŒæ”¶**ï¼š
- [ ] 15+æµ‹è¯•é€šè¿‡
- [ ] ç»„åˆå¼å‡½æ•°å¯ç”¨
- [ ] å“åº”å¼æ­£å¸¸
- [ ] è‡ªåŠ¨æ¸…ç†

---

### Day 6-7ï¼šç»„ä»¶åŸºç¡€è®¾æ–½

#### ç»„ä»¶åŸºç±»

```typescript
// packages/vue/src/base/BaseComponent.ts
import { defineComponent } from 'vue'

export const BaseComponent = defineComponent({
  props: {
    // é€šç”¨props
    className: String,
    style: Object,
    disabled: Boolean
  },
  setup(props, { slots }) {
    // é€šç”¨é€»è¾‘
    return {
      // é€šç”¨æ–¹æ³•
    }
  }
})
```

**Week 1 å®Œæˆæ ‡å¿—**ï¼š
- âœ… Vueæ¸²æŸ“å™¨å®Œæ•´
- âœ… ç»„åˆå¼å‡½æ•°å®Œæ•´
- âœ… åŸºç¡€è®¾æ–½å®Œæˆ
- âœ… 35+æµ‹è¯•é€šè¿‡

---

## ğŸ§© Week 2ï¼šåŸºç¡€ç»„ä»¶ï¼ˆButtonã€Inputã€Cardï¼‰Day 8-14

### Day 8-10ï¼šVButtonç»„ä»¶

#### VButtonå®Œæ•´å®ç°

```vue
<!-- packages/vue/src/components/Button/Button.vue -->
<template>
  <button
    :class="buttonClasses"
    :disabled="disabled"
    :type="nativeType"
    @click="handleClick"
  >
    <span v-if="loading" class="vjs-button__loading">
      <LoadingIcon />
    </span>
    <span v-if="$slots.icon" class="vjs-button__icon">
      <slot name="icon" />
    </span>
    <span class="vjs-button__text">
      <slot>{{ text }}</slot>
    </span>
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue'

export interface ButtonProps {
  type?: 'default' | 'primary' | 'success' | 'warning' | 'danger'
  size?: 'small' | 'medium' | 'large'
  text?: string
  disabled?: boolean
  loading?: boolean
  nativeType?: 'button' | 'submit' | 'reset'
}

const props = withDefaults(defineProps<ButtonProps>(), {
  type: 'default',
  size: 'medium',
  nativeType: 'button',
  disabled: false,
  loading: false
})

const emit = defineEmits<{
  click: [event: MouseEvent]
}>()

const buttonClasses = computed(() => [
  'vjs-button',
  `vjs-button--${props.type}`,
  `vjs-button--${props.size}`,
  {
    'is-disabled': props.disabled,
    'is-loading': props.loading
  }
])

const handleClick = (event: MouseEvent) => {
  if (props.disabled || props.loading) return
  emit('click', event)
}
</script>

<style scoped>
.vjs-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--vjs-spacing-sm) var(--vjs-spacing-md);
  border: 1px solid var(--vjs-color-border);
  border-radius: var(--vjs-radius-md);
  background: var(--vjs-color-bg);
  color: var(--vjs-color-text);
  cursor: pointer;
  transition: all 0.3s;
}

.vjs-button--primary {
  background: var(--vjs-color-primary);
  color: white;
  border-color: var(--vjs-color-primary);
}

.vjs-button.is-disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
</style>
```

#### VButtonæµ‹è¯•ï¼ˆ10+ç”¨ä¾‹ï¼‰

```typescript
describe('VButton', () => {
  test('1. æ¸²æŸ“é»˜è®¤æŒ‰é’®', () => { /*...*/ })
  test('2. typeå±æ€§', () => { /*...*/ })
  test('3. sizeå±æ€§', () => { /*...*/ })
  test('4. disabledçŠ¶æ€', () => { /*...*/ })
  test('5. loadingçŠ¶æ€', () => { /*...*/ })
  test('6. clickäº‹ä»¶', () => { /*...*/ })
  test('7. é»˜è®¤æ’æ§½', () => { /*...*/ })
  test('8. iconæ’æ§½', () => { /*...*/ })
  test('9. ä¸»é¢˜åˆ‡æ¢', () => { /*...*/ })
  test('10. å¿«ç…§æµ‹è¯•', () => { /*...*/ })
})
```

---

### Day 11-12ï¼šVInputç»„ä»¶

```vue
<!-- VInputå®Œæ•´å®ç° -->
<template>
  <div :class="inputClasses">
    <input
      v-bind="$attrs"
      :type="type"
      :value="modelValue"
      :placeholder="placeholder"
      :disabled="disabled"
      :readonly="readonly"
      @input="handleInput"
      @focus="handleFocus"
      @blur="handleBlur"
    />
  </div>
</template>

<script setup lang="ts">
// ... å®Œæ•´å®ç°
</script>
```

#### VInputæµ‹è¯•ï¼ˆ10+ç”¨ä¾‹ï¼‰
- åŸºç¡€åŠŸèƒ½æµ‹è¯•
- v-modelåŒå‘ç»‘å®š
- ç±»å‹éªŒè¯
- äº‹ä»¶æµ‹è¯•

---

### Day 13-14ï¼šVCardç»„ä»¶

```vue
<!-- VCardå®Œæ•´å®ç° -->
<template>
  <div class="vjs-card">
    <div v-if="$slots.header" class="vjs-card__header">
      <slot name="header" />
    </div>
    <div class="vjs-card__body">
      <slot />
    </div>
    <div v-if="$slots.footer" class="vjs-card__footer">
      <slot name="footer" />
    </div>
  </div>
</template>
```

**Week 2 å®Œæˆæ ‡å¿—**ï¼š
- âœ… 3ä¸ªåŸºç¡€ç»„ä»¶å®Œæˆ
- âœ… 30+æµ‹è¯•é€šè¿‡
- âœ… ç»„ä»¶å¯ç‹¬ç«‹ä½¿ç”¨
- âœ… æ”¯æŒDSLæ¸²æŸ“

---

## ğŸ“ Week 3ï¼šè¡¨å•ç»„ä»¶ï¼ˆSelectã€Checkboxã€Radioï¼‰Day 15-21

### Day 15-17ï¼šVSelectç»„ä»¶

```vue
<template>
  <div class="vjs-select" v-click-outside="closeDropdown">
    <div class="vjs-select__trigger" @click="toggleDropdown">
      <span>{{ selectedLabel || placeholder }}</span>
      <ArrowIcon :class="{ 'is-reverse': visible }" />
    </div>
    
    <transition name="vjs-select-dropdown">
      <div v-show="visible" class="vjs-select__dropdown">
        <div
          v-for="option in options"
          :key="option.value"
          :class="optionClasses(option)"
          @click="handleSelect(option)"
        >
          {{ option.label }}
        </div>
      </div>
    </transition>
  </div>
</template>

<script setup lang="ts">
// ... Selectå®Œæ•´é€»è¾‘
</script>
```

### Day 18-19ï¼šVCheckboxç»„ä»¶

```vue
<template>
  <label class="vjs-checkbox">
    <span class="vjs-checkbox__input">
      <input
        type="checkbox"
        :checked="isChecked"
        :disabled="disabled"
        @change="handleChange"
      />
      <span class="vjs-checkbox__inner" />
    </span>
    <span class="vjs-checkbox__label">
      <slot>{{ label }}</slot>
    </span>
  </label>
</template>
```

### Day 20-21ï¼šVRadioç»„ä»¶

```vue
<template>
  <label class="vjs-radio">
    <span class="vjs-radio__input">
      <input
        type="radio"
        :value="value"
        :checked="isChecked"
        :disabled="disabled"
        @change="handleChange"
      />
      <span class="vjs-radio__inner" />
    </span>
    <span class="vjs-radio__label">
      <slot>{{ label }}</slot>
    </span>
  </label>
</template>
```

**Week 3 å®Œæˆæ ‡å¿—**ï¼š
- âœ… 6ä¸ªç»„ä»¶å…¨éƒ¨å®Œæˆ
- âœ… 60+æµ‹è¯•é€šè¿‡
- âœ… è¡¨å•ç»„ä»¶å¯ç”¨
- âœ… æ”¯æŒä¸»é¢˜åˆ‡æ¢

---

**Week 1-3å®Œæˆæ ‡å¿—**ï¼š
- ğŸ‰ Vueæ¸²æŸ“å™¨ç”Ÿäº§å°±ç»ª
- ğŸ‰ 6ä¸ªåŸºç¡€ç»„ä»¶å®Œæˆ
- ğŸ‰ 95+æµ‹è¯•é€šè¿‡
- ğŸ‰ ä¸ºWeek 4-6æ‰“ä¸‹åŸºç¡€

---

**æ¥ä¸‹æ¥è¯·æŸ¥çœ‹**ï¼š
- Part 2: Week 4-6ï¼ˆDialogã€Tableã€Formã€DatePicker + æµ‹è¯• + å‘å¸ƒï¼‰
# é˜¶æ®µ5è¯¦ç»†è®¡åˆ’ - Part 2: Week 4-6

> è¿™æ˜¯00-IMPLEMENTATION-GUIDE.mdé˜¶æ®µ5çš„è¯¦ç»†è¡¥å……æ–‡æ¡£  
> **å‰ç½®**: éœ€å…ˆå®ŒæˆPart 1ï¼ˆWeek 1-3ï¼Œå‰6ä¸ªç»„ä»¶ï¼‰

---

## ğŸ¨ é˜¶æ®µ5ï¼šVueé€‚é…å±‚ï¼ˆ6å‘¨ï¼‰- Week 4-6è¯¦ç»†

### å‰ç½®æ¡ä»¶éªŒæ”¶
- âœ… Vueæ¸²æŸ“å™¨å®Œæˆ
- âœ… 6ä¸ªåŸºç¡€ç»„ä»¶å®Œæˆ
- âœ… 95+æµ‹è¯•é€šè¿‡

---

## ğŸ”² Week 4ï¼šå¤æ‚ç»„ä»¶ï¼ˆDialogã€Tableï¼‰Day 22-28

### Day 22-24ï¼šVDialogç»„ä»¶

#### VDialogå®Œæ•´å®ç°

```vue
<!-- packages/vue/src/components/Dialog/Dialog.vue -->
<template>
  <teleport to="body">
    <transition name="vjs-dialog-fade">
      <div v-show="visible" class="vjs-dialog__wrapper" @click.self="handleWrapperClick">
        <div :class="dialogClasses" :style="dialogStyle">
          <!-- Header -->
          <div v-if="!$slots.header && title" class="vjs-dialog__header">
            <span class="vjs-dialog__title">{{ title }}</span>
            <button
              v-if="showClose"
              class="vjs-dialog__close"
              @click="handleClose"
            >
              <CloseIcon />
            </button>
          </div>
          <div v-else-if="$slots.header" class="vjs-dialog__header">
            <slot name="header" />
          </div>

          <!-- Body -->
          <div class="vjs-dialog__body">
            <slot />
          </div>

          <!-- Footer -->
          <div v-if="$slots.footer" class="vjs-dialog__footer">
            <slot name="footer" />
          </div>
          <div v-else-if="showFooter" class="vjs-dialog__footer">
            <VButton @click="handleCancel">{{ cancelText }}</VButton>
            <VButton type="primary" @click="handleConfirm">{{ confirmText }}</VButton>
          </div>
        </div>
      </div>
    </transition>
  </teleport>
</template>

<script setup lang="ts">
import { computed, watch, onMounted, onUnmounted } from 'vue'

export interface DialogProps {
  visible?: boolean
  title?: string
  width?: string | number
  top?: string
  modal?: boolean
  modalAppendToBody?: boolean
  showClose?: boolean
  showFooter?: boolean
  closeOnClickModal?: boolean
  closeOnPressEscape?: boolean
  cancelText?: string
  confirmText?: string
}

const props = withDefaults(defineProps<DialogProps>(), {
  visible: false,
  width: '50%',
  top: '15vh',
  modal: true,
  modalAppendToBody: true,
  showClose: true,
  showFooter: true,
  closeOnClickModal: true,
  closeOnPressEscape: true,
  cancelText: 'å–æ¶ˆ',
  confirmText: 'ç¡®å®š'
})

const emit = defineEmits<{
  'update:visible': [value: boolean]
  close: []
  cancel: []
  confirm: []
}>()

const dialogClasses = computed(() => [
  'vjs-dialog',
  {
    'is-center': props.top === 'center'
  }
])

const dialogStyle = computed(() => ({
  width: typeof props.width === 'number' ? `${props.width}px` : props.width,
  marginTop: props.top
}))

const handleClose = () => {
  emit('update:visible', false)
  emit('close')
}

const handleCancel = () => {
  emit('cancel')
  handleClose()
}

const handleConfirm = () => {
  emit('confirm')
  handleClose()
}

const handleWrapperClick = () => {
  if (props.closeOnClickModal) {
    handleClose()
  }
}

const handleEscape = (e: KeyboardEvent) => {
  if (props.visible && props.closeOnPressEscape && e.key === 'Escape') {
    handleClose()
  }
}

// ç›‘å¬ESCé”®
watch(() => props.visible, (val) => {
  if (val) {
    document.addEventListener('keydown', handleEscape)
  } else {
    document.removeEventListener('keydown', handleEscape)
  }
})

onUnmounted(() => {
  document.removeEventListener('keydown', handleEscape)
})
</script>

<style scoped>
.vjs-dialog__wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  z-index: 1000;
}

.vjs-dialog {
  background: var(--vjs-color-bg);
  border-radius: var(--vjs-radius-lg);
  box-shadow: var(--vjs-shadow-lg);
  overflow: hidden;
}

.vjs-dialog__header {
  padding: var(--vjs-spacing-lg);
  border-bottom: 1px solid var(--vjs-color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.vjs-dialog__body {
  padding: var(--vjs-spacing-lg);
  max-height: 60vh;
  overflow-y: auto;
}

.vjs-dialog__footer {
  padding: var(--vjs-spacing-lg);
  border-top: 1px solid var(--vjs-color-border);
  display: flex;
  justify-content: flex-end;
  gap: var(--vjs-spacing-sm);
}

/* Animations */
.vjs-dialog-fade-enter-active,
.vjs-dialog-fade-leave-active {
  transition: opacity 0.3s;
}

.vjs-dialog-fade-enter-from,
.vjs-dialog-fade-leave-to {
  opacity: 0;
}
</style>
```

#### VDialogæµ‹è¯•ï¼ˆ15+ç”¨ä¾‹ï¼‰

```typescript
describe('VDialog', () => {
  test('1. åŸºç¡€æ¸²æŸ“', () => { /*...*/ })
  test('2. visibleæ§åˆ¶æ˜¾ç¤º', () => { /*...*/ })
  test('3. titleæ˜¾ç¤º', () => { /*...*/ })
  test('4. widthè®¾ç½®', () => { /*...*/ })
  test('5. ç‚¹å‡»é®ç½©å…³é—­', () => { /*...*/ })
  test('6. ESCé”®å…³é—­', () => { /*...*/ })
  test('7. showCloseæ§åˆ¶', () => { /*...*/ })
  test('8. å–æ¶ˆæŒ‰é’®', () => { /*...*/ })
  test('9. ç¡®è®¤æŒ‰é’®', () => { /*...*/ })
  test('10. headeræ’æ§½', () => { /*...*/ })
  test('11. footeræ’æ§½', () => { /*...*/ })
  test('12. teleportåˆ°body', () => { /*...*/ })
  test('13. å¤šä¸ªDialogå åŠ ', () => { /*...*/ })
  test('14. åŠ¨ç”»æ•ˆæœ', () => { /*...*/ })
  test('15. å†…å­˜æ³„æ¼æ£€æµ‹', () => { /*...*/ })
})
```

**Day 22-24 éªŒæ”¶**ï¼š
- [ ] DialogåŠŸèƒ½å®Œæ•´
- [ ] 15+æµ‹è¯•é€šè¿‡
- [ ] æ”¯æŒæ‰€æœ‰é…ç½®é¡¹
- [ ] æ— å†…å­˜æ³„æ¼

---

### Day 25-28ï¼šVTableç»„ä»¶

#### VTableå®Œæ•´å®ç°

```vue
<!-- packages/vue/src/components/Table/Table.vue -->
<template>
  <div class="vjs-table">
    <div class="vjs-table__header">
      <table>
        <thead>
          <tr>
            <th
              v-for="column in columns"
              :key="column.key"
              :style="getColumnStyle(column)"
            >
              {{ column.title }}
            </th>
          </tr>
        </thead>
      </table>
    </div>

    <div class="vjs-table__body">
      <table>
        <tbody>
          <tr
            v-for="(row, index) in data"
            :key="getRowKey(row, index)"
            :class="getRowClass(row, index)"
            @click="handleRowClick(row, index)"
          >
            <td
              v-for="column in columns"
              :key="column.key"
              :style="getColumnStyle(column)"
            >
              <!-- è‡ªå®šä¹‰æ¸²æŸ“ -->
              <slot
                v-if="column.slot"
                :name="column.slot"
                :row="row"
                :column="column"
                :index="index"
              />
              <!-- é»˜è®¤æ¸²æŸ“ -->
              <span v-else>{{ getCellValue(row, column.key) }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div v-if="showPagination" class="vjs-table__footer">
      <!-- åˆ†é¡µç»„ä»¶ -->
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'

export interface TableColumn {
  key: string
  title: string
  width?: string | number
  align?: 'left' | 'center' | 'right'
  slot?: string
}

export interface TableProps {
  data: any[]
  columns: TableColumn[]
  rowKey?: string | ((row: any) => string)
  stripe?: boolean
  border?: boolean
  showPagination?: boolean
  pageSize?: number
  currentPage?: number
}

const props = withDefaults(defineProps<TableProps>(), {
  rowKey: 'id',
  stripe: false,
  border: false,
  showPagination: false,
  pageSize: 10,
  currentPage: 1
})

const emit = defineEmits<{
  'row-click': [row: any, index: number]
  'update:currentPage': [page: number]
}>()

const getRowKey = (row: any, index: number): string => {
  if (typeof props.rowKey === 'function') {
    return props.rowKey(row)
  }
  return row[props.rowKey] || String(index)
}

const getRowClass = (row: any, index: number): any => {
  return {
    'vjs-table__row--stripe': props.stripe && index % 2 === 1
  }
}

const getColumnStyle = (column: TableColumn): any => {
  return {
    width: typeof column.width === 'number' ? `${column.width}px` : column.width,
    textAlign: column.align || 'left'
  }
}

const getCellValue = (row: any, key: string): any => {
  return row[key]
}

const handleRowClick = (row: any, index: number) => {
  emit('row-click', row, index)
}
</script>

<style scoped>
.vjs-table {
  width: 100%;
  border: 1px solid var(--vjs-color-border);
  border-radius: var(--vjs-radius-md);
  overflow: hidden;
}

.vjs-table__header table,
.vjs-table__body table {
  width: 100%;
  border-collapse: collapse;
}

.vjs-table__header th {
  padding: var(--vjs-spacing-md);
  background: var(--vjs-color-bg-light);
  font-weight: 600;
  border-bottom: 1px solid var(--vjs-color-border);
}

.vjs-table__body td {
  padding: var(--vjs-spacing-md);
  border-bottom: 1px solid var(--vjs-color-border);
}

.vjs-table__row--stripe {
  background: var(--vjs-color-bg-light);
}

.vjs-table__body tr:hover {
  background: var(--vjs-color-bg-hover);
}
</style>
```

#### VTableæµ‹è¯•ï¼ˆ15+ç”¨ä¾‹ï¼‰
```typescript
describe('VTable', () => {
  test('1. åŸºç¡€æ¸²æŸ“', () => { /*...*/ })
  test('2. columnsé…ç½®', () => { /*...*/ })
  test('3. dataæ˜¾ç¤º', () => { /*...*/ })
  test('4. stripeæ–‘é©¬çº¹', () => { /*...*/ })
  test('5. borderè¾¹æ¡†', () => { /*...*/ })
  test('6. row-clickäº‹ä»¶', () => { /*...*/ })
  test('7. è‡ªå®šä¹‰slot', () => { /*...*/ })
  test('8. rowKeyé…ç½®', () => { /*...*/ })
  test('9. column width', () => { /*...*/ })
  test('10. column align', () => { /*...*/ })
  test('11. ç©ºæ•°æ®æ˜¾ç¤º', () => { /*...*/ })
  test('12. å¤§é‡æ•°æ®ï¼ˆ1000è¡Œï¼‰', () => { /*...*/ })
  test('13. æ€§èƒ½æµ‹è¯•ï¼ˆæ¸²æŸ“<500msï¼‰', () => { /*...*/ })
  test('14. åˆ†é¡µåŠŸèƒ½', () => { /*...*/ })
  test('15. å¿«ç…§æµ‹è¯•', () => { /*...*/ })
})
```

**Week 4 å®Œæˆæ ‡å¿—**ï¼š
- âœ… Dialogå’ŒTableå®Œæˆ
- âœ… 30+æµ‹è¯•é€šè¿‡
- âœ… æ€§èƒ½è¾¾æ ‡

---

## ğŸ“‹ Week 5ï¼šé«˜çº§ç»„ä»¶ï¼ˆFormã€DatePickerï¼‰Day 29-35

### Day 29-32ï¼šVFormç»„ä»¶

```vue
<template>
  <form class="vjs-form" @submit.prevent="handleSubmit">
    <div
      v-for="item in items"
      :key="item.key"
      class="vjs-form-item"
    >
      <label class="vjs-form-item__label">
        {{ item.label }}
        <span v-if="item.required" class="vjs-form-item__required">*</span>
      </label>
      
      <div class="vjs-form-item__content">
        <component
          :is="getComponent(item.type)"
          v-model="formData[item.key]"
          v-bind="item.props"
        />
        <span v-if="errors[item.key]" class="vjs-form-item__error">
          {{ errors[item.key] }}
        </span>
      </div>
    </div>

    <div class="vjs-form__actions">
      <VButton @click="handleReset">é‡ç½®</VButton>
      <VButton type="primary" native-type="submit">æäº¤</VButton>
    </div>
  </form>
</template>

<script setup lang="ts">
// ... Formå®Œæ•´é€»è¾‘ï¼ŒåŒ…å«éªŒè¯
</script>
```

### Day 33-35ï¼šVDatePickerç»„ä»¶

```vue
<template>
  <div class="vjs-date-picker" v-click-outside="closePanel">
    <VInput
      :model-value="displayValue"
      :placeholder="placeholder"
      readonly
      @click="togglePanel"
    />

    <transition name="vjs-date-picker-fade">
      <div v-show="visible" class="vjs-date-picker__panel">
        <!-- æœˆä»½é€‰æ‹© -->
        <div class="vjs-date-picker__header">
          <button @click="prevMonth">&lt;</button>
          <span>{{ currentMonth }}</span>
          <button @click="nextMonth">&gt;</button>
        </div>

        <!-- æ—¥æœŸç½‘æ ¼ -->
        <div class="vjs-date-picker__body">
          <div class="vjs-date-picker__days">
            <span v-for="day in weekDays" :key="day">{{ day }}</span>
          </div>
          <div class="vjs-date-picker__dates">
            <span
              v-for="date in dates"
              :key="date.value"
              :class="getDateClass(date)"
              @click="selectDate(date)"
            >
              {{ date.day }}
            </span>
          </div>
        </div>
      </div>
    </transition>
  </div>
</template>

<script setup lang="ts">
// ... DatePickerå®Œæ•´é€»è¾‘
</script>
```

**Week 5 å®Œæˆæ ‡å¿—**ï¼š
- âœ… Formå’ŒDatePickerå®Œæˆ
- âœ… 10ä¸ªç»„ä»¶å…¨éƒ¨å®Œæˆ
- âœ… 20+æµ‹è¯•é€šè¿‡

---

## âœ… Week 6ï¼šæµ‹è¯• + æ–‡æ¡£ + å‘å¸ƒï¼ˆDay 36-42ï¼‰

### Day 36-38ï¼šå®Œå–„æµ‹è¯•

#### è¡¥å……æµ‹è¯•åˆ°>85%è¦†ç›–ç‡

```bash
# æ£€æŸ¥è¦†ç›–ç‡
pnpm test:coverage

# ç›®æ ‡
packages/vue/src/renderer    - >90%
packages/vue/src/composables - >85%
packages/vue/src/components  - >85%
```

#### è¡¥å……é›†æˆæµ‹è¯•

```typescript
describe('Vue Integration', () => {
  test('Core + Vueæ¸²æŸ“å™¨', () => { /*...*/ })
  test('10ä¸ªç»„ä»¶è”åŠ¨', () => { /*...*/ })
  test('å®Œæ•´è¡¨å•æµç¨‹', () => { /*...*/ })
  test('ä¸»é¢˜åˆ‡æ¢å½±å“æ‰€æœ‰ç»„ä»¶', () => { /*...*/ })
  test('æ€§èƒ½æµ‹è¯•', () => { /*...*/ })
})
```

**Day 36-38 éªŒæ”¶**ï¼š
- [ ] æµ‹è¯•è¦†ç›–ç‡>85%
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ— å·²çŸ¥bug

---

### Day 39-40ï¼šæ–‡æ¡£ç¼–å†™

#### APIæ–‡æ¡£

```markdown
# @vjs-ui/vue APIæ–‡æ¡£

## VButton

### Props
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| type | string | 'default' | æŒ‰é’®ç±»å‹ |
| size | string | 'medium' | æŒ‰é’®å°ºå¯¸ |
...

### Events
| äº‹ä»¶å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| click | (event: MouseEvent) | ç‚¹å‡»äº‹ä»¶ |

### Slots
| æ’æ§½å | è¯´æ˜ |
|--------|------|
| default | æŒ‰é’®å†…å®¹ |
| icon | å›¾æ ‡ |
```

#### ä½¿ç”¨ç¤ºä¾‹

```markdown
# å¿«é€Ÿå¼€å§‹

\`\`\`bash
pnpm add @vjs-ui/vue
\`\`\`

\`\`\`vue
<template>
  <VButton type="primary" @click="handleClick">
    ç‚¹å‡»æˆ‘
  </VButton>
</template>

<script setup>
import { VButton } from '@vjs-ui/vue'
</script>
\`\`\`
```

**Day 39-40 éªŒæ”¶**ï¼š
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ä½¿ç”¨ç¤ºä¾‹å®Œæ•´
- [ ] æ•…éšœæ’æŸ¥æŒ‡å—

---

### Day 41-42ï¼šå‘å¸ƒv0.5.0

```bash
# 1. æµ‹è¯•
pnpm test

# 2. æ„å»º
pnpm build

# 3. Changeset
pnpm changeset
# minor: @vjs-ui/vue
# feat: Vueé€‚é…å±‚v0.5.0
# - 10ä¸ªæ ¸å¿ƒç»„ä»¶
# - å®Œæ•´æ¸²æŸ“å™¨
# - ç»„åˆå¼å‡½æ•°

# 4. ç‰ˆæœ¬æ›´æ–°
pnpm changeset version

# 5. å‘å¸ƒ
pnpm changeset publish

# 6. GitHub Release
```

#### GitHub Releaseå†…å®¹

```markdown
# v0.5.0 - Vueé€‚é…å±‚

## ğŸ‰ ä¸»è¦ç‰¹æ€§

### Vueæ¸²æŸ“å™¨
- âœ… å®Œæ•´å®ç°Rendereræ¥å£
- âœ… æ”¯æŒDSLæ¸²æŸ“
- âœ… æ€§èƒ½ä¼˜åŒ–

### 10ä¸ªæ ¸å¿ƒç»„ä»¶
- âœ… Buttonã€Inputã€Cardï¼ˆåŸºç¡€ï¼‰
- âœ… Selectã€Checkboxã€Radioï¼ˆè¡¨å•ï¼‰
- âœ… Dialogã€Tableï¼ˆå¤æ‚ï¼‰
- âœ… Formã€DatePickerï¼ˆé«˜çº§ï¼‰

### ç»„åˆå¼å‡½æ•°
- âœ… useCore
- âœ… useTheme
- âœ… useToken

## ğŸ“Š è´¨é‡æŒ‡æ ‡
- æµ‹è¯•è¦†ç›–ç‡: 87%
- ç»„ä»¶æ•°é‡: 10ä¸ª
- åŒ…å¤§å°: <120KB (gzipped)

## ğŸ“– æ–‡æ¡£
- [å¿«é€Ÿå¼€å§‹](./docs/vue/quick-start.md)
- [ç»„ä»¶æ–‡æ¡£](./docs/vue/components/)
- [APIå‚è€ƒ](./docs/vue/api.md)

## ğŸ”œ ä¸‹ä¸€æ­¥
v1.0.0å°†å®Œå–„æ›´å¤šç»„ä»¶å¹¶å‘å¸ƒç”Ÿäº§ç‰ˆæœ¬ã€‚
```

**Day 41-42 éªŒæ”¶**ï¼š
- [ ] v0.5.0æˆåŠŸå‘å¸ƒ
- [ ] npmåŒ…å¯å®‰è£…
- [ ] GitHub Releaseåˆ›å»º
- [ ] æ–‡æ¡£éƒ¨ç½²

---

## ğŸ‰ é˜¶æ®µ5å®Œæˆæ ‡å¿—

### æ ¸å¿ƒæˆæœ
- âœ… Vueé€‚é…å±‚å®Œæ•´
- âœ… 10ä¸ªæ ¸å¿ƒç»„ä»¶ç”Ÿäº§å°±ç»ª
- âœ… æµ‹è¯•è¦†ç›–ç‡>85%
- âœ… æ–‡æ¡£å®Œæ•´
- âœ… v0.5.0æˆåŠŸå‘å¸ƒ

### æŠ€æœ¯æŒ‡æ ‡
```
åŠŸèƒ½å®Œæ•´åº¦: 100%
æµ‹è¯•è¦†ç›–ç‡: 87%
ç»„ä»¶æ•°é‡: 10ä¸ª
åŒ…å¤§å°: <120KB
```

### ä¸ºä¸‹ä¸€é˜¶æ®µåšå¥½å‡†å¤‡
- âœ… Vueç»„ä»¶ç¨³å®š
- âœ… ç»„ä»¶å¼€å‘æ¨¡å¼ç¡®ç«‹
- âœ… ä¸ºReacté€‚é…æä¾›å‚è€ƒ
- âœ… å¯ä»¥å¼€å§‹å¼€å‘è€…å·¥å…·

---

**æ­å–œï¼é˜¶æ®µ5åœ†æ»¡å®Œæˆï¼** ğŸ‰

æ¥ä¸‹æ¥è¿›å…¥**é˜¶æ®µ6: å¼€å‘è€…å·¥å…·**ï¼ˆ3-4å‘¨ï¼‰ï¼Œå°†å¼€å‘Playgroundã€CLIå’Œæ–‡æ¡£ç«™ã€‚
